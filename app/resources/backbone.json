{
    "/entries/backbone.js": "aW1wb3J0IHQgZnJvbSAnL2VudHJpZXMvbG9kYXNoLmpzJzsNCmltcG9ydCBlIGZyb20gJy9lbnRyaWVzL2pxdWVyeS5qcyc7DQoNCnZhciBpID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIGdsb2JhbFRoaXMgPyBnbG9iYWxUaGlzIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWwgPyBnbG9iYWwgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygc2VsZiA/IHNlbGYgOiB7fTsgdmFyIG4sIHMsIHIgPSAoZnVuY3Rpb24gKG4sIHMpIHsgIWZ1bmN0aW9uIChuKSB7IHZhciByLCBvID0gIm9iamVjdCIgPT0gdHlwZW9mIHNlbGYgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYgfHwgIm9iamVjdCIgPT0gdHlwZW9mIGkgJiYgaS5nbG9iYWwgPT09IGkgJiYgaSwgYSA9IHQ7IHRyeSB7IHIgPSBlOyB9IGNhdGNoICh0KSB7IH0gIWZ1bmN0aW9uICh0LCBlLCBpLCBuKSB7IHZhciBzID0gdC5CYWNrYm9uZSwgciA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsgZS5WRVJTSU9OID0gIjEuNC4wIiwgZS4kID0gbiwgZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdC5CYWNrYm9uZSA9IHMsIHRoaXMgfSwgZS5lbXVsYXRlSFRUUCA9ICExLCBlLmVtdWxhdGVKU09OID0gITE7IHZhciBvLCBhID0gZS5FdmVudHMgPSB7fSwgaCA9IC9ccysvLCBsID0gZnVuY3Rpb24gKHQsIGUsIG4sIHMsIHIpIHsgdmFyIG8sIGEgPSAwOyBpZiAobiAmJiAib2JqZWN0IiA9PSB0eXBlb2YgbikgeyB2b2lkIDAgIT09IHMgJiYgImNvbnRleHQiIGluIHIgJiYgdm9pZCAwID09PSByLmNvbnRleHQgJiYgKHIuY29udGV4dCA9IHMpOyBmb3IgKG8gPSBpLmtleXMobik7IGEgPCBvLmxlbmd0aDsgYSsrKWUgPSBsKHQsIGUsIG9bYV0sIG5bb1thXV0sIHIpOyB9IGVsc2UgaWYgKG4gJiYgaC50ZXN0KG4pKSBmb3IgKG8gPSBuLnNwbGl0KGgpOyBhIDwgby5sZW5ndGg7IGErKyllID0gdChlLCBvW2FdLCBzLCByKTsgZWxzZSBlID0gdChlLCBuLCBzLCByKTsgcmV0dXJuIGUgfTsgYS5vbiA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7IHJldHVybiB0aGlzLl9ldmVudHMgPSBsKHUsIHRoaXMuX2V2ZW50cyB8fCB7fSwgdCwgZSwgeyBjb250ZXh0OiBpLCBjdHg6IHRoaXMsIGxpc3RlbmluZzogbyB9KSwgbyAmJiAoKHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0ge30pKVtvLmlkXSA9IG8sIG8uaW50ZXJvcCA9ICExKSwgdGhpcyB9LCBhLmxpc3RlblRvID0gZnVuY3Rpb24gKHQsIGUsIG4pIHsgaWYgKCF0KSByZXR1cm4gdGhpczsgdmFyIHMgPSB0Ll9saXN0ZW5JZCB8fCAodC5fbGlzdGVuSWQgPSBpLnVuaXF1ZUlkKCJsIikpLCByID0gdGhpcy5fbGlzdGVuaW5nVG8gfHwgKHRoaXMuX2xpc3RlbmluZ1RvID0ge30pLCBhID0gbyA9IHJbc107IGEgfHwgKHRoaXMuX2xpc3RlbklkIHx8ICh0aGlzLl9saXN0ZW5JZCA9IGkudW5pcXVlSWQoImwiKSksIGEgPSBvID0gcltzXSA9IG5ldyB2KHRoaXMsIHQpKTsgdmFyIGggPSBjKHQsIGUsIG4sIHRoaXMpOyBpZiAobyA9IHZvaWQgMCwgaCkgdGhyb3cgaDsgcmV0dXJuIGEuaW50ZXJvcCAmJiBhLm9uKGUsIG4pLCB0aGlzIH07IHZhciB1ID0gZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsgaWYgKGkpIHsgdmFyIHMgPSB0W2VdIHx8ICh0W2VdID0gW10pLCByID0gbi5jb250ZXh0LCBvID0gbi5jdHgsIGEgPSBuLmxpc3RlbmluZzsgYSAmJiBhLmNvdW50KyssIHMucHVzaCh7IGNhbGxiYWNrOiBpLCBjb250ZXh0OiByLCBjdHg6IHIgfHwgbywgbGlzdGVuaW5nOiBhIH0pOyB9IHJldHVybiB0IH0sIGMgPSBmdW5jdGlvbiAodCwgZSwgaSwgbikgeyB0cnkgeyB0Lm9uKGUsIGksIG4pOyB9IGNhdGNoICh0KSB7IHJldHVybiB0IH0gfTsgYS5vZmYgPSBmdW5jdGlvbiAodCwgZSwgaSkgeyByZXR1cm4gdGhpcy5fZXZlbnRzID8gKHRoaXMuX2V2ZW50cyA9IGwoZCwgdGhpcy5fZXZlbnRzLCB0LCBlLCB7IGNvbnRleHQ6IGksIGxpc3RlbmVyczogdGhpcy5fbGlzdGVuZXJzIH0pLCB0aGlzKSA6IHRoaXMgfSwgYS5zdG9wTGlzdGVuaW5nID0gZnVuY3Rpb24gKHQsIGUsIG4pIHsgdmFyIHMgPSB0aGlzLl9saXN0ZW5pbmdUbzsgaWYgKCFzKSByZXR1cm4gdGhpczsgZm9yICh2YXIgciA9IHQgPyBbdC5fbGlzdGVuSWRdIDogaS5rZXlzKHMpLCBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHsgdmFyIGEgPSBzW3Jbb11dOyBpZiAoIWEpIGJyZWFrOyBhLm9iai5vZmYoZSwgbiwgdGhpcyksIGEuaW50ZXJvcCAmJiBhLm9mZihlLCBuKTsgfSByZXR1cm4gaS5pc0VtcHR5KHMpICYmICh0aGlzLl9saXN0ZW5pbmdUbyA9IHZvaWQgMCksIHRoaXMgfTsgdmFyIGQgPSBmdW5jdGlvbiAodCwgZSwgbiwgcykgeyBpZiAodCkgeyB2YXIgciwgbyA9IHMuY29udGV4dCwgYSA9IHMubGlzdGVuZXJzLCBoID0gMDsgaWYgKGUgfHwgbyB8fCBuKSB7IGZvciAociA9IGUgPyBbZV0gOiBpLmtleXModCk7IGggPCByLmxlbmd0aDsgaCsrKSB7IHZhciBsID0gdFtlID0gcltoXV07IGlmICghbCkgYnJlYWs7IGZvciAodmFyIHUgPSBbXSwgYyA9IDA7IGMgPCBsLmxlbmd0aDsgYysrKSB7IHZhciBkID0gbFtjXTsgaWYgKG4gJiYgbiAhPT0gZC5jYWxsYmFjayAmJiBuICE9PSBkLmNhbGxiYWNrLl9jYWxsYmFjayB8fCBvICYmIG8gIT09IGQuY29udGV4dCkgdS5wdXNoKGQpOyBlbHNlIHsgdmFyIGYgPSBkLmxpc3RlbmluZzsgZiAmJiBmLm9mZihlLCBuKTsgfSB9IHUubGVuZ3RoID8gdFtlXSA9IHUgOiBkZWxldGUgdFtlXTsgfSByZXR1cm4gdCB9IGZvciAociA9IGkua2V5cyhhKTsgaCA8IHIubGVuZ3RoOyBoKyspYVtyW2hdXS5jbGVhbnVwKCk7IH0gfTsgYS5vbmNlID0gZnVuY3Rpb24gKHQsIGUsIGkpIHsgdmFyIG4gPSBsKGYsIHt9LCB0LCBlLCB0aGlzLm9mZi5iaW5kKHRoaXMpKTsgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiB0ICYmIG51bGwgPT0gaSAmJiAoZSA9IHZvaWQgMCksIHRoaXMub24obiwgZSwgaSkgfSwgYS5saXN0ZW5Ub09uY2UgPSBmdW5jdGlvbiAodCwgZSwgaSkgeyB2YXIgbiA9IGwoZiwge30sIGUsIGksIHRoaXMuc3RvcExpc3RlbmluZy5iaW5kKHRoaXMsIHQpKTsgcmV0dXJuIHRoaXMubGlzdGVuVG8odCwgbikgfTsgdmFyIGYgPSBmdW5jdGlvbiAodCwgZSwgbiwgcykgeyBpZiAobikgeyB2YXIgciA9IHRbZV0gPSBpLm9uY2UoKGZ1bmN0aW9uICgpIHsgcyhlLCByKSwgbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9KSk7IHIuX2NhbGxiYWNrID0gbjsgfSByZXR1cm4gdCB9OyBhLnRyaWdnZXIgPSBmdW5jdGlvbiAodCkgeyBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7IGZvciAodmFyIGUgPSBNYXRoLm1heCgwLCBhcmd1bWVudHMubGVuZ3RoIC0gMSksIGkgPSBBcnJheShlKSwgbiA9IDA7IG4gPCBlOyBuKyspaVtuXSA9IGFyZ3VtZW50c1tuICsgMV07IHJldHVybiBsKHAsIHRoaXMuX2V2ZW50cywgdCwgdm9pZCAwLCBpKSwgdGhpcyB9OyB2YXIgcCA9IGZ1bmN0aW9uICh0LCBlLCBpLCBuKSB7IGlmICh0KSB7IHZhciBzID0gdFtlXSwgciA9IHQuYWxsOyBzICYmIHIgJiYgKHIgPSByLnNsaWNlKCkpLCBzICYmIGcocywgbiksIHIgJiYgZyhyLCBbZV0uY29uY2F0KG4pKTsgfSByZXR1cm4gdCB9LCBnID0gZnVuY3Rpb24gKHQsIGUpIHsgdmFyIGksIG4gPSAtMSwgcyA9IHQubGVuZ3RoLCByID0gZVswXSwgbyA9IGVbMV0sIGEgPSBlWzJdOyBzd2l0Y2ggKGUubGVuZ3RoKSB7IGNhc2UgMDogZm9yICg7ICsrbiA8IHM7KShpID0gdFtuXSkuY2FsbGJhY2suY2FsbChpLmN0eCk7IHJldHVybjsgY2FzZSAxOiBmb3IgKDsgKytuIDwgczspKGkgPSB0W25dKS5jYWxsYmFjay5jYWxsKGkuY3R4LCByKTsgcmV0dXJuOyBjYXNlIDI6IGZvciAoOyArK24gPCBzOykoaSA9IHRbbl0pLmNhbGxiYWNrLmNhbGwoaS5jdHgsIHIsIG8pOyByZXR1cm47IGNhc2UgMzogZm9yICg7ICsrbiA8IHM7KShpID0gdFtuXSkuY2FsbGJhY2suY2FsbChpLmN0eCwgciwgbywgYSk7IHJldHVybjsgZGVmYXVsdDogZm9yICg7ICsrbiA8IHM7KShpID0gdFtuXSkuY2FsbGJhY2suYXBwbHkoaS5jdHgsIGUpOyByZXR1cm4gfSB9LCB2ID0gZnVuY3Rpb24gKHQsIGUpIHsgdGhpcy5pZCA9IHQuX2xpc3RlbklkLCB0aGlzLmxpc3RlbmVyID0gdCwgdGhpcy5vYmogPSBlLCB0aGlzLmludGVyb3AgPSAhMCwgdGhpcy5jb3VudCA9IDAsIHRoaXMuX2V2ZW50cyA9IHZvaWQgMDsgfTsgdi5wcm90b3R5cGUub24gPSBhLm9uLCB2LnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAodCwgZSkgeyB2YXIgaTsgdGhpcy5pbnRlcm9wID8gKHRoaXMuX2V2ZW50cyA9IGwoZCwgdGhpcy5fZXZlbnRzLCB0LCBlLCB7IGNvbnRleHQ6IHZvaWQgMCwgbGlzdGVuZXJzOiB2b2lkIDAgfSksIGkgPSAhdGhpcy5fZXZlbnRzKSA6ICh0aGlzLmNvdW50LS0sIGkgPSAwID09PSB0aGlzLmNvdW50KSwgaSAmJiB0aGlzLmNsZWFudXAoKTsgfSwgdi5wcm90b3R5cGUuY2xlYW51cCA9IGZ1bmN0aW9uICgpIHsgZGVsZXRlIHRoaXMubGlzdGVuZXIuX2xpc3RlbmluZ1RvW3RoaXMub2JqLl9saXN0ZW5JZF0sIHRoaXMuaW50ZXJvcCB8fCBkZWxldGUgdGhpcy5vYmouX2xpc3RlbmVyc1t0aGlzLmlkXTsgfSwgYS5iaW5kID0gYS5vbiwgYS51bmJpbmQgPSBhLm9mZiwgaS5leHRlbmQoZSwgYSk7IHZhciBtID0gZS5Nb2RlbCA9IGZ1bmN0aW9uICh0LCBlKSB7IHZhciBuID0gdCB8fCB7fTsgZSB8fCAoZSA9IHt9KSwgdGhpcy5wcmVpbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuY2lkID0gaS51bmlxdWVJZCh0aGlzLmNpZFByZWZpeCksIHRoaXMuYXR0cmlidXRlcyA9IHt9LCBlLmNvbGxlY3Rpb24gJiYgKHRoaXMuY29sbGVjdGlvbiA9IGUuY29sbGVjdGlvbiksIGUucGFyc2UgJiYgKG4gPSB0aGlzLnBhcnNlKG4sIGUpIHx8IHt9KTsgdmFyIHMgPSBpLnJlc3VsdCh0aGlzLCAiZGVmYXVsdHMiKTsgbiA9IGkuZGVmYXVsdHMoaS5leHRlbmQoe30sIHMsIG4pLCBzKSwgdGhpcy5zZXQobiwgZSksIHRoaXMuY2hhbmdlZCA9IHt9LCB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfTsgaS5leHRlbmQobS5wcm90b3R5cGUsIGEsIHsgY2hhbmdlZDogbnVsbCwgdmFsaWRhdGlvbkVycm9yOiBudWxsLCBpZEF0dHJpYnV0ZTogImlkIiwgY2lkUHJlZml4OiAiYyIsIHByZWluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsgfSwgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgeyB9LCB0b0pTT046IGZ1bmN0aW9uICh0KSB7IHJldHVybiBpLmNsb25lKHRoaXMuYXR0cmlidXRlcykgfSwgc3luYzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfSwgZ2V0OiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW3RdIH0sIGVzY2FwZTogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGkuZXNjYXBlKHRoaXMuZ2V0KHQpKSB9LCBoYXM6IGZ1bmN0aW9uICh0KSB7IHJldHVybiBudWxsICE9IHRoaXMuZ2V0KHQpIH0sIG1hdGNoZXM6IGZ1bmN0aW9uICh0KSB7IHJldHVybiAhIWkuaXRlcmF0ZWUodCwgdGhpcykodGhpcy5hdHRyaWJ1dGVzKSB9LCBzZXQ6IGZ1bmN0aW9uICh0LCBlLCBuKSB7IGlmIChudWxsID09IHQpIHJldHVybiB0aGlzOyB2YXIgczsgaWYgKCJvYmplY3QiID09IHR5cGVvZiB0ID8gKHMgPSB0LCBuID0gZSkgOiAocyA9IHt9KVt0XSA9IGUsIG4gfHwgKG4gPSB7fSksICF0aGlzLl92YWxpZGF0ZShzLCBuKSkgcmV0dXJuICExOyB2YXIgciA9IG4udW5zZXQsIG8gPSBuLnNpbGVudCwgYSA9IFtdLCBoID0gdGhpcy5fY2hhbmdpbmc7IHRoaXMuX2NoYW5naW5nID0gITAsIGggfHwgKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA9IGkuY2xvbmUodGhpcy5hdHRyaWJ1dGVzKSwgdGhpcy5jaGFuZ2VkID0ge30pOyB2YXIgbCA9IHRoaXMuYXR0cmlidXRlcywgdSA9IHRoaXMuY2hhbmdlZCwgYyA9IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlczsgZm9yICh2YXIgZCBpbiBzKSBlID0gc1tkXSwgaS5pc0VxdWFsKGxbZF0sIGUpIHx8IGEucHVzaChkKSwgaS5pc0VxdWFsKGNbZF0sIGUpID8gZGVsZXRlIHVbZF0gOiB1W2RdID0gZSwgciA/IGRlbGV0ZSBsW2RdIDogbFtkXSA9IGU7IGlmICh0aGlzLmlkQXR0cmlidXRlIGluIHMgJiYgKHRoaXMuaWQgPSB0aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKSksICFvKSB7IGEubGVuZ3RoICYmICh0aGlzLl9wZW5kaW5nID0gbik7IGZvciAodmFyIGYgPSAwOyBmIDwgYS5sZW5ndGg7IGYrKyl0aGlzLnRyaWdnZXIoImNoYW5nZToiICsgYVtmXSwgdGhpcywgbFthW2ZdXSwgbik7IH0gaWYgKGgpIHJldHVybiB0aGlzOyBpZiAoIW8pIGZvciAoOyB0aGlzLl9wZW5kaW5nOyluID0gdGhpcy5fcGVuZGluZywgdGhpcy5fcGVuZGluZyA9ICExLCB0aGlzLnRyaWdnZXIoImNoYW5nZSIsIHRoaXMsIG4pOyByZXR1cm4gdGhpcy5fcGVuZGluZyA9ICExLCB0aGlzLl9jaGFuZ2luZyA9ICExLCB0aGlzIH0sIHVuc2V0OiBmdW5jdGlvbiAodCwgZSkgeyByZXR1cm4gdGhpcy5zZXQodCwgdm9pZCAwLCBpLmV4dGVuZCh7fSwgZSwgeyB1bnNldDogITAgfSkpIH0sIGNsZWFyOiBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHt9OyBmb3IgKHZhciBuIGluIHRoaXMuYXR0cmlidXRlcykgZVtuXSA9IHZvaWQgMDsgcmV0dXJuIHRoaXMuc2V0KGUsIGkuZXh0ZW5kKHt9LCB0LCB7IHVuc2V0OiAhMCB9KSkgfSwgaGFzQ2hhbmdlZDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG51bGwgPT0gdCA/ICFpLmlzRW1wdHkodGhpcy5jaGFuZ2VkKSA6IGkuaGFzKHRoaXMuY2hhbmdlZCwgdCkgfSwgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uICh0KSB7IGlmICghdCkgcmV0dXJuICEhdGhpcy5oYXNDaGFuZ2VkKCkgJiYgaS5jbG9uZSh0aGlzLmNoYW5nZWQpOyB2YXIgZSwgbiA9IHRoaXMuX2NoYW5naW5nID8gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzIDogdGhpcy5hdHRyaWJ1dGVzLCBzID0ge307IGZvciAodmFyIHIgaW4gdCkgeyB2YXIgbyA9IHRbcl07IGkuaXNFcXVhbChuW3JdLCBvKSB8fCAoc1tyXSA9IG8sIGUgPSAhMCk7IH0gcmV0dXJuICEhZSAmJiBzIH0sIHByZXZpb3VzOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gbnVsbCAhPSB0ICYmIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA/IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlc1t0XSA6IG51bGwgfSwgcHJldmlvdXNBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBpLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcykgfSwgZmV0Y2g6IGZ1bmN0aW9uICh0KSB7IHQgPSBpLmV4dGVuZCh7IHBhcnNlOiAhMCB9LCB0KTsgdmFyIGUgPSB0aGlzLCBuID0gdC5zdWNjZXNzOyByZXR1cm4gdC5zdWNjZXNzID0gZnVuY3Rpb24gKGkpIHsgdmFyIHMgPSB0LnBhcnNlID8gZS5wYXJzZShpLCB0KSA6IGk7IGlmICghZS5zZXQocywgdCkpIHJldHVybiAhMTsgbiAmJiBuLmNhbGwodC5jb250ZXh0LCBlLCBpLCB0KSwgZS50cmlnZ2VyKCJzeW5jIiwgZSwgaSwgdCk7IH0sIEcodGhpcywgdCksIHRoaXMuc3luYygicmVhZCIsIHRoaXMsIHQpIH0sIHNhdmU6IGZ1bmN0aW9uICh0LCBlLCBuKSB7IHZhciBzOyBudWxsID09IHQgfHwgIm9iamVjdCIgPT0gdHlwZW9mIHQgPyAocyA9IHQsIG4gPSBlKSA6IChzID0ge30pW3RdID0gZTsgdmFyIHIgPSAobiA9IGkuZXh0ZW5kKHsgdmFsaWRhdGU6ICEwLCBwYXJzZTogITAgfSwgbikpLndhaXQ7IGlmIChzICYmICFyKSB7IGlmICghdGhpcy5zZXQocywgbikpIHJldHVybiAhMSB9IGVsc2UgaWYgKCF0aGlzLl92YWxpZGF0ZShzLCBuKSkgcmV0dXJuICExOyB2YXIgbyA9IHRoaXMsIGEgPSBuLnN1Y2Nlc3MsIGggPSB0aGlzLmF0dHJpYnV0ZXM7IG4uc3VjY2VzcyA9IGZ1bmN0aW9uICh0KSB7IG8uYXR0cmlidXRlcyA9IGg7IHZhciBlID0gbi5wYXJzZSA/IG8ucGFyc2UodCwgbikgOiB0OyBpZiAociAmJiAoZSA9IGkuZXh0ZW5kKHt9LCBzLCBlKSksIGUgJiYgIW8uc2V0KGUsIG4pKSByZXR1cm4gITE7IGEgJiYgYS5jYWxsKG4uY29udGV4dCwgbywgdCwgbiksIG8udHJpZ2dlcigic3luYyIsIG8sIHQsIG4pOyB9LCBHKHRoaXMsIG4pLCBzICYmIHIgJiYgKHRoaXMuYXR0cmlidXRlcyA9IGkuZXh0ZW5kKHt9LCBoLCBzKSk7IHZhciBsID0gdGhpcy5pc05ldygpID8gImNyZWF0ZSIgOiBuLnBhdGNoID8gInBhdGNoIiA6ICJ1cGRhdGUiOyAicGF0Y2giICE9PSBsIHx8IG4uYXR0cnMgfHwgKG4uYXR0cnMgPSBzKTsgdmFyIHUgPSB0aGlzLnN5bmMobCwgdGhpcywgbik7IHJldHVybiB0aGlzLmF0dHJpYnV0ZXMgPSBoLCB1IH0sIGRlc3Ryb3k6IGZ1bmN0aW9uICh0KSB7IHQgPSB0ID8gaS5jbG9uZSh0KSA6IHt9OyB2YXIgZSA9IHRoaXMsIG4gPSB0LnN1Y2Nlc3MsIHMgPSB0LndhaXQsIHIgPSBmdW5jdGlvbiAoKSB7IGUuc3RvcExpc3RlbmluZygpLCBlLnRyaWdnZXIoImRlc3Ryb3kiLCBlLCBlLmNvbGxlY3Rpb24sIHQpOyB9OyB0LnN1Y2Nlc3MgPSBmdW5jdGlvbiAoaSkgeyBzICYmIHIoKSwgbiAmJiBuLmNhbGwodC5jb250ZXh0LCBlLCBpLCB0KSwgZS5pc05ldygpIHx8IGUudHJpZ2dlcigic3luYyIsIGUsIGksIHQpOyB9OyB2YXIgbyA9ICExOyByZXR1cm4gdGhpcy5pc05ldygpID8gaS5kZWZlcih0LnN1Y2Nlc3MpIDogKEcodGhpcywgdCksIG8gPSB0aGlzLnN5bmMoImRlbGV0ZSIsIHRoaXMsIHQpKSwgcyB8fCByKCksIG8gfSwgdXJsOiBmdW5jdGlvbiAoKSB7IHZhciB0ID0gaS5yZXN1bHQodGhpcywgInVybFJvb3QiKSB8fCBpLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sICJ1cmwiKSB8fCBXKCk7IGlmICh0aGlzLmlzTmV3KCkpIHJldHVybiB0OyB2YXIgZSA9IHRoaXMuZ2V0KHRoaXMuaWRBdHRyaWJ1dGUpOyByZXR1cm4gdC5yZXBsYWNlKC9bXlwvXSQvLCAiJCYvIikgKyBlbmNvZGVVUklDb21wb25lbnQoZSkgfSwgcGFyc2U6IGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiB0IH0sIGNsb25lOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmF0dHJpYnV0ZXMpIH0sIGlzTmV3OiBmdW5jdGlvbiAoKSB7IHJldHVybiAhdGhpcy5oYXModGhpcy5pZEF0dHJpYnV0ZSkgfSwgaXNWYWxpZDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHRoaXMuX3ZhbGlkYXRlKHt9LCBpLmV4dGVuZCh7fSwgdCwgeyB2YWxpZGF0ZTogITAgfSkpIH0sIF92YWxpZGF0ZTogZnVuY3Rpb24gKHQsIGUpIHsgaWYgKCFlLnZhbGlkYXRlIHx8ICF0aGlzLnZhbGlkYXRlKSByZXR1cm4gITA7IHQgPSBpLmV4dGVuZCh7fSwgdGhpcy5hdHRyaWJ1dGVzLCB0KTsgdmFyIG4gPSB0aGlzLnZhbGlkYXRpb25FcnJvciA9IHRoaXMudmFsaWRhdGUodCwgZSkgfHwgbnVsbDsgcmV0dXJuICFuIHx8ICh0aGlzLnRyaWdnZXIoImludmFsaWQiLCB0aGlzLCBuLCBpLmV4dGVuZChlLCB7IHZhbGlkYXRpb25FcnJvcjogbiB9KSksICExKSB9IH0pOyB2YXIgXyA9IGUuQ29sbGVjdGlvbiA9IGZ1bmN0aW9uICh0LCBlKSB7IGUgfHwgKGUgPSB7fSksIHRoaXMucHJlaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBlLm1vZGVsICYmICh0aGlzLm1vZGVsID0gZS5tb2RlbCksIHZvaWQgMCAhPT0gZS5jb21wYXJhdG9yICYmICh0aGlzLmNvbXBhcmF0b3IgPSBlLmNvbXBhcmF0b3IpLCB0aGlzLl9yZXNldCgpLCB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdCAmJiB0aGlzLnJlc2V0KHQsIGkuZXh0ZW5kKHsgc2lsZW50OiAhMCB9LCBlKSk7IH0sIHkgPSB7IGFkZDogITAsIHJlbW92ZTogITAsIG1lcmdlOiAhMCB9LCBiID0geyBhZGQ6ICEwLCByZW1vdmU6ICExIH0sIHggPSBmdW5jdGlvbiAodCwgZSwgaSkgeyBpID0gTWF0aC5taW4oTWF0aC5tYXgoaSwgMCksIHQubGVuZ3RoKTsgdmFyIG4sIHMgPSBBcnJheSh0Lmxlbmd0aCAtIGkpLCByID0gZS5sZW5ndGg7IGZvciAobiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKXNbbl0gPSB0W24gKyBpXTsgZm9yIChuID0gMDsgbiA8IHI7IG4rKyl0W24gKyBpXSA9IGVbbl07IGZvciAobiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKXRbbiArIHIgKyBpXSA9IHNbbl07IH07IGkuZXh0ZW5kKF8ucHJvdG90eXBlLCBhLCB7IG1vZGVsOiBtLCBwcmVpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7IH0sIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsgfSwgdG9KU09OOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdGhpcy5tYXAoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLnRvSlNPTih0KSB9KSkgfSwgc3luYzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfSwgYWRkOiBmdW5jdGlvbiAodCwgZSkgeyByZXR1cm4gdGhpcy5zZXQodCwgaS5leHRlbmQoeyBtZXJnZTogITEgfSwgZSwgYikpIH0sIHJlbW92ZTogZnVuY3Rpb24gKHQsIGUpIHsgZSA9IGkuZXh0ZW5kKHt9LCBlKTsgdmFyIG4gPSAhaS5pc0FycmF5KHQpOyB0ID0gbiA/IFt0XSA6IHQuc2xpY2UoKTsgdmFyIHMgPSB0aGlzLl9yZW1vdmVNb2RlbHModCwgZSk7IHJldHVybiAhZS5zaWxlbnQgJiYgcy5sZW5ndGggJiYgKGUuY2hhbmdlcyA9IHsgYWRkZWQ6IFtdLCBtZXJnZWQ6IFtdLCByZW1vdmVkOiBzIH0sIHRoaXMudHJpZ2dlcigidXBkYXRlIiwgdGhpcywgZSkpLCBuID8gc1swXSA6IHMgfSwgc2V0OiBmdW5jdGlvbiAodCwgZSkgeyBpZiAobnVsbCAhPSB0KSB7IChlID0gaS5leHRlbmQoe30sIHksIGUpKS5wYXJzZSAmJiAhdGhpcy5faXNNb2RlbCh0KSAmJiAodCA9IHRoaXMucGFyc2UodCwgZSkgfHwgW10pOyB2YXIgbiA9ICFpLmlzQXJyYXkodCk7IHQgPSBuID8gW3RdIDogdC5zbGljZSgpOyB2YXIgcyA9IGUuYXQ7IG51bGwgIT0gcyAmJiAocyA9ICtzKSwgcyA+IHRoaXMubGVuZ3RoICYmIChzID0gdGhpcy5sZW5ndGgpLCBzIDwgMCAmJiAocyArPSB0aGlzLmxlbmd0aCArIDEpOyB2YXIgciwgbywgYSA9IFtdLCBoID0gW10sIGwgPSBbXSwgdSA9IFtdLCBjID0ge30sIGQgPSBlLmFkZCwgZiA9IGUubWVyZ2UsIHAgPSBlLnJlbW92ZSwgZyA9ICExLCB2ID0gdGhpcy5jb21wYXJhdG9yICYmIG51bGwgPT0gcyAmJiAhMSAhPT0gZS5zb3J0LCBtID0gaS5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpID8gdGhpcy5jb21wYXJhdG9yIDogbnVsbDsgZm9yIChvID0gMDsgbyA8IHQubGVuZ3RoOyBvKyspIHsgciA9IHRbb107IHZhciBfID0gdGhpcy5nZXQocik7IGlmIChfKSB7IGlmIChmICYmIHIgIT09IF8pIHsgdmFyIGIgPSB0aGlzLl9pc01vZGVsKHIpID8gci5hdHRyaWJ1dGVzIDogcjsgZS5wYXJzZSAmJiAoYiA9IF8ucGFyc2UoYiwgZSkpLCBfLnNldChiLCBlKSwgbC5wdXNoKF8pLCB2ICYmICFnICYmIChnID0gXy5oYXNDaGFuZ2VkKG0pKTsgfSBjW18uY2lkXSB8fCAoY1tfLmNpZF0gPSAhMCwgYS5wdXNoKF8pKSwgdFtvXSA9IF87IH0gZWxzZSBkICYmIChyID0gdFtvXSA9IHRoaXMuX3ByZXBhcmVNb2RlbChyLCBlKSkgJiYgKGgucHVzaChyKSwgdGhpcy5fYWRkUmVmZXJlbmNlKHIsIGUpLCBjW3IuY2lkXSA9ICEwLCBhLnB1c2gocikpOyB9IGlmIChwKSB7IGZvciAobyA9IDA7IG8gPCB0aGlzLmxlbmd0aDsgbysrKWNbKHIgPSB0aGlzLm1vZGVsc1tvXSkuY2lkXSB8fCB1LnB1c2gocik7IHUubGVuZ3RoICYmIHRoaXMuX3JlbW92ZU1vZGVscyh1LCBlKTsgfSB2YXIgdyA9ICExLCBFID0gIXYgJiYgZCAmJiBwOyBpZiAoYS5sZW5ndGggJiYgRSA/ICh3ID0gdGhpcy5sZW5ndGggIT09IGEubGVuZ3RoIHx8IGkuc29tZSh0aGlzLm1vZGVscywgKGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiB0ICE9PSBhW2VdIH0pKSwgdGhpcy5tb2RlbHMubGVuZ3RoID0gMCwgeCh0aGlzLm1vZGVscywgYSwgMCksIHRoaXMubGVuZ3RoID0gdGhpcy5tb2RlbHMubGVuZ3RoKSA6IGgubGVuZ3RoICYmICh2ICYmIChnID0gITApLCB4KHRoaXMubW9kZWxzLCBoLCBudWxsID09IHMgPyB0aGlzLmxlbmd0aCA6IHMpLCB0aGlzLmxlbmd0aCA9IHRoaXMubW9kZWxzLmxlbmd0aCksIGcgJiYgdGhpcy5zb3J0KHsgc2lsZW50OiAhMCB9KSwgIWUuc2lsZW50KSB7IGZvciAobyA9IDA7IG8gPCBoLmxlbmd0aDsgbysrKW51bGwgIT0gcyAmJiAoZS5pbmRleCA9IHMgKyBvKSwgKHIgPSBoW29dKS50cmlnZ2VyKCJhZGQiLCByLCB0aGlzLCBlKTsgKGcgfHwgdykgJiYgdGhpcy50cmlnZ2VyKCJzb3J0IiwgdGhpcywgZSksIChoLmxlbmd0aCB8fCB1Lmxlbmd0aCB8fCBsLmxlbmd0aCkgJiYgKGUuY2hhbmdlcyA9IHsgYWRkZWQ6IGgsIHJlbW92ZWQ6IHUsIG1lcmdlZDogbCB9LCB0aGlzLnRyaWdnZXIoInVwZGF0ZSIsIHRoaXMsIGUpKTsgfSByZXR1cm4gbiA/IHRbMF0gOiB0IH0gfSwgcmVzZXQ6IGZ1bmN0aW9uICh0LCBlKSB7IGUgPSBlID8gaS5jbG9uZShlKSA6IHt9OyBmb3IgKHZhciBuID0gMDsgbiA8IHRoaXMubW9kZWxzLmxlbmd0aDsgbisrKXRoaXMuX3JlbW92ZVJlZmVyZW5jZSh0aGlzLm1vZGVsc1tuXSwgZSk7IHJldHVybiBlLnByZXZpb3VzTW9kZWxzID0gdGhpcy5tb2RlbHMsIHRoaXMuX3Jlc2V0KCksIHQgPSB0aGlzLmFkZCh0LCBpLmV4dGVuZCh7IHNpbGVudDogITAgfSwgZSkpLCBlLnNpbGVudCB8fCB0aGlzLnRyaWdnZXIoInJlc2V0IiwgdGhpcywgZSksIHQgfSwgcHVzaDogZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIHRoaXMuYWRkKHQsIGkuZXh0ZW5kKHsgYXQ6IHRoaXMubGVuZ3RoIH0sIGUpKSB9LCBwb3A6IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdGhpcy5hdCh0aGlzLmxlbmd0aCAtIDEpOyByZXR1cm4gdGhpcy5yZW1vdmUoZSwgdCkgfSwgdW5zaGlmdDogZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIHRoaXMuYWRkKHQsIGkuZXh0ZW5kKHsgYXQ6IDAgfSwgZSkpIH0sIHNoaWZ0OiBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHRoaXMuYXQoMCk7IHJldHVybiB0aGlzLnJlbW92ZShlLCB0KSB9LCBzbGljZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gci5hcHBseSh0aGlzLm1vZGVscywgYXJndW1lbnRzKSB9LCBnZXQ6IGZ1bmN0aW9uICh0KSB7IGlmIChudWxsICE9IHQpIHJldHVybiB0aGlzLl9ieUlkW3RdIHx8IHRoaXMuX2J5SWRbdGhpcy5tb2RlbElkKHRoaXMuX2lzTW9kZWwodCkgPyB0LmF0dHJpYnV0ZXMgOiB0KV0gfHwgdC5jaWQgJiYgdGhpcy5fYnlJZFt0LmNpZF0gfSwgaGFzOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gbnVsbCAhPSB0aGlzLmdldCh0KSB9LCBhdDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgPCAwICYmICh0ICs9IHRoaXMubGVuZ3RoKSwgdGhpcy5tb2RlbHNbdF0gfSwgd2hlcmU6IGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiB0aGlzW2UgPyAiZmluZCIgOiAiZmlsdGVyIl0odCkgfSwgZmluZFdoZXJlOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdGhpcy53aGVyZSh0LCAhMCkgfSwgc29ydDogZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSB0aGlzLmNvbXBhcmF0b3I7IGlmICghZSkgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvciIpOyB0IHx8ICh0ID0ge30pOyB2YXIgbiA9IGUubGVuZ3RoOyByZXR1cm4gaS5pc0Z1bmN0aW9uKGUpICYmIChlID0gZS5iaW5kKHRoaXMpKSwgMSA9PT0gbiB8fCBpLmlzU3RyaW5nKGUpID8gdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeShlKSA6IHRoaXMubW9kZWxzLnNvcnQoZSksIHQuc2lsZW50IHx8IHRoaXMudHJpZ2dlcigic29ydCIsIHRoaXMsIHQpLCB0aGlzIH0sIHBsdWNrOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdGhpcy5tYXAodCArICIiKSB9LCBmZXRjaDogZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSAodCA9IGkuZXh0ZW5kKHsgcGFyc2U6ICEwIH0sIHQpKS5zdWNjZXNzLCBuID0gdGhpczsgcmV0dXJuIHQuc3VjY2VzcyA9IGZ1bmN0aW9uIChpKSB7IHZhciBzID0gdC5yZXNldCA/ICJyZXNldCIgOiAic2V0IjsgbltzXShpLCB0KSwgZSAmJiBlLmNhbGwodC5jb250ZXh0LCBuLCBpLCB0KSwgbi50cmlnZ2VyKCJzeW5jIiwgbiwgaSwgdCk7IH0sIEcodGhpcywgdCksIHRoaXMuc3luYygicmVhZCIsIHRoaXMsIHQpIH0sIGNyZWF0ZTogZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSAoZSA9IGUgPyBpLmNsb25lKGUpIDoge30pLndhaXQ7IGlmICghKHQgPSB0aGlzLl9wcmVwYXJlTW9kZWwodCwgZSkpKSByZXR1cm4gITE7IG4gfHwgdGhpcy5hZGQodCwgZSk7IHZhciBzID0gdGhpcywgciA9IGUuc3VjY2VzczsgcmV0dXJuIGUuc3VjY2VzcyA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7IG4gJiYgcy5hZGQodCwgaSksIHIgJiYgci5jYWxsKGkuY29udGV4dCwgdCwgZSwgaSk7IH0sIHQuc2F2ZShudWxsLCBlKSwgdCB9LCBwYXJzZTogZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIHQgfSwgY2xvbmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMubW9kZWxzLCB7IG1vZGVsOiB0aGlzLm1vZGVsLCBjb21wYXJhdG9yOiB0aGlzLmNvbXBhcmF0b3IgfSkgfSwgbW9kZWxJZDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHRbdGhpcy5tb2RlbC5wcm90b3R5cGUuaWRBdHRyaWJ1dGUgfHwgImlkIl0gfSwgdmFsdWVzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgRSh0aGlzLCBJKSB9LCBrZXlzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgRSh0aGlzLCBTKSB9LCBlbnRyaWVzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgRSh0aGlzLCBrKSB9LCBfcmVzZXQ6IGZ1bmN0aW9uICgpIHsgdGhpcy5sZW5ndGggPSAwLCB0aGlzLm1vZGVscyA9IFtdLCB0aGlzLl9ieUlkID0ge307IH0sIF9wcmVwYXJlTW9kZWw6IGZ1bmN0aW9uICh0LCBlKSB7IGlmICh0aGlzLl9pc01vZGVsKHQpKSByZXR1cm4gdC5jb2xsZWN0aW9uIHx8ICh0LmNvbGxlY3Rpb24gPSB0aGlzKSwgdDsgKGUgPSBlID8gaS5jbG9uZShlKSA6IHt9KS5jb2xsZWN0aW9uID0gdGhpczsgdmFyIG4gPSBuZXcgdGhpcy5tb2RlbCh0LCBlKTsgcmV0dXJuIG4udmFsaWRhdGlvbkVycm9yID8gKHRoaXMudHJpZ2dlcigiaW52YWxpZCIsIHRoaXMsIG4udmFsaWRhdGlvbkVycm9yLCBlKSwgITEpIDogbiB9LCBfcmVtb3ZlTW9kZWxzOiBmdW5jdGlvbiAodCwgZSkgeyBmb3IgKHZhciBpID0gW10sIG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgeyB2YXIgcyA9IHRoaXMuZ2V0KHRbbl0pOyBpZiAocykgeyB2YXIgciA9IHRoaXMuaW5kZXhPZihzKTsgdGhpcy5tb2RlbHMuc3BsaWNlKHIsIDEpLCB0aGlzLmxlbmd0aC0tLCBkZWxldGUgdGhpcy5fYnlJZFtzLmNpZF07IHZhciBvID0gdGhpcy5tb2RlbElkKHMuYXR0cmlidXRlcyk7IG51bGwgIT0gbyAmJiBkZWxldGUgdGhpcy5fYnlJZFtvXSwgZS5zaWxlbnQgfHwgKGUuaW5kZXggPSByLCBzLnRyaWdnZXIoInJlbW92ZSIsIHMsIHRoaXMsIGUpKSwgaS5wdXNoKHMpLCB0aGlzLl9yZW1vdmVSZWZlcmVuY2UocywgZSk7IH0gfSByZXR1cm4gaSB9LCBfaXNNb2RlbDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgaW5zdGFuY2VvZiBtIH0sIF9hZGRSZWZlcmVuY2U6IGZ1bmN0aW9uICh0LCBlKSB7IHRoaXMuX2J5SWRbdC5jaWRdID0gdDsgdmFyIGkgPSB0aGlzLm1vZGVsSWQodC5hdHRyaWJ1dGVzKTsgbnVsbCAhPSBpICYmICh0aGlzLl9ieUlkW2ldID0gdCksIHQub24oImFsbCIsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7IH0sIF9yZW1vdmVSZWZlcmVuY2U6IGZ1bmN0aW9uICh0LCBlKSB7IGRlbGV0ZSB0aGlzLl9ieUlkW3QuY2lkXTsgdmFyIGkgPSB0aGlzLm1vZGVsSWQodC5hdHRyaWJ1dGVzKTsgbnVsbCAhPSBpICYmIGRlbGV0ZSB0aGlzLl9ieUlkW2ldLCB0aGlzID09PSB0LmNvbGxlY3Rpb24gJiYgZGVsZXRlIHQuY29sbGVjdGlvbiwgdC5vZmYoImFsbCIsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7IH0sIF9vbk1vZGVsRXZlbnQ6IGZ1bmN0aW9uICh0LCBlLCBpLCBuKSB7IGlmIChlKSB7IGlmICgoImFkZCIgPT09IHQgfHwgInJlbW92ZSIgPT09IHQpICYmIGkgIT09IHRoaXMpIHJldHVybjsgaWYgKCJkZXN0cm95IiA9PT0gdCAmJiB0aGlzLnJlbW92ZShlLCBuKSwgImNoYW5nZSIgPT09IHQpIHsgdmFyIHMgPSB0aGlzLm1vZGVsSWQoZS5wcmV2aW91c0F0dHJpYnV0ZXMoKSksIHIgPSB0aGlzLm1vZGVsSWQoZS5hdHRyaWJ1dGVzKTsgcyAhPT0gciAmJiAobnVsbCAhPSBzICYmIGRlbGV0ZSB0aGlzLl9ieUlkW3NdLCBudWxsICE9IHIgJiYgKHRoaXMuX2J5SWRbcl0gPSBlKSk7IH0gfSB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSB9KTsgdmFyIHcgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLml0ZXJhdG9yOyB3ICYmIChfLnByb3RvdHlwZVt3XSA9IF8ucHJvdG90eXBlLnZhbHVlcyk7IHZhciBFID0gZnVuY3Rpb24gKHQsIGUpIHsgdGhpcy5fY29sbGVjdGlvbiA9IHQsIHRoaXMuX2tpbmQgPSBlLCB0aGlzLl9pbmRleCA9IDA7IH0sIEkgPSAxLCBTID0gMiwgayA9IDM7IHcgJiYgKEUucHJvdG90eXBlW3ddID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcyB9KSwgRS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHsgaWYgKHRoaXMuX2NvbGxlY3Rpb24pIHsgaWYgKHRoaXMuX2luZGV4IDwgdGhpcy5fY29sbGVjdGlvbi5sZW5ndGgpIHsgdmFyIHQsIGUgPSB0aGlzLl9jb2xsZWN0aW9uLmF0KHRoaXMuX2luZGV4KTsgaWYgKHRoaXMuX2luZGV4KyssIHRoaXMuX2tpbmQgPT09IEkpIHQgPSBlOyBlbHNlIHsgdmFyIGkgPSB0aGlzLl9jb2xsZWN0aW9uLm1vZGVsSWQoZS5hdHRyaWJ1dGVzKTsgdCA9IHRoaXMuX2tpbmQgPT09IFMgPyBpIDogW2ksIGVdOyB9IHJldHVybiB7IHZhbHVlOiB0LCBkb25lOiAhMSB9IH0gdGhpcy5fY29sbGVjdGlvbiA9IHZvaWQgMDsgfSByZXR1cm4geyB2YWx1ZTogdm9pZCAwLCBkb25lOiAhMCB9IH07IHZhciBUID0gZS5WaWV3ID0gZnVuY3Rpb24gKHQpIHsgdGhpcy5jaWQgPSBpLnVuaXF1ZUlkKCJ2aWV3IiksIHRoaXMucHJlaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBpLmV4dGVuZCh0aGlzLCBpLnBpY2sodCwgQSkpLCB0aGlzLl9lbnN1cmVFbGVtZW50KCksIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9LCBQID0gL14oXFMrKVxzKiguKikkLywgQSA9IFsibW9kZWwiLCAiY29sbGVjdGlvbiIsICJlbCIsICJpZCIsICJhdHRyaWJ1dGVzIiwgImNsYXNzTmFtZSIsICJ0YWdOYW1lIiwgImV2ZW50cyJdOyBpLmV4dGVuZChULnByb3RvdHlwZSwgYSwgeyB0YWdOYW1lOiAiZGl2IiwgJDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHRoaXMuJGVsLmZpbmQodCkgfSwgcHJlaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgeyB9LCBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7IH0sIHJlbmRlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcyB9LCByZW1vdmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX3JlbW92ZUVsZW1lbnQoKSwgdGhpcy5zdG9wTGlzdGVuaW5nKCksIHRoaXMgfSwgX3JlbW92ZUVsZW1lbnQ6IGZ1bmN0aW9uICgpIHsgdGhpcy4kZWwucmVtb3ZlKCk7IH0sIHNldEVsZW1lbnQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKSwgdGhpcy5fc2V0RWxlbWVudCh0KSwgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpLCB0aGlzIH0sIF9zZXRFbGVtZW50OiBmdW5jdGlvbiAodCkgeyB0aGlzLiRlbCA9IHQgaW5zdGFuY2VvZiBlLiQgPyB0IDogZS4kKHQpLCB0aGlzLmVsID0gdGhpcy4kZWxbMF07IH0sIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbiAodCkgeyBpZiAodCB8fCAodCA9IGkucmVzdWx0KHRoaXMsICJldmVudHMiKSksICF0KSByZXR1cm4gdGhpczsgZm9yICh2YXIgZSBpbiB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKSwgdCkgeyB2YXIgbiA9IHRbZV07IGlmIChpLmlzRnVuY3Rpb24obikgfHwgKG4gPSB0aGlzW25dKSwgbikgeyB2YXIgcyA9IGUubWF0Y2goUCk7IHRoaXMuZGVsZWdhdGUoc1sxXSwgc1syXSwgbi5iaW5kKHRoaXMpKTsgfSB9IHJldHVybiB0aGlzIH0sIGRlbGVnYXRlOiBmdW5jdGlvbiAodCwgZSwgaSkgeyByZXR1cm4gdGhpcy4kZWwub24odCArICIuZGVsZWdhdGVFdmVudHMiICsgdGhpcy5jaWQsIGUsIGkpLCB0aGlzIH0sIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuJGVsICYmIHRoaXMuJGVsLm9mZigiLmRlbGVnYXRlRXZlbnRzIiArIHRoaXMuY2lkKSwgdGhpcyB9LCB1bmRlbGVnYXRlOiBmdW5jdGlvbiAodCwgZSwgaSkgeyByZXR1cm4gdGhpcy4kZWwub2ZmKHQgKyAiLmRlbGVnYXRlRXZlbnRzIiArIHRoaXMuY2lkLCBlLCBpKSwgdGhpcyB9LCBfY3JlYXRlRWxlbWVudDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCkgfSwgX2Vuc3VyZUVsZW1lbnQ6IGZ1bmN0aW9uICgpIHsgaWYgKHRoaXMuZWwpIHRoaXMuc2V0RWxlbWVudChpLnJlc3VsdCh0aGlzLCAiZWwiKSk7IGVsc2UgeyB2YXIgdCA9IGkuZXh0ZW5kKHt9LCBpLnJlc3VsdCh0aGlzLCAiYXR0cmlidXRlcyIpKTsgdGhpcy5pZCAmJiAodC5pZCA9IGkucmVzdWx0KHRoaXMsICJpZCIpKSwgdGhpcy5jbGFzc05hbWUgJiYgKHQuY2xhc3MgPSBpLnJlc3VsdCh0aGlzLCAiY2xhc3NOYW1lIikpLCB0aGlzLnNldEVsZW1lbnQodGhpcy5fY3JlYXRlRWxlbWVudChpLnJlc3VsdCh0aGlzLCAidGFnTmFtZSIpKSksIHRoaXMuX3NldEF0dHJpYnV0ZXModCk7IH0gfSwgX3NldEF0dHJpYnV0ZXM6IGZ1bmN0aW9uICh0KSB7IHRoaXMuJGVsLmF0dHIodCk7IH0gfSk7IHZhciBIID0gZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsgc3dpdGNoIChlKSB7IGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRbaV0odGhpc1tuXSkgfTsgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRbaV0odGhpc1tuXSwgZSkgfTsgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24gKGUsIHMpIHsgcmV0dXJuIHRbaV0odGhpc1tuXSwgJChlLCB0aGlzKSwgcykgfTsgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24gKGUsIHMsIHIpIHsgcmV0dXJuIHRbaV0odGhpc1tuXSwgJChlLCB0aGlzKSwgcywgcikgfTsgZGVmYXVsdDogcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGUgPSByLmNhbGwoYXJndW1lbnRzKTsgcmV0dXJuIGUudW5zaGlmdCh0aGlzW25dKSwgdFtpXS5hcHBseSh0LCBlKSB9IH0gfSwgUiA9IGZ1bmN0aW9uICh0LCBlLCBuLCBzKSB7IGkuZWFjaChuLCAoZnVuY3Rpb24gKGksIG4pIHsgZVtuXSAmJiAodC5wcm90b3R5cGVbbl0gPSBIKGUsIGksIG4sIHMpKTsgfSkpOyB9LCAkID0gZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIGkuaXNGdW5jdGlvbih0KSA/IHQgOiBpLmlzT2JqZWN0KHQpICYmICFlLl9pc01vZGVsKHQpID8gQyh0KSA6IGkuaXNTdHJpbmcodCkgPyBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5nZXQodCkgfSA6IHQgfSwgQyA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gaS5tYXRjaGVzKHQpOyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGUodC5hdHRyaWJ1dGVzKSB9IH0sIE4gPSB7IGZvckVhY2g6IDMsIGVhY2g6IDMsIG1hcDogMywgY29sbGVjdDogMywgcmVkdWNlOiAwLCBmb2xkbDogMCwgaW5qZWN0OiAwLCByZWR1Y2VSaWdodDogMCwgZm9sZHI6IDAsIGZpbmQ6IDMsIGRldGVjdDogMywgZmlsdGVyOiAzLCBzZWxlY3Q6IDMsIHJlamVjdDogMywgZXZlcnk6IDMsIGFsbDogMywgc29tZTogMywgYW55OiAzLCBpbmNsdWRlOiAzLCBpbmNsdWRlczogMywgY29udGFpbnM6IDMsIGludm9rZTogMCwgbWF4OiAzLCBtaW46IDMsIHRvQXJyYXk6IDEsIHNpemU6IDEsIGZpcnN0OiAzLCBoZWFkOiAzLCB0YWtlOiAzLCBpbml0aWFsOiAzLCByZXN0OiAzLCB0YWlsOiAzLCBkcm9wOiAzLCBsYXN0OiAzLCB3aXRob3V0OiAwLCBkaWZmZXJlbmNlOiAwLCBpbmRleE9mOiAzLCBzaHVmZmxlOiAxLCBsYXN0SW5kZXhPZjogMywgaXNFbXB0eTogMSwgY2hhaW46IDEsIHNhbXBsZTogMywgcGFydGl0aW9uOiAzLCBncm91cEJ5OiAzLCBjb3VudEJ5OiAzLCBzb3J0Qnk6IDMsIGluZGV4Qnk6IDMsIGZpbmRJbmRleDogMywgZmluZExhc3RJbmRleDogMyB9LCBNID0geyBrZXlzOiAxLCB2YWx1ZXM6IDEsIHBhaXJzOiAxLCBpbnZlcnQ6IDEsIHBpY2s6IDAsIG9taXQ6IDAsIGNoYWluOiAxLCBpc0VtcHR5OiAxIH07IGkuZWFjaChbW18sIE4sICJtb2RlbHMiXSwgW20sIE0sICJhdHRyaWJ1dGVzIl1dLCAoZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSB0WzBdLCBuID0gdFsxXSwgcyA9IHRbMl07IGUubWl4aW4gPSBmdW5jdGlvbiAodCkgeyB2YXIgbiA9IGkucmVkdWNlKGkuZnVuY3Rpb25zKHQpLCAoZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIHRbZV0gPSAwLCB0IH0pLCB7fSk7IFIoZSwgdCwgbiwgcyk7IH0sIFIoZSwgaSwgbiwgcyk7IH0pKSwgZS5zeW5jID0gZnVuY3Rpb24gKHQsIG4sIHMpIHsgdmFyIHIgPSBqW3RdOyBpLmRlZmF1bHRzKHMgfHwgKHMgPSB7fSksIHsgZW11bGF0ZUhUVFA6IGUuZW11bGF0ZUhUVFAsIGVtdWxhdGVKU09OOiBlLmVtdWxhdGVKU09OIH0pOyB2YXIgbyA9IHsgdHlwZTogciwgZGF0YVR5cGU6ICJqc29uIiB9OyBpZiAocy51cmwgfHwgKG8udXJsID0gaS5yZXN1bHQobiwgInVybCIpIHx8IFcoKSksIG51bGwgIT0gcy5kYXRhIHx8ICFuIHx8ICJjcmVhdGUiICE9PSB0ICYmICJ1cGRhdGUiICE9PSB0ICYmICJwYXRjaCIgIT09IHQgfHwgKG8uY29udGVudFR5cGUgPSAiYXBwbGljYXRpb24vanNvbiIsIG8uZGF0YSA9IEpTT04uc3RyaW5naWZ5KHMuYXR0cnMgfHwgbi50b0pTT04ocykpKSwgcy5lbXVsYXRlSlNPTiAmJiAoby5jb250ZW50VHlwZSA9ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCBvLmRhdGEgPSBvLmRhdGEgPyB7IG1vZGVsOiBvLmRhdGEgfSA6IHt9KSwgcy5lbXVsYXRlSFRUUCAmJiAoIlBVVCIgPT09IHIgfHwgIkRFTEVURSIgPT09IHIgfHwgIlBBVENIIiA9PT0gcikpIHsgby50eXBlID0gIlBPU1QiLCBzLmVtdWxhdGVKU09OICYmIChvLmRhdGEuX21ldGhvZCA9IHIpOyB2YXIgYSA9IHMuYmVmb3JlU2VuZDsgcy5iZWZvcmVTZW5kID0gZnVuY3Rpb24gKHQpIHsgaWYgKHQuc2V0UmVxdWVzdEhlYWRlcigiWC1IVFRQLU1ldGhvZC1PdmVycmlkZSIsIHIpLCBhKSByZXR1cm4gYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH07IH0gIkdFVCIgPT09IG8udHlwZSB8fCBzLmVtdWxhdGVKU09OIHx8IChvLnByb2Nlc3NEYXRhID0gITEpOyB2YXIgaCA9IHMuZXJyb3I7IHMuZXJyb3IgPSBmdW5jdGlvbiAodCwgZSwgaSkgeyBzLnRleHRTdGF0dXMgPSBlLCBzLmVycm9yVGhyb3duID0gaSwgaCAmJiBoLmNhbGwocy5jb250ZXh0LCB0LCBlLCBpKTsgfTsgdmFyIGwgPSBzLnhociA9IGUuYWpheChpLmV4dGVuZChvLCBzKSk7IHJldHVybiBuLnRyaWdnZXIoInJlcXVlc3QiLCBuLCBsLCBzKSwgbCB9OyB2YXIgaiA9IHsgY3JlYXRlOiAiUE9TVCIsIHVwZGF0ZTogIlBVVCIsIHBhdGNoOiAiUEFUQ0giLCBkZWxldGU6ICJERUxFVEUiLCByZWFkOiAiR0VUIiB9OyBlLmFqYXggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBlLiQuYWpheC5hcHBseShlLiQsIGFyZ3VtZW50cykgfTsgdmFyIE8gPSBlLlJvdXRlciA9IGZ1bmN0aW9uICh0KSB7IHQgfHwgKHQgPSB7fSksIHRoaXMucHJlaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0LnJvdXRlcyAmJiAodGhpcy5yb3V0ZXMgPSB0LnJvdXRlcyksIHRoaXMuX2JpbmRSb3V0ZXMoKSwgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0sIFUgPSAvXCgoLio/KVwpL2csIHogPSAvKFwoXD8pPzpcdysvZywgcSA9IC9cKlx3Ky9nLCBGID0gL1tcLXt9XFtcXSs/LixcXFxeJHwjXHNdL2c7IGkuZXh0ZW5kKE8ucHJvdG90eXBlLCBhLCB7IHByZWluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsgfSwgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgeyB9LCByb3V0ZTogZnVuY3Rpb24gKHQsIG4sIHMpIHsgaS5pc1JlZ0V4cCh0KSB8fCAodCA9IHRoaXMuX3JvdXRlVG9SZWdFeHAodCkpLCBpLmlzRnVuY3Rpb24obikgJiYgKHMgPSBuLCBuID0gIiIpLCBzIHx8IChzID0gdGhpc1tuXSk7IHZhciByID0gdGhpczsgcmV0dXJuIGUuaGlzdG9yeS5yb3V0ZSh0LCAoZnVuY3Rpb24gKGkpIHsgdmFyIG8gPSByLl9leHRyYWN0UGFyYW1ldGVycyh0LCBpKTsgITEgIT09IHIuZXhlY3V0ZShzLCBvLCBuKSAmJiAoci50cmlnZ2VyLmFwcGx5KHIsIFsicm91dGU6IiArIG5dLmNvbmNhdChvKSksIHIudHJpZ2dlcigicm91dGUiLCBuLCBvKSwgZS5oaXN0b3J5LnRyaWdnZXIoInJvdXRlIiwgciwgbiwgbykpOyB9KSksIHRoaXMgfSwgZXhlY3V0ZTogZnVuY3Rpb24gKHQsIGUsIGkpIHsgdCAmJiB0LmFwcGx5KHRoaXMsIGUpOyB9LCBuYXZpZ2F0ZTogZnVuY3Rpb24gKHQsIGkpIHsgcmV0dXJuIGUuaGlzdG9yeS5uYXZpZ2F0ZSh0LCBpKSwgdGhpcyB9LCBfYmluZFJvdXRlczogZnVuY3Rpb24gKCkgeyBpZiAodGhpcy5yb3V0ZXMpIHsgdGhpcy5yb3V0ZXMgPSBpLnJlc3VsdCh0aGlzLCAicm91dGVzIik7IGZvciAodmFyIHQsIGUgPSBpLmtleXModGhpcy5yb3V0ZXMpOyBudWxsICE9ICh0ID0gZS5wb3AoKSk7KXRoaXMucm91dGUodCwgdGhpcy5yb3V0ZXNbdF0pOyB9IH0sIF9yb3V0ZVRvUmVnRXhwOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdCA9IHQucmVwbGFjZShGLCAiXFwkJiIpLnJlcGxhY2UoVSwgIig/OiQxKT8iKS5yZXBsYWNlKHosIChmdW5jdGlvbiAodCwgZSkgeyByZXR1cm4gZSA/IHQgOiAiKFteLz9dKykiIH0pKS5yZXBsYWNlKHEsICIoW14/XSo/KSIpLCBuZXcgUmVnRXhwKCJeIiArIHQgKyAiKD86XFw/KFtcXHNcXFNdKikpPyQiKSB9LCBfZXh0cmFjdFBhcmFtZXRlcnM6IGZ1bmN0aW9uICh0LCBlKSB7IHZhciBuID0gdC5leGVjKGUpLnNsaWNlKDEpOyByZXR1cm4gaS5tYXAobiwgKGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiBlID09PSBuLmxlbmd0aCAtIDEgPyB0IHx8IG51bGwgOiB0ID8gZGVjb2RlVVJJQ29tcG9uZW50KHQpIDogbnVsbCB9KSkgfSB9KTsgdmFyIEIgPSBlLkhpc3RvcnkgPSBmdW5jdGlvbiAoKSB7IHRoaXMuaGFuZGxlcnMgPSBbXSwgdGhpcy5jaGVja1VybCA9IHRoaXMuY2hlY2tVcmwuYmluZCh0aGlzKSwgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiAodGhpcy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbiwgdGhpcy5oaXN0b3J5ID0gd2luZG93Lmhpc3RvcnkpOyB9LCBKID0gL15bI1wvXXxccyskL2csIEwgPSAvXlwvK3xcLyskL2csIEQgPSAvIy4qJC87IEIuc3RhcnRlZCA9ICExLCBpLmV4dGVuZChCLnByb3RvdHlwZSwgYSwgeyBpbnRlcnZhbDogNTAsIGF0Um9vdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9bXlwvXSQvLCAiJCYvIikgPT09IHRoaXMucm9vdCAmJiAhdGhpcy5nZXRTZWFyY2goKSB9LCBtYXRjaFJvb3Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSkuc2xpY2UoMCwgdGhpcy5yb290Lmxlbmd0aCAtIDEpICsgIi8iID09PSB0aGlzLnJvb3QgfSwgZGVjb2RlRnJhZ21lbnQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiBkZWNvZGVVUkkodC5yZXBsYWNlKC8lMjUvZywgIiUyNTI1IikpIH0sIGdldFNlYXJjaDogZnVuY3Rpb24gKCkgeyB2YXIgdCA9IHRoaXMubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCAiIikubWF0Y2goL1w/LisvKTsgcmV0dXJuIHQgPyB0WzBdIDogIiIgfSwgZ2V0SGFzaDogZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSAodCB8fCB0aGlzKS5sb2NhdGlvbi5ocmVmLm1hdGNoKC8jKC4qKSQvKTsgcmV0dXJuIGUgPyBlWzFdIDogIiIgfSwgZ2V0UGF0aDogZnVuY3Rpb24gKCkgeyB2YXIgdCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSArIHRoaXMuZ2V0U2VhcmNoKCkpLnNsaWNlKHRoaXMucm9vdC5sZW5ndGggLSAxKTsgcmV0dXJuICIvIiA9PT0gdC5jaGFyQXQoMCkgPyB0LnNsaWNlKDEpIDogdCB9LCBnZXRGcmFnbWVudDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG51bGwgPT0gdCAmJiAodCA9IHRoaXMuX3VzZVB1c2hTdGF0ZSB8fCAhdGhpcy5fd2FudHNIYXNoQ2hhbmdlID8gdGhpcy5nZXRQYXRoKCkgOiB0aGlzLmdldEhhc2goKSksIHQucmVwbGFjZShKLCAiIikgfSwgc3RhcnQ6IGZ1bmN0aW9uICh0KSB7IGlmIChCLnN0YXJ0ZWQpIHRocm93IG5ldyBFcnJvcigiQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQiKTsgaWYgKEIuc3RhcnRlZCA9ICEwLCB0aGlzLm9wdGlvbnMgPSBpLmV4dGVuZCh7IHJvb3Q6ICIvIiB9LCB0aGlzLm9wdGlvbnMsIHQpLCB0aGlzLnJvb3QgPSB0aGlzLm9wdGlvbnMucm9vdCwgdGhpcy5fd2FudHNIYXNoQ2hhbmdlID0gITEgIT09IHRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlLCB0aGlzLl9oYXNIYXNoQ2hhbmdlID0gIm9uaGFzaGNoYW5nZSIgaW4gd2luZG93ICYmICh2b2lkIDAgPT09IGRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPiA3KSwgdGhpcy5fdXNlSGFzaENoYW5nZSA9IHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl9oYXNIYXNoQ2hhbmdlLCB0aGlzLl93YW50c1B1c2hTdGF0ZSA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZSwgdGhpcy5faGFzUHVzaFN0YXRlID0gISghdGhpcy5oaXN0b3J5IHx8ICF0aGlzLmhpc3RvcnkucHVzaFN0YXRlKSwgdGhpcy5fdXNlUHVzaFN0YXRlID0gdGhpcy5fd2FudHNQdXNoU3RhdGUgJiYgdGhpcy5faGFzUHVzaFN0YXRlLCB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudCgpLCB0aGlzLnJvb3QgPSAoIi8iICsgdGhpcy5yb290ICsgIi8iKS5yZXBsYWNlKEwsICIvIiksIHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkgeyBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkgeyB2YXIgZSA9IHRoaXMucm9vdC5zbGljZSgwLCAtMSkgfHwgIi8iOyByZXR1cm4gdGhpcy5sb2NhdGlvbi5yZXBsYWNlKGUgKyAiIyIgKyB0aGlzLmdldFBhdGgoKSksICEwIH0gdGhpcy5faGFzUHVzaFN0YXRlICYmIHRoaXMuYXRSb290KCkgJiYgdGhpcy5uYXZpZ2F0ZSh0aGlzLmdldEhhc2goKSwgeyByZXBsYWNlOiAhMCB9KTsgfSBpZiAoIXRoaXMuX2hhc0hhc2hDaGFuZ2UgJiYgdGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmICF0aGlzLl91c2VQdXNoU3RhdGUpIHsgdGhpcy5pZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKSwgdGhpcy5pZnJhbWUuc3JjID0gImphdmFzY3JpcHQ6MCIsIHRoaXMuaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAibm9uZSIsIHRoaXMuaWZyYW1lLnRhYkluZGV4ID0gLTE7IHZhciBuID0gZG9jdW1lbnQuYm9keSwgcyA9IG4uaW5zZXJ0QmVmb3JlKHRoaXMuaWZyYW1lLCBuLmZpcnN0Q2hpbGQpLmNvbnRlbnRXaW5kb3c7IHMuZG9jdW1lbnQub3BlbigpLCBzLmRvY3VtZW50LmNsb3NlKCksIHMubG9jYXRpb24uaGFzaCA9ICIjIiArIHRoaXMuZnJhZ21lbnQ7IH0gdmFyIHIgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCBmdW5jdGlvbiAodCwgZSkgeyByZXR1cm4gYXR0YWNoRXZlbnQoIm9uIiArIHQsIGUpIH07IGlmICh0aGlzLl91c2VQdXNoU3RhdGUgPyByKCJwb3BzdGF0ZSIsIHRoaXMuY2hlY2tVcmwsICExKSA6IHRoaXMuX3VzZUhhc2hDaGFuZ2UgJiYgIXRoaXMuaWZyYW1lID8gcigiaGFzaGNoYW5nZSIsIHRoaXMuY2hlY2tVcmwsICExKSA6IHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiAodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuY2hlY2tVcmwsIHRoaXMuaW50ZXJ2YWwpKSwgIXRoaXMub3B0aW9ucy5zaWxlbnQpIHJldHVybiB0aGlzLmxvYWRVcmwoKSB9LCBzdG9wOiBmdW5jdGlvbiAoKSB7IHZhciB0ID0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgfHwgZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIGRldGFjaEV2ZW50KCJvbiIgKyB0LCBlKSB9OyB0aGlzLl91c2VQdXNoU3RhdGUgPyB0KCJwb3BzdGF0ZSIsIHRoaXMuY2hlY2tVcmwsICExKSA6IHRoaXMuX3VzZUhhc2hDaGFuZ2UgJiYgIXRoaXMuaWZyYW1lICYmIHQoImhhc2hjaGFuZ2UiLCB0aGlzLmNoZWNrVXJsLCAhMSksIHRoaXMuaWZyYW1lICYmIChkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKSwgdGhpcy5pZnJhbWUgPSBudWxsKSwgdGhpcy5fY2hlY2tVcmxJbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpLCBCLnN0YXJ0ZWQgPSAhMTsgfSwgcm91dGU6IGZ1bmN0aW9uICh0LCBlKSB7IHRoaXMuaGFuZGxlcnMudW5zaGlmdCh7IHJvdXRlOiB0LCBjYWxsYmFjazogZSB9KTsgfSwgY2hlY2tVcmw6IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdGhpcy5nZXRGcmFnbWVudCgpOyBpZiAoZSA9PT0gdGhpcy5mcmFnbWVudCAmJiB0aGlzLmlmcmFtZSAmJiAoZSA9IHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSksIGUgPT09IHRoaXMuZnJhZ21lbnQpIHJldHVybiAhMTsgdGhpcy5pZnJhbWUgJiYgdGhpcy5uYXZpZ2F0ZShlKSwgdGhpcy5sb2FkVXJsKCk7IH0sIGxvYWRVcmw6IGZ1bmN0aW9uICh0KSB7IHJldHVybiAhIXRoaXMubWF0Y2hSb290KCkgJiYgKHQgPSB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudCh0KSwgaS5zb21lKHRoaXMuaGFuZGxlcnMsIChmdW5jdGlvbiAoZSkgeyBpZiAoZS5yb3V0ZS50ZXN0KHQpKSByZXR1cm4gZS5jYWxsYmFjayh0KSwgITAgfSkpKSB9LCBuYXZpZ2F0ZTogZnVuY3Rpb24gKHQsIGUpIHsgaWYgKCFCLnN0YXJ0ZWQpIHJldHVybiAhMTsgZSAmJiAhMCAhPT0gZSB8fCAoZSA9IHsgdHJpZ2dlcjogISFlIH0pLCB0ID0gdGhpcy5nZXRGcmFnbWVudCh0IHx8ICIiKTsgdmFyIGkgPSB0aGlzLnJvb3Q7ICIiICE9PSB0ICYmICI/IiAhPT0gdC5jaGFyQXQoMCkgfHwgKGkgPSBpLnNsaWNlKDAsIC0xKSB8fCAiLyIpOyB2YXIgbiA9IGkgKyB0OyB0ID0gdC5yZXBsYWNlKEQsICIiKTsgdmFyIHMgPSB0aGlzLmRlY29kZUZyYWdtZW50KHQpOyBpZiAodGhpcy5mcmFnbWVudCAhPT0gcykgeyBpZiAodGhpcy5mcmFnbWVudCA9IHMsIHRoaXMuX3VzZVB1c2hTdGF0ZSkgdGhpcy5oaXN0b3J5W2UucmVwbGFjZSA/ICJyZXBsYWNlU3RhdGUiIDogInB1c2hTdGF0ZSJdKHt9LCBkb2N1bWVudC50aXRsZSwgbik7IGVsc2UgeyBpZiAoIXRoaXMuX3dhbnRzSGFzaENoYW5nZSkgcmV0dXJuIHRoaXMubG9jYXRpb24uYXNzaWduKG4pOyBpZiAodGhpcy5fdXBkYXRlSGFzaCh0aGlzLmxvY2F0aW9uLCB0LCBlLnJlcGxhY2UpLCB0aGlzLmlmcmFtZSAmJiB0ICE9PSB0aGlzLmdldEhhc2godGhpcy5pZnJhbWUuY29udGVudFdpbmRvdykpIHsgdmFyIHIgPSB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93OyBlLnJlcGxhY2UgfHwgKHIuZG9jdW1lbnQub3BlbigpLCByLmRvY3VtZW50LmNsb3NlKCkpLCB0aGlzLl91cGRhdGVIYXNoKHIubG9jYXRpb24sIHQsIGUucmVwbGFjZSk7IH0gfSByZXR1cm4gZS50cmlnZ2VyID8gdGhpcy5sb2FkVXJsKHQpIDogdm9pZCAwIH0gfSwgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uICh0LCBlLCBpKSB7IGlmIChpKSB7IHZhciBuID0gdC5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sICIiKTsgdC5yZXBsYWNlKG4gKyAiIyIgKyBlKTsgfSBlbHNlIHQuaGFzaCA9ICIjIiArIGU7IH0gfSksIGUuaGlzdG9yeSA9IG5ldyBCOyB2YXIgViA9IGZ1bmN0aW9uICh0LCBlKSB7IHZhciBuLCBzID0gdGhpczsgcmV0dXJuIG4gPSB0ICYmIGkuaGFzKHQsICJjb25zdHJ1Y3RvciIpID8gdC5jb25zdHJ1Y3RvciA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHMuYXBwbHkodGhpcywgYXJndW1lbnRzKSB9LCBpLmV4dGVuZChuLCBzLCBlKSwgbi5wcm90b3R5cGUgPSBpLmNyZWF0ZShzLnByb3RvdHlwZSwgdCksIG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gbiwgbi5fX3N1cGVyX18gPSBzLnByb3RvdHlwZSwgbiB9OyBtLmV4dGVuZCA9IF8uZXh0ZW5kID0gTy5leHRlbmQgPSBULmV4dGVuZCA9IEIuZXh0ZW5kID0gVjsgdmFyIFcgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcignQSAidXJsIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpIH0sIEcgPSBmdW5jdGlvbiAodCwgZSkgeyB2YXIgaSA9IGUuZXJyb3I7IGUuZXJyb3IgPSBmdW5jdGlvbiAobikgeyBpICYmIGkuY2FsbChlLmNvbnRleHQsIHQsIG4sIGUpLCB0LnRyaWdnZXIoImVycm9yIiwgdCwgbiwgZSk7IH07IH07IH0obywgcywgYSwgcik7IH0oKTsgfShzID0geyBwYXRoOiBuLCBleHBvcnRzOiB7fSwgcmVxdWlyZTogZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKCJEeW5hbWljIHJlcXVpcmVzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSBAcm9sbHVwL3BsdWdpbi1jb21tb25qcyIpIH0obnVsbCA9PSBlICYmIHMucGF0aCkgfSB9LCBzLmV4cG9ydHMpLCBzLmV4cG9ydHMpOw0KDQpleHBvcnQgZGVmYXVsdCByOw0KDQovLyMgc291cmNlVVJMPS9lbnRyaWVzL2JhY2tib25lLmpzDQo="
}