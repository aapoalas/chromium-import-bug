{
    "/entries/moment.js": "Ly8hIG1vbWVudC5qcw0KLy8hIHZlcnNpb24gOiAyLjI3LjANCi8vISBhdXRob3JzIDogVGltIFdvb2QsIElza3JlbiBDaGVybmV2LCBNb21lbnQuanMgY29udHJpYnV0b3JzDQovLyEgbGljZW5zZSA6IE1JVA0KLy8hIG1vbWVudGpzLmNvbQ0KdmFyIGUsIHQ7IGZ1bmN0aW9uIG4oKSB7IHJldHVybiBlLmFwcGx5KG51bGwsIGFyZ3VtZW50cykgfSBmdW5jdGlvbiBzKGUpIHsgcmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheSB8fCAiW29iamVjdCBBcnJheV0iID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkgfSBmdW5jdGlvbiBpKGUpIHsgcmV0dXJuIG51bGwgIT0gZSAmJiAiW29iamVjdCBPYmplY3RdIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpIH0gZnVuY3Rpb24gcihlLCB0KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgdCkgfSBmdW5jdGlvbiBhKGUpIHsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKSByZXR1cm4gMCA9PT0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubGVuZ3RoOyB2YXIgdDsgZm9yICh0IGluIGUpIGlmIChyKGUsIHQpKSByZXR1cm4gITE7IHJldHVybiAhMCB9IGZ1bmN0aW9uIG8oZSkgeyByZXR1cm4gdm9pZCAwID09PSBlIH0gZnVuY3Rpb24gdShlKSB7IHJldHVybiAibnVtYmVyIiA9PSB0eXBlb2YgZSB8fCAiW29iamVjdCBOdW1iZXJdIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpIH0gZnVuY3Rpb24gbChlKSB7IHJldHVybiBlIGluc3RhbmNlb2YgRGF0ZSB8fCAiW29iamVjdCBEYXRlXSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSB9IGZ1bmN0aW9uIGgoZSwgdCkgeyB2YXIgbiwgcyA9IFtdOyBmb3IgKG4gPSAwOyBuIDwgZS5sZW5ndGg7ICsrbilzLnB1c2godChlW25dLCBuKSk7IHJldHVybiBzIH0gZnVuY3Rpb24gZChlLCB0KSB7IGZvciAodmFyIG4gaW4gdCkgcih0LCBuKSAmJiAoZVtuXSA9IHRbbl0pOyByZXR1cm4gcih0LCAidG9TdHJpbmciKSAmJiAoZS50b1N0cmluZyA9IHQudG9TdHJpbmcpLCByKHQsICJ2YWx1ZU9mIikgJiYgKGUudmFsdWVPZiA9IHQudmFsdWVPZiksIGUgfSBmdW5jdGlvbiBjKGUsIHQsIG4sIHMpIHsgcmV0dXJuIER0KGUsIHQsIG4sIHMsICEwKS51dGMoKSB9IGZ1bmN0aW9uIGYoZSkgeyByZXR1cm4gbnVsbCA9PSBlLl9wZiAmJiAoZS5fcGYgPSB7IGVtcHR5OiAhMSwgdW51c2VkVG9rZW5zOiBbXSwgdW51c2VkSW5wdXQ6IFtdLCBvdmVyZmxvdzogLTIsIGNoYXJzTGVmdE92ZXI6IDAsIG51bGxJbnB1dDogITEsIGludmFsaWRFcmE6IG51bGwsIGludmFsaWRNb250aDogbnVsbCwgaW52YWxpZEZvcm1hdDogITEsIHVzZXJJbnZhbGlkYXRlZDogITEsIGlzbzogITEsIHBhcnNlZERhdGVQYXJ0czogW10sIGVyYTogbnVsbCwgbWVyaWRpZW06IG51bGwsIHJmYzI4MjI6ICExLCB3ZWVrZGF5TWlzbWF0Y2g6ICExIH0pLCBlLl9wZiB9IGZ1bmN0aW9uIG0oZSkgeyBpZiAobnVsbCA9PSBlLl9pc1ZhbGlkKSB7IHZhciBuID0gZihlKSwgcyA9IHQuY2FsbChuLnBhcnNlZERhdGVQYXJ0cywgKGZ1bmN0aW9uIChlKSB7IHJldHVybiBudWxsICE9IGUgfSkpLCBpID0gIWlzTmFOKGUuX2QuZ2V0VGltZSgpKSAmJiBuLm92ZXJmbG93IDwgMCAmJiAhbi5lbXB0eSAmJiAhbi5pbnZhbGlkRXJhICYmICFuLmludmFsaWRNb250aCAmJiAhbi5pbnZhbGlkV2Vla2RheSAmJiAhbi53ZWVrZGF5TWlzbWF0Y2ggJiYgIW4ubnVsbElucHV0ICYmICFuLmludmFsaWRGb3JtYXQgJiYgIW4udXNlckludmFsaWRhdGVkICYmICghbi5tZXJpZGllbSB8fCBuLm1lcmlkaWVtICYmIHMpOyBpZiAoZS5fc3RyaWN0ICYmIChpID0gaSAmJiAwID09PSBuLmNoYXJzTGVmdE92ZXIgJiYgMCA9PT0gbi51bnVzZWRUb2tlbnMubGVuZ3RoICYmIHZvaWQgMCA9PT0gbi5iaWdIb3VyKSwgbnVsbCAhPSBPYmplY3QuaXNGcm96ZW4gJiYgT2JqZWN0LmlzRnJvemVuKGUpKSByZXR1cm4gaTsgZS5faXNWYWxpZCA9IGk7IH0gcmV0dXJuIGUuX2lzVmFsaWQgfSBmdW5jdGlvbiBfKGUpIHsgdmFyIHQgPSBjKE5hTik7IHJldHVybiBudWxsICE9IGUgPyBkKGYodCksIGUpIDogZih0KS51c2VySW52YWxpZGF0ZWQgPSAhMCwgdCB9IHQgPSBBcnJheS5wcm90b3R5cGUuc29tZSA/IEFycmF5LnByb3RvdHlwZS5zb21lIDogZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG4gPSBPYmplY3QodGhpcyksIHMgPSBuLmxlbmd0aCA+Pj4gMDsgZm9yICh0ID0gMDsgdCA8IHM7IHQrKylpZiAodCBpbiBuICYmIGUuY2FsbCh0aGlzLCBuW3RdLCB0LCBuKSkgcmV0dXJuICEwOyByZXR1cm4gITEgfTsgdmFyIHkgPSBuLm1vbWVudFByb3BlcnRpZXMgPSBbXSwgZyA9ICExOyBmdW5jdGlvbiB3KGUsIHQpIHsgdmFyIG4sIHMsIGk7IGlmIChvKHQuX2lzQU1vbWVudE9iamVjdCkgfHwgKGUuX2lzQU1vbWVudE9iamVjdCA9IHQuX2lzQU1vbWVudE9iamVjdCksIG8odC5faSkgfHwgKGUuX2kgPSB0Ll9pKSwgbyh0Ll9mKSB8fCAoZS5fZiA9IHQuX2YpLCBvKHQuX2wpIHx8IChlLl9sID0gdC5fbCksIG8odC5fc3RyaWN0KSB8fCAoZS5fc3RyaWN0ID0gdC5fc3RyaWN0KSwgbyh0Ll90em0pIHx8IChlLl90em0gPSB0Ll90em0pLCBvKHQuX2lzVVRDKSB8fCAoZS5faXNVVEMgPSB0Ll9pc1VUQyksIG8odC5fb2Zmc2V0KSB8fCAoZS5fb2Zmc2V0ID0gdC5fb2Zmc2V0KSwgbyh0Ll9wZikgfHwgKGUuX3BmID0gZih0KSksIG8odC5fbG9jYWxlKSB8fCAoZS5fbG9jYWxlID0gdC5fbG9jYWxlKSwgeS5sZW5ndGggPiAwKSBmb3IgKG4gPSAwOyBuIDwgeS5sZW5ndGg7IG4rKylvKGkgPSB0W3MgPSB5W25dXSkgfHwgKGVbc10gPSBpKTsgcmV0dXJuIGUgfSBmdW5jdGlvbiBwKGUpIHsgdyh0aGlzLCBlKSwgdGhpcy5fZCA9IG5ldyBEYXRlKG51bGwgIT0gZS5fZCA/IGUuX2QuZ2V0VGltZSgpIDogTmFOKSwgdGhpcy5pc1ZhbGlkKCkgfHwgKHRoaXMuX2QgPSBuZXcgRGF0ZShOYU4pKSwgITEgPT09IGcgJiYgKGcgPSAhMCwgbi51cGRhdGVPZmZzZXQodGhpcyksIGcgPSAhMSk7IH0gZnVuY3Rpb24gdihlKSB7IHJldHVybiBlIGluc3RhbmNlb2YgcCB8fCBudWxsICE9IGUgJiYgbnVsbCAhPSBlLl9pc0FNb21lbnRPYmplY3QgfSBmdW5jdGlvbiBrKGUpIHsgITEgPT09IG4uc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBjb25zb2xlICYmIGNvbnNvbGUud2FybiAmJiBjb25zb2xlLndhcm4oIkRlcHJlY2F0aW9uIHdhcm5pbmc6ICIgKyBlKTsgfSBmdW5jdGlvbiBNKGUsIHQpIHsgdmFyIHMgPSAhMDsgcmV0dXJuIGQoKGZ1bmN0aW9uICgpIHsgaWYgKG51bGwgIT0gbi5kZXByZWNhdGlvbkhhbmRsZXIgJiYgbi5kZXByZWNhdGlvbkhhbmRsZXIobnVsbCwgZSksIHMpIHsgdmFyIGksIGEsIG8sIHUgPSBbXTsgZm9yIChhID0gMDsgYSA8IGFyZ3VtZW50cy5sZW5ndGg7IGErKykgeyBpZiAoaSA9ICIiLCAib2JqZWN0IiA9PSB0eXBlb2YgYXJndW1lbnRzW2FdKSB7IGZvciAobyBpbiBpICs9ICJcblsiICsgYSArICJdICIsIGFyZ3VtZW50c1swXSkgcihhcmd1bWVudHNbMF0sIG8pICYmIChpICs9IG8gKyAiOiAiICsgYXJndW1lbnRzWzBdW29dICsgIiwgIik7IGkgPSBpLnNsaWNlKDAsIC0yKTsgfSBlbHNlIGkgPSBhcmd1bWVudHNbYV07IHUucHVzaChpKTsgfSBrKGUgKyAiXG5Bcmd1bWVudHM6ICIgKyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh1KS5qb2luKCIiKSArICJcbiIgKyAobmV3IEVycm9yKS5zdGFjayksIHMgPSAhMTsgfSByZXR1cm4gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH0pLCB0KSB9IHZhciBELCBTID0ge307IGZ1bmN0aW9uIFkoZSwgdCkgeyBudWxsICE9IG4uZGVwcmVjYXRpb25IYW5kbGVyICYmIG4uZGVwcmVjYXRpb25IYW5kbGVyKGUsIHQpLCBTW2VdIHx8IChrKHQpLCBTW2VdID0gITApOyB9IGZ1bmN0aW9uIE8oZSkgeyByZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIEZ1bmN0aW9uICYmIGUgaW5zdGFuY2VvZiBGdW5jdGlvbiB8fCAiW29iamVjdCBGdW5jdGlvbl0iID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkgfSBmdW5jdGlvbiBiKGUsIHQpIHsgdmFyIG4sIHMgPSBkKHt9LCBlKTsgZm9yIChuIGluIHQpIHIodCwgbikgJiYgKGkoZVtuXSkgJiYgaSh0W25dKSA/IChzW25dID0ge30sIGQoc1tuXSwgZVtuXSksIGQoc1tuXSwgdFtuXSkpIDogbnVsbCAhPSB0W25dID8gc1tuXSA9IHRbbl0gOiBkZWxldGUgc1tuXSk7IGZvciAobiBpbiBlKSByKGUsIG4pICYmICFyKHQsIG4pICYmIGkoZVtuXSkgJiYgKHNbbl0gPSBkKHt9LCBzW25dKSk7IHJldHVybiBzIH0gZnVuY3Rpb24geChlKSB7IG51bGwgIT0gZSAmJiB0aGlzLnNldChlKTsgfSBuLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncyA9ICExLCBuLmRlcHJlY2F0aW9uSGFuZGxlciA9IG51bGwsIEQgPSBPYmplY3Qua2V5cyA/IE9iamVjdC5rZXlzIDogZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG4gPSBbXTsgZm9yICh0IGluIGUpIHIoZSwgdCkgJiYgbi5wdXNoKHQpOyByZXR1cm4gbiB9OyBmdW5jdGlvbiBUKGUsIHQsIG4pIHsgdmFyIHMgPSAiIiArIE1hdGguYWJzKGUpLCBpID0gdCAtIHMubGVuZ3RoOyByZXR1cm4gKGUgPj0gMCA/IG4gPyAiKyIgOiAiIiA6ICItIikgKyBNYXRoLnBvdygxMCwgTWF0aC5tYXgoMCwgaSkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpICsgcyB9IHZhciBOID0gLyhcW1teXFtdKlxdKXwoXFwpPyhbSGhdbW0oc3MpP3xNb3xNTT9NP00/fERvfERERG98REQ/RD9EP3xkZGQ/ZD98ZG8/fHdbb3x3XT98V1tvfFddP3xRbz98TnsxLDV9fFlZWVlZWXxZWVlZWXxZWVlZfFlZfHl7Miw0fXx5bz98Z2coZ2dnPyk/fEdHKEdHRz8pP3xlfEV8YXxBfGhoP3xISD98a2s/fG1tP3xzcz98U3sxLDl9fHh8WHx6ej98Wlo/fC4pL2csIFAgPSAvKFxbW15cW10qXF0pfChcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZywgUiA9IHt9LCBXID0ge307IGZ1bmN0aW9uIEMoZSwgdCwgbiwgcykgeyB2YXIgaSA9IHM7ICJzdHJpbmciID09IHR5cGVvZiBzICYmIChpID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpc1tzXSgpIH0pLCBlICYmIChXW2VdID0gaSksIHQgJiYgKFdbdFswXV0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBUKGkuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdFsxXSwgdFsyXSkgfSksIG4gJiYgKFdbbl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5vcmRpbmFsKGkuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgZSkgfSk7IH0gZnVuY3Rpb24gSChlLCB0KSB7IHJldHVybiBlLmlzVmFsaWQoKSA/ICh0ID0gVSh0LCBlLmxvY2FsZURhdGEoKSksIFJbdF0gPSBSW3RdIHx8IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCBzLCBpID0gZS5tYXRjaChOKTsgZm9yICh0ID0gMCwgbiA9IGkubGVuZ3RoOyB0IDwgbjsgdCsrKVdbaVt0XV0gPyBpW3RdID0gV1tpW3RdXSA6IGlbdF0gPSAocyA9IGlbdF0pLm1hdGNoKC9cW1tcc1xTXS8pID8gcy5yZXBsYWNlKC9eXFt8XF0kL2csICIiKSA6IHMucmVwbGFjZSgvXFwvZywgIiIpOyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgdmFyIHMsIHIgPSAiIjsgZm9yIChzID0gMDsgcyA8IG47IHMrKylyICs9IE8oaVtzXSkgPyBpW3NdLmNhbGwodCwgZSkgOiBpW3NdOyByZXR1cm4gciB9IH0odCksIFJbdF0oZSkpIDogZS5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKSB9IGZ1bmN0aW9uIFUoZSwgdCkgeyB2YXIgbiA9IDU7IGZ1bmN0aW9uIHMoZSkgeyByZXR1cm4gdC5sb25nRGF0ZUZvcm1hdChlKSB8fCBlIH0gZm9yIChQLmxhc3RJbmRleCA9IDA7IG4gPj0gMCAmJiBQLnRlc3QoZSk7KWUgPSBlLnJlcGxhY2UoUCwgcyksIFAubGFzdEluZGV4ID0gMCwgbiAtPSAxOyByZXR1cm4gZSB9IHZhciBGID0ge307IGZ1bmN0aW9uIEwoZSwgdCkgeyB2YXIgbiA9IGUudG9Mb3dlckNhc2UoKTsgRltuXSA9IEZbbiArICJzIl0gPSBGW3RdID0gZTsgfSBmdW5jdGlvbiBWKGUpIHsgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlID8gRltlXSB8fCBGW2UudG9Mb3dlckNhc2UoKV0gOiB2b2lkIDAgfSBmdW5jdGlvbiBHKGUpIHsgdmFyIHQsIG4sIHMgPSB7fTsgZm9yIChuIGluIGUpIHIoZSwgbikgJiYgKHQgPSBWKG4pKSAmJiAoc1t0XSA9IGVbbl0pOyByZXR1cm4gcyB9IHZhciBFID0ge307IGZ1bmN0aW9uIEEoZSwgdCkgeyBFW2VdID0gdDsgfSBmdW5jdGlvbiBqKGUpIHsgcmV0dXJuIGUgJSA0ID09IDAgJiYgZSAlIDEwMCAhPSAwIHx8IGUgJSA0MDAgPT0gMCB9IGZ1bmN0aW9uIEkoZSkgeyByZXR1cm4gZSA8IDAgPyBNYXRoLmNlaWwoZSkgfHwgMCA6IE1hdGguZmxvb3IoZSkgfSBmdW5jdGlvbiBaKGUpIHsgdmFyIHQgPSArZSwgbiA9IDA7IHJldHVybiAwICE9PSB0ICYmIGlzRmluaXRlKHQpICYmIChuID0gSSh0KSksIG4gfSBmdW5jdGlvbiB6KGUsIHQpIHsgcmV0dXJuIGZ1bmN0aW9uIChzKSB7IHJldHVybiBudWxsICE9IHMgPyAocSh0aGlzLCBlLCBzKSwgbi51cGRhdGVPZmZzZXQodGhpcywgdCksIHRoaXMpIDogJCh0aGlzLCBlKSB9IH0gZnVuY3Rpb24gJChlLCB0KSB7IHJldHVybiBlLmlzVmFsaWQoKSA/IGUuX2RbImdldCIgKyAoZS5faXNVVEMgPyAiVVRDIiA6ICIiKSArIHRdKCkgOiBOYU4gfSBmdW5jdGlvbiBxKGUsIHQsIG4pIHsgZS5pc1ZhbGlkKCkgJiYgIWlzTmFOKG4pICYmICgiRnVsbFllYXIiID09PSB0ICYmIGooZS55ZWFyKCkpICYmIDEgPT09IGUubW9udGgoKSAmJiAyOSA9PT0gZS5kYXRlKCkgPyAobiA9IFoobiksIGUuX2RbInNldCIgKyAoZS5faXNVVEMgPyAiVVRDIiA6ICIiKSArIHRdKG4sIGUubW9udGgoKSwgdmUobiwgZS5tb250aCgpKSkpIDogZS5fZFsic2V0IiArIChlLl9pc1VUQyA/ICJVVEMiIDogIiIpICsgdF0obikpOyB9IHZhciBCLCBKID0gL1xkLywgUSA9IC9cZFxkLywgWCA9IC9cZHszfS8sIEsgPSAvXGR7NH0vLCBlZSA9IC9bKy1dP1xkezZ9LywgdGUgPSAvXGRcZD8vLCBuZSA9IC9cZFxkXGRcZD8vLCBzZSA9IC9cZFxkXGRcZFxkXGQ/LywgaWUgPSAvXGR7MSwzfS8sIHJlID0gL1xkezEsNH0vLCBhZSA9IC9bKy1dP1xkezEsNn0vLCBvZSA9IC9cZCsvLCB1ZSA9IC9bKy1dP1xkKy8sIGxlID0gL1p8WystXVxkXGQ6P1xkXGQvZ2ksIGhlID0gL1p8WystXVxkXGQoPzo6P1xkXGQpPy9naSwgZGUgPSAvWzAtOV17MCwyNTZ9WydhLXpcdTAwQTAtXHUwNUZGXHUwNzAwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRjA3XHVGRjEwLVx1RkZFRl17MSwyNTZ9fFtcdTA2MDAtXHUwNkZGXC9dezEsMjU2fShccyo/W1x1MDYwMC1cdTA2RkZdezEsMjU2fSl7MSwyfS9pOyBmdW5jdGlvbiBjZShlLCB0LCBuKSB7IEJbZV0gPSBPKHQpID8gdCA6IGZ1bmN0aW9uIChlLCBzKSB7IHJldHVybiBlICYmIG4gPyBuIDogdCB9OyB9IGZ1bmN0aW9uIGZlKGUsIHQpIHsgcmV0dXJuIHIoQiwgZSkgPyBCW2VdKHQuX3N0cmljdCwgdC5fbG9jYWxlKSA6IG5ldyBSZWdFeHAobWUoZS5yZXBsYWNlKCJcXCIsICIiKS5yZXBsYWNlKC9cXChcWyl8XFwoXF0pfFxbKFteXF1cW10qKVxdfFxcKC4pL2csIChmdW5jdGlvbiAoZSwgdCwgbiwgcywgaSkgeyByZXR1cm4gdCB8fCBuIHx8IHMgfHwgaSB9KSkpKSB9IGZ1bmN0aW9uIG1lKGUpIHsgcmV0dXJuIGUucmVwbGFjZSgvWy1cL1xcXiQqKz8uKCl8W1xde31dL2csICJcXCQmIikgfSBCID0ge307IHZhciBfZSA9IHt9OyBmdW5jdGlvbiB5ZShlLCB0KSB7IHZhciBuLCBzID0gdDsgZm9yICgic3RyaW5nIiA9PSB0eXBlb2YgZSAmJiAoZSA9IFtlXSksIHUodCkgJiYgKHMgPSBmdW5jdGlvbiAoZSwgbikgeyBuW3RdID0gWihlKTsgfSksIG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKylfZVtlW25dXSA9IHM7IH0gZnVuY3Rpb24gZ2UoZSwgdCkgeyB5ZShlLCAoZnVuY3Rpb24gKGUsIG4sIHMsIGkpIHsgcy5fdyA9IHMuX3cgfHwge30sIHQoZSwgcy5fdywgcywgaSk7IH0pKTsgfSBmdW5jdGlvbiB3ZShlLCB0LCBuKSB7IG51bGwgIT0gdCAmJiByKF9lLCBlKSAmJiBfZVtlXSh0LCBuLl9hLCBuLCBlKTsgfSB2YXIgcGU7IGZ1bmN0aW9uIHZlKGUsIHQpIHsgaWYgKGlzTmFOKGUpIHx8IGlzTmFOKHQpKSByZXR1cm4gTmFOOyB2YXIgbiwgcyA9ICh0ICUgKG4gPSAxMikgKyBuKSAlIG47IHJldHVybiBlICs9ICh0IC0gcykgLyAxMiwgMSA9PT0gcyA/IGooZSkgPyAyOSA6IDI4IDogMzEgLSBzICUgNyAlIDIgfSBwZSA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mID8gQXJyYXkucHJvdG90eXBlLmluZGV4T2YgOiBmdW5jdGlvbiAoZSkgeyB2YXIgdDsgZm9yICh0ID0gMDsgdCA8IHRoaXMubGVuZ3RoOyArK3QpaWYgKHRoaXNbdF0gPT09IGUpIHJldHVybiB0OyByZXR1cm4gLTEgfSwgQygiTSIsIFsiTU0iLCAyXSwgIk1vIiwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubW9udGgoKSArIDEgfSkpLCBDKCJNTU0iLCAwLCAwLCAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRoc1Nob3J0KHRoaXMsIGUpIH0pKSwgQygiTU1NTSIsIDAsIDAsIChmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzKHRoaXMsIGUpIH0pKSwgTCgibW9udGgiLCAiTSIpLCBBKCJtb250aCIsIDgpLCBjZSgiTSIsIHRlKSwgY2UoIk1NIiwgdGUsIFEpLCBjZSgiTU1NIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0Lm1vbnRoc1Nob3J0UmVnZXgoZSkgfSkpLCBjZSgiTU1NTSIsIChmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdC5tb250aHNSZWdleChlKSB9KSksIHllKFsiTSIsICJNTSJdLCAoZnVuY3Rpb24gKGUsIHQpIHsgdFsxXSA9IFooZSkgLSAxOyB9KSksIHllKFsiTU1NIiwgIk1NTU0iXSwgKGZ1bmN0aW9uIChlLCB0LCBuLCBzKSB7IHZhciBpID0gbi5fbG9jYWxlLm1vbnRoc1BhcnNlKGUsIHMsIG4uX3N0cmljdCk7IG51bGwgIT0gaSA/IHRbMV0gPSBpIDogZihuKS5pbnZhbGlkTW9udGggPSBlOyB9KSk7IHZhciBrZSA9ICJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyIi5zcGxpdCgiXyIpLCBNZSA9ICJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYyIuc3BsaXQoIl8iKSwgRGUgPSAvRFtvRF0/KFxbW15cW1xdXSpcXXxccykrTU1NTT8vLCBTZSA9IGRlLCBZZSA9IGRlOyBmdW5jdGlvbiBPZShlLCB0LCBuKSB7IHZhciBzLCBpLCByLCBhID0gZS50b0xvY2FsZUxvd2VyQ2FzZSgpOyBpZiAoIXRoaXMuX21vbnRoc1BhcnNlKSBmb3IgKHRoaXMuX21vbnRoc1BhcnNlID0gW10sIHRoaXMuX2xvbmdNb250aHNQYXJzZSA9IFtdLCB0aGlzLl9zaG9ydE1vbnRoc1BhcnNlID0gW10sIHMgPSAwOyBzIDwgMTI7ICsrcylyID0gYyhbMmUzLCBzXSksIHRoaXMuX3Nob3J0TW9udGhzUGFyc2Vbc10gPSB0aGlzLm1vbnRoc1Nob3J0KHIsICIiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLCB0aGlzLl9sb25nTW9udGhzUGFyc2Vbc10gPSB0aGlzLm1vbnRocyhyLCAiIikudG9Mb2NhbGVMb3dlckNhc2UoKTsgcmV0dXJuIG4gPyAiTU1NIiA9PT0gdCA/IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSwgYSkpID8gaSA6IG51bGwgOiAtMSAhPT0gKGkgPSBwZS5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSwgYSkpID8gaSA6IG51bGwgOiAiTU1NIiA9PT0gdCA/IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSwgYSkpIHx8IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLCBhKSkgPyBpIDogbnVsbCA6IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLCBhKSkgfHwgLTEgIT09IChpID0gcGUuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLCBhKSkgPyBpIDogbnVsbCB9IGZ1bmN0aW9uIGJlKGUsIHQpIHsgdmFyIG47IGlmICghZS5pc1ZhbGlkKCkpIHJldHVybiBlOyBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHQpIGlmICgvXlxkKyQvLnRlc3QodCkpIHQgPSBaKHQpOyBlbHNlIGlmICghdSh0ID0gZS5sb2NhbGVEYXRhKCkubW9udGhzUGFyc2UodCkpKSByZXR1cm4gZTsgcmV0dXJuIG4gPSBNYXRoLm1pbihlLmRhdGUoKSwgdmUoZS55ZWFyKCksIHQpKSwgZS5fZFsic2V0IiArIChlLl9pc1VUQyA/ICJVVEMiIDogIiIpICsgIk1vbnRoIl0odCwgbiksIGUgfSBmdW5jdGlvbiB4ZShlKSB7IHJldHVybiBudWxsICE9IGUgPyAoYmUodGhpcywgZSksIG4udXBkYXRlT2Zmc2V0KHRoaXMsICEwKSwgdGhpcykgOiAkKHRoaXMsICJNb250aCIpIH0gZnVuY3Rpb24gVGUoKSB7IGZ1bmN0aW9uIGUoZSwgdCkgeyByZXR1cm4gdC5sZW5ndGggLSBlLmxlbmd0aCB9IHZhciB0LCBuLCBzID0gW10sIGkgPSBbXSwgciA9IFtdOyBmb3IgKHQgPSAwOyB0IDwgMTI7IHQrKyluID0gYyhbMmUzLCB0XSksIHMucHVzaCh0aGlzLm1vbnRoc1Nob3J0KG4sICIiKSksIGkucHVzaCh0aGlzLm1vbnRocyhuLCAiIikpLCByLnB1c2godGhpcy5tb250aHMobiwgIiIpKSwgci5wdXNoKHRoaXMubW9udGhzU2hvcnQobiwgIiIpKTsgZm9yIChzLnNvcnQoZSksIGkuc29ydChlKSwgci5zb3J0KGUpLCB0ID0gMDsgdCA8IDEyOyB0Kyspc1t0XSA9IG1lKHNbdF0pLCBpW3RdID0gbWUoaVt0XSk7IGZvciAodCA9IDA7IHQgPCAyNDsgdCsrKXJbdF0gPSBtZShyW3RdKTsgdGhpcy5fbW9udGhzUmVnZXggPSBuZXcgUmVnRXhwKCJeKCIgKyByLmpvaW4oInwiKSArICIpIiwgImkiKSwgdGhpcy5fbW9udGhzU2hvcnRSZWdleCA9IHRoaXMuX21vbnRoc1JlZ2V4LCB0aGlzLl9tb250aHNTdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoIl4oIiArIGkuam9pbigifCIpICsgIikiLCAiaSIpLCB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgiXigiICsgcy5qb2luKCJ8IikgKyAiKSIsICJpIik7IH0gZnVuY3Rpb24gTmUoZSkgeyByZXR1cm4gaihlKSA/IDM2NiA6IDM2NSB9IEMoIlkiLCAwLCAwLCAoZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXMueWVhcigpOyByZXR1cm4gZSA8PSA5OTk5ID8gVChlLCA0KSA6ICIrIiArIGUgfSkpLCBDKDAsIFsiWVkiLCAyXSwgMCwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMueWVhcigpICUgMTAwIH0pKSwgQygwLCBbIllZWVkiLCA0XSwgMCwgInllYXIiKSwgQygwLCBbIllZWVlZIiwgNV0sIDAsICJ5ZWFyIiksIEMoMCwgWyJZWVlZWVkiLCA2LCAhMF0sIDAsICJ5ZWFyIiksIEwoInllYXIiLCAieSIpLCBBKCJ5ZWFyIiwgMSksIGNlKCJZIiwgdWUpLCBjZSgiWVkiLCB0ZSwgUSksIGNlKCJZWVlZIiwgcmUsIEspLCBjZSgiWVlZWVkiLCBhZSwgZWUpLCBjZSgiWVlZWVlZIiwgYWUsIGVlKSwgeWUoWyJZWVlZWSIsICJZWVlZWVkiXSwgMCksIHllKCJZWVlZIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHRbMF0gPSAyID09PSBlLmxlbmd0aCA/IG4ucGFyc2VUd29EaWdpdFllYXIoZSkgOiBaKGUpOyB9KSksIHllKCJZWSIsIChmdW5jdGlvbiAoZSwgdCkgeyB0WzBdID0gbi5wYXJzZVR3b0RpZ2l0WWVhcihlKTsgfSkpLCB5ZSgiWSIsIChmdW5jdGlvbiAoZSwgdCkgeyB0WzBdID0gcGFyc2VJbnQoZSwgMTApOyB9KSksIG4ucGFyc2VUd29EaWdpdFllYXIgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gWihlKSArIChaKGUpID4gNjggPyAxOTAwIDogMmUzKSB9OyB2YXIgUGUgPSB6KCJGdWxsWWVhciIsICEwKTsgZnVuY3Rpb24gUmUoZSwgdCwgbiwgcywgaSwgciwgYSkgeyB2YXIgbzsgcmV0dXJuIGUgPCAxMDAgJiYgZSA+PSAwID8gKG8gPSBuZXcgRGF0ZShlICsgNDAwLCB0LCBuLCBzLCBpLCByLCBhKSwgaXNGaW5pdGUoby5nZXRGdWxsWWVhcigpKSAmJiBvLnNldEZ1bGxZZWFyKGUpKSA6IG8gPSBuZXcgRGF0ZShlLCB0LCBuLCBzLCBpLCByLCBhKSwgbyB9IGZ1bmN0aW9uIFdlKGUpIHsgdmFyIHQsIG47IHJldHVybiBlIDwgMTAwICYmIGUgPj0gMCA/ICgobiA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpWzBdID0gZSArIDQwMCwgdCA9IG5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KG51bGwsIG4pKSwgaXNGaW5pdGUodC5nZXRVVENGdWxsWWVhcigpKSAmJiB0LnNldFVUQ0Z1bGxZZWFyKGUpKSA6IHQgPSBuZXcgRGF0ZShEYXRlLlVUQy5hcHBseShudWxsLCBhcmd1bWVudHMpKSwgdCB9IGZ1bmN0aW9uIENlKGUsIHQsIG4pIHsgdmFyIHMgPSA3ICsgdCAtIG47IHJldHVybiAtKCg3ICsgV2UoZSwgMCwgcykuZ2V0VVRDRGF5KCkgLSB0KSAlIDcpICsgcyAtIDEgfSBmdW5jdGlvbiBIZShlLCB0LCBuLCBzLCBpKSB7IHZhciByLCBhLCBvID0gMSArIDcgKiAodCAtIDEpICsgKDcgKyBuIC0gcykgJSA3ICsgQ2UoZSwgcywgaSk7IHJldHVybiBvIDw9IDAgPyBhID0gTmUociA9IGUgLSAxKSArIG8gOiBvID4gTmUoZSkgPyAociA9IGUgKyAxLCBhID0gbyAtIE5lKGUpKSA6IChyID0gZSwgYSA9IG8pLCB7IHllYXI6IHIsIGRheU9mWWVhcjogYSB9IH0gZnVuY3Rpb24gVWUoZSwgdCwgbikgeyB2YXIgcywgaSwgciA9IENlKGUueWVhcigpLCB0LCBuKSwgYSA9IE1hdGguZmxvb3IoKGUuZGF5T2ZZZWFyKCkgLSByIC0gMSkgLyA3KSArIDE7IHJldHVybiBhIDwgMSA/IHMgPSBhICsgRmUoaSA9IGUueWVhcigpIC0gMSwgdCwgbikgOiBhID4gRmUoZS55ZWFyKCksIHQsIG4pID8gKHMgPSBhIC0gRmUoZS55ZWFyKCksIHQsIG4pLCBpID0gZS55ZWFyKCkgKyAxKSA6IChpID0gZS55ZWFyKCksIHMgPSBhKSwgeyB3ZWVrOiBzLCB5ZWFyOiBpIH0gfSBmdW5jdGlvbiBGZShlLCB0LCBuKSB7IHZhciBzID0gQ2UoZSwgdCwgbiksIGkgPSBDZShlICsgMSwgdCwgbik7IHJldHVybiAoTmUoZSkgLSBzICsgaSkgLyA3IH0gQygidyIsIFsid3ciLCAyXSwgIndvIiwgIndlZWsiKSwgQygiVyIsIFsiV1ciLCAyXSwgIldvIiwgImlzb1dlZWsiKSwgTCgid2VlayIsICJ3IiksIEwoImlzb1dlZWsiLCAiVyIpLCBBKCJ3ZWVrIiwgNSksIEEoImlzb1dlZWsiLCA1KSwgY2UoInciLCB0ZSksIGNlKCJ3dyIsIHRlLCBRKSwgY2UoIlciLCB0ZSksIGNlKCJXVyIsIHRlLCBRKSwgZ2UoWyJ3IiwgInd3IiwgIlciLCAiV1ciXSwgKGZ1bmN0aW9uIChlLCB0LCBuLCBzKSB7IHRbcy5zdWJzdHIoMCwgMSldID0gWihlKTsgfSkpOyBmdW5jdGlvbiBMZShlLCB0KSB7IHJldHVybiBlLnNsaWNlKHQsIDcpLmNvbmNhdChlLnNsaWNlKDAsIHQpKSB9IEMoImQiLCAwLCAiZG8iLCAiZGF5IiksIEMoImRkIiwgMCwgMCwgKGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLCBlKSB9KSksIEMoImRkZCIsIDAsIDAsIChmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCh0aGlzLCBlKSB9KSksIEMoImRkZGQiLCAwLCAwLCAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzKHRoaXMsIGUpIH0pKSwgQygiZSIsIDAsIDAsICJ3ZWVrZGF5IiksIEMoIkUiLCAwLCAwLCAiaXNvV2Vla2RheSIpLCBMKCJkYXkiLCAiZCIpLCBMKCJ3ZWVrZGF5IiwgImUiKSwgTCgiaXNvV2Vla2RheSIsICJFIiksIEEoImRheSIsIDExKSwgQSgid2Vla2RheSIsIDExKSwgQSgiaXNvV2Vla2RheSIsIDExKSwgY2UoImQiLCB0ZSksIGNlKCJlIiwgdGUpLCBjZSgiRSIsIHRlKSwgY2UoImRkIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0LndlZWtkYXlzTWluUmVnZXgoZSkgfSkpLCBjZSgiZGRkIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0LndlZWtkYXlzU2hvcnRSZWdleChlKSB9KSksIGNlKCJkZGRkIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0LndlZWtkYXlzUmVnZXgoZSkgfSkpLCBnZShbImRkIiwgImRkZCIsICJkZGRkIl0sIChmdW5jdGlvbiAoZSwgdCwgbiwgcykgeyB2YXIgaSA9IG4uX2xvY2FsZS53ZWVrZGF5c1BhcnNlKGUsIHMsIG4uX3N0cmljdCk7IG51bGwgIT0gaSA/IHQuZCA9IGkgOiBmKG4pLmludmFsaWRXZWVrZGF5ID0gZTsgfSkpLCBnZShbImQiLCAiZSIsICJFIl0sIChmdW5jdGlvbiAoZSwgdCwgbiwgcykgeyB0W3NdID0gWihlKTsgfSkpOyB2YXIgVmUgPSAiU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXkiLnNwbGl0KCJfIiksIEdlID0gIlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSwgRWUgPSAiU3VfTW9fVHVfV2VfVGhfRnJfU2EiLnNwbGl0KCJfIiksIEFlID0gZGUsIGplID0gZGUsIEllID0gZGU7IGZ1bmN0aW9uIFplKGUsIHQsIG4pIHsgdmFyIHMsIGksIHIsIGEgPSBlLnRvTG9jYWxlTG93ZXJDYXNlKCk7IGlmICghdGhpcy5fd2Vla2RheXNQYXJzZSkgZm9yICh0aGlzLl93ZWVrZGF5c1BhcnNlID0gW10sIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSA9IFtdLCB0aGlzLl9taW5XZWVrZGF5c1BhcnNlID0gW10sIHMgPSAwOyBzIDwgNzsgKytzKXIgPSBjKFsyZTMsIDFdKS5kYXkocyksIHRoaXMuX21pbldlZWtkYXlzUGFyc2Vbc10gPSB0aGlzLndlZWtkYXlzTWluKHIsICIiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLCB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2Vbc10gPSB0aGlzLndlZWtkYXlzU2hvcnQociwgIiIpLnRvTG9jYWxlTG93ZXJDYXNlKCksIHRoaXMuX3dlZWtkYXlzUGFyc2Vbc10gPSB0aGlzLndlZWtkYXlzKHIsICIiKS50b0xvY2FsZUxvd2VyQ2FzZSgpOyByZXR1cm4gbiA/ICJkZGRkIiA9PT0gdCA/IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgYSkpID8gaSA6IG51bGwgOiAiZGRkIiA9PT0gdCA/IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBhKSkgPyBpIDogbnVsbCA6IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgYSkpID8gaSA6IG51bGwgOiAiZGRkZCIgPT09IHQgPyAtMSAhPT0gKGkgPSBwZS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsIGEpKSB8fCAtMSAhPT0gKGkgPSBwZS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSwgYSkpIHx8IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgYSkpID8gaSA6IG51bGwgOiAiZGRkIiA9PT0gdCA/IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBhKSkgfHwgLTEgIT09IChpID0gcGUuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLCBhKSkgfHwgLTEgIT09IChpID0gcGUuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLCBhKSkgPyBpIDogbnVsbCA6IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgYSkpIHx8IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgYSkpIHx8IC0xICE9PSAoaSA9IHBlLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBhKSkgPyBpIDogbnVsbCB9IGZ1bmN0aW9uIHplKCkgeyBmdW5jdGlvbiBlKGUsIHQpIHsgcmV0dXJuIHQubGVuZ3RoIC0gZS5sZW5ndGggfSB2YXIgdCwgbiwgcywgaSwgciwgYSA9IFtdLCBvID0gW10sIHUgPSBbXSwgbCA9IFtdOyBmb3IgKHQgPSAwOyB0IDwgNzsgdCsrKW4gPSBjKFsyZTMsIDFdKS5kYXkodCksIHMgPSBtZSh0aGlzLndlZWtkYXlzTWluKG4sICIiKSksIGkgPSBtZSh0aGlzLndlZWtkYXlzU2hvcnQobiwgIiIpKSwgciA9IG1lKHRoaXMud2Vla2RheXMobiwgIiIpKSwgYS5wdXNoKHMpLCBvLnB1c2goaSksIHUucHVzaChyKSwgbC5wdXNoKHMpLCBsLnB1c2goaSksIGwucHVzaChyKTsgYS5zb3J0KGUpLCBvLnNvcnQoZSksIHUuc29ydChlKSwgbC5zb3J0KGUpLCB0aGlzLl93ZWVrZGF5c1JlZ2V4ID0gbmV3IFJlZ0V4cCgiXigiICsgbC5qb2luKCJ8IikgKyAiKSIsICJpIiksIHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCA9IHRoaXMuX3dlZWtkYXlzUmVnZXgsIHRoaXMuX3dlZWtkYXlzTWluUmVnZXggPSB0aGlzLl93ZWVrZGF5c1JlZ2V4LCB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgiXigiICsgdS5qb2luKCJ8IikgKyAiKSIsICJpIiksIHRoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoIl4oIiArIG8uam9pbigifCIpICsgIikiLCAiaSIpLCB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgiXigiICsgYS5qb2luKCJ8IikgKyAiKSIsICJpIik7IH0gZnVuY3Rpb24gJGUoKSB7IHJldHVybiB0aGlzLmhvdXJzKCkgJSAxMiB8fCAxMiB9IGZ1bmN0aW9uIHFlKGUsIHQpIHsgQyhlLCAwLCAwLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubWVyaWRpZW0odGhpcy5ob3VycygpLCB0aGlzLm1pbnV0ZXMoKSwgdCkgfSkpOyB9IGZ1bmN0aW9uIEJlKGUsIHQpIHsgcmV0dXJuIHQuX21lcmlkaWVtUGFyc2UgfSBDKCJIIiwgWyJISCIsIDJdLCAwLCAiaG91ciIpLCBDKCJoIiwgWyJoaCIsIDJdLCAwLCAkZSksIEMoImsiLCBbImtrIiwgMl0sIDAsIChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmhvdXJzKCkgfHwgMjQgfSkpLCBDKCJobW0iLCAwLCAwLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gIiIgKyAkZS5hcHBseSh0aGlzKSArIFQodGhpcy5taW51dGVzKCksIDIpIH0pKSwgQygiaG1tc3MiLCAwLCAwLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gIiIgKyAkZS5hcHBseSh0aGlzKSArIFQodGhpcy5taW51dGVzKCksIDIpICsgVCh0aGlzLnNlY29uZHMoKSwgMikgfSkpLCBDKCJIbW0iLCAwLCAwLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gIiIgKyB0aGlzLmhvdXJzKCkgKyBUKHRoaXMubWludXRlcygpLCAyKSB9KSksIEMoIkhtbXNzIiwgMCwgMCwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuICIiICsgdGhpcy5ob3VycygpICsgVCh0aGlzLm1pbnV0ZXMoKSwgMikgKyBUKHRoaXMuc2Vjb25kcygpLCAyKSB9KSksIHFlKCJhIiwgITApLCBxZSgiQSIsICExKSwgTCgiaG91ciIsICJoIiksIEEoImhvdXIiLCAxMyksIGNlKCJhIiwgQmUpLCBjZSgiQSIsIEJlKSwgY2UoIkgiLCB0ZSksIGNlKCJoIiwgdGUpLCBjZSgiayIsIHRlKSwgY2UoIkhIIiwgdGUsIFEpLCBjZSgiaGgiLCB0ZSwgUSksIGNlKCJrayIsIHRlLCBRKSwgY2UoImhtbSIsIG5lKSwgY2UoImhtbXNzIiwgc2UpLCBjZSgiSG1tIiwgbmUpLCBjZSgiSG1tc3MiLCBzZSksIHllKFsiSCIsICJISCJdLCAzKSwgeWUoWyJrIiwgImtrIl0sIChmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcyA9IFooZSk7IHRbM10gPSAyNCA9PT0gcyA/IDAgOiBzOyB9KSksIHllKFsiYSIsICJBIl0sIChmdW5jdGlvbiAoZSwgdCwgbikgeyBuLl9pc1BtID0gbi5fbG9jYWxlLmlzUE0oZSksIG4uX21lcmlkaWVtID0gZTsgfSkpLCB5ZShbImgiLCAiaGgiXSwgKGZ1bmN0aW9uIChlLCB0LCBuKSB7IHRbM10gPSBaKGUpLCBmKG4pLmJpZ0hvdXIgPSAhMDsgfSkpLCB5ZSgiaG1tIiwgKGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciBzID0gZS5sZW5ndGggLSAyOyB0WzNdID0gWihlLnN1YnN0cigwLCBzKSksIHRbNF0gPSBaKGUuc3Vic3RyKHMpKSwgZihuKS5iaWdIb3VyID0gITA7IH0pKSwgeWUoImhtbXNzIiwgKGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciBzID0gZS5sZW5ndGggLSA0LCBpID0gZS5sZW5ndGggLSAyOyB0WzNdID0gWihlLnN1YnN0cigwLCBzKSksIHRbNF0gPSBaKGUuc3Vic3RyKHMsIDIpKSwgdFs1XSA9IFooZS5zdWJzdHIoaSkpLCBmKG4pLmJpZ0hvdXIgPSAhMDsgfSkpLCB5ZSgiSG1tIiwgKGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciBzID0gZS5sZW5ndGggLSAyOyB0WzNdID0gWihlLnN1YnN0cigwLCBzKSksIHRbNF0gPSBaKGUuc3Vic3RyKHMpKTsgfSkpLCB5ZSgiSG1tc3MiLCAoZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHMgPSBlLmxlbmd0aCAtIDQsIGkgPSBlLmxlbmd0aCAtIDI7IHRbM10gPSBaKGUuc3Vic3RyKDAsIHMpKSwgdFs0XSA9IFooZS5zdWJzdHIocywgMikpLCB0WzVdID0gWihlLnN1YnN0cihpKSk7IH0pKTsgdmFyIEplID0geigiSG91cnMiLCAhMCk7IHZhciBRZSwgWGUgPSB7IGNhbGVuZGFyOiB7IHNhbWVEYXk6ICJbVG9kYXkgYXRdIExUIiwgbmV4dERheTogIltUb21vcnJvdyBhdF0gTFQiLCBuZXh0V2VlazogImRkZGQgW2F0XSBMVCIsIGxhc3REYXk6ICJbWWVzdGVyZGF5IGF0XSBMVCIsIGxhc3RXZWVrOiAiW0xhc3RdIGRkZGQgW2F0XSBMVCIsIHNhbWVFbHNlOiAiTCIgfSwgbG9uZ0RhdGVGb3JtYXQ6IHsgTFRTOiAiaDptbTpzcyBBIiwgTFQ6ICJoOm1tIEEiLCBMOiAiTU0vREQvWVlZWSIsIExMOiAiTU1NTSBELCBZWVlZIiwgTExMOiAiTU1NTSBELCBZWVlZIGg6bW0gQSIsIExMTEw6ICJkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBIiB9LCBpbnZhbGlkRGF0ZTogIkludmFsaWQgZGF0ZSIsIG9yZGluYWw6ICIlZCIsIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cZHsxLDJ9LywgcmVsYXRpdmVUaW1lOiB7IGZ1dHVyZTogImluICVzIiwgcGFzdDogIiVzIGFnbyIsIHM6ICJhIGZldyBzZWNvbmRzIiwgc3M6ICIlZCBzZWNvbmRzIiwgbTogImEgbWludXRlIiwgbW06ICIlZCBtaW51dGVzIiwgaDogImFuIGhvdXIiLCBoaDogIiVkIGhvdXJzIiwgZDogImEgZGF5IiwgZGQ6ICIlZCBkYXlzIiwgdzogImEgd2VlayIsIHd3OiAiJWQgd2Vla3MiLCBNOiAiYSBtb250aCIsIE1NOiAiJWQgbW9udGhzIiwgeTogImEgeWVhciIsIHl5OiAiJWQgeWVhcnMiIH0sIG1vbnRoczoga2UsIG1vbnRoc1Nob3J0OiBNZSwgd2VlazogeyBkb3c6IDAsIGRveTogNiB9LCB3ZWVrZGF5czogVmUsIHdlZWtkYXlzTWluOiBFZSwgd2Vla2RheXNTaG9ydDogR2UsIG1lcmlkaWVtUGFyc2U6IC9bYXBdXC4/bT9cLj8vaSB9LCBLZSA9IHt9LCBldCA9IHt9OyBmdW5jdGlvbiB0dChlLCB0KSB7IHZhciBuLCBzID0gTWF0aC5taW4oZS5sZW5ndGgsIHQubGVuZ3RoKTsgZm9yIChuID0gMDsgbiA8IHM7IG4gKz0gMSlpZiAoZVtuXSAhPT0gdFtuXSkgcmV0dXJuIG47IHJldHVybiBzIH0gZnVuY3Rpb24gbnQoZSkgeyByZXR1cm4gZSA/IGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCJfIiwgIi0iKSA6IGUgfSBmdW5jdGlvbiBzdChlKSB7IHZhciB0ID0gbnVsbDsgaWYgKHZvaWQgMCA9PT0gS2VbZV0gJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIG1vZHVsZSAmJiBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMpIHRyeSB7IHQgPSBRZS5fYWJiciwgcmVxdWlyZSgiLi9sb2NhbGUvIiArIGUpLCBpdCh0KTsgfSBjYXRjaCAodCkgeyBLZVtlXSA9IG51bGw7IH0gcmV0dXJuIEtlW2VdIH0gZnVuY3Rpb24gaXQoZSwgdCkgeyB2YXIgbjsgcmV0dXJuIGUgJiYgKChuID0gbyh0KSA/IGF0KGUpIDogcnQoZSwgdCkpID8gUWUgPSBuIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIGNvbnNvbGUgJiYgY29uc29sZS53YXJuICYmIGNvbnNvbGUud2FybigiTG9jYWxlICIgKyBlICsgIiBub3QgZm91bmQuIERpZCB5b3UgZm9yZ2V0IHRvIGxvYWQgaXQ/IikpLCBRZS5fYWJiciB9IGZ1bmN0aW9uIHJ0KGUsIHQpIHsgaWYgKG51bGwgIT09IHQpIHsgdmFyIG4sIHMgPSBYZTsgaWYgKHQuYWJiciA9IGUsIG51bGwgIT0gS2VbZV0pIFkoImRlZmluZUxvY2FsZU92ZXJyaWRlIiwgInVzZSBtb21lbnQudXBkYXRlTG9jYWxlKGxvY2FsZU5hbWUsIGNvbmZpZykgdG8gY2hhbmdlIGFuIGV4aXN0aW5nIGxvY2FsZS4gbW9tZW50LmRlZmluZUxvY2FsZShsb2NhbGVOYW1lLCBjb25maWcpIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIGNyZWF0aW5nIGEgbmV3IGxvY2FsZSBTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9kZWZpbmUtbG9jYWxlLyBmb3IgbW9yZSBpbmZvLiIpLCBzID0gS2VbZV0uX2NvbmZpZzsgZWxzZSBpZiAobnVsbCAhPSB0LnBhcmVudExvY2FsZSkgaWYgKG51bGwgIT0gS2VbdC5wYXJlbnRMb2NhbGVdKSBzID0gS2VbdC5wYXJlbnRMb2NhbGVdLl9jb25maWc7IGVsc2UgeyBpZiAobnVsbCA9PSAobiA9IHN0KHQucGFyZW50TG9jYWxlKSkpIHJldHVybiBldFt0LnBhcmVudExvY2FsZV0gfHwgKGV0W3QucGFyZW50TG9jYWxlXSA9IFtdKSwgZXRbdC5wYXJlbnRMb2NhbGVdLnB1c2goeyBuYW1lOiBlLCBjb25maWc6IHQgfSksIG51bGw7IHMgPSBuLl9jb25maWc7IH0gcmV0dXJuIEtlW2VdID0gbmV3IHgoYihzLCB0KSksIGV0W2VdICYmIGV0W2VdLmZvckVhY2goKGZ1bmN0aW9uIChlKSB7IHJ0KGUubmFtZSwgZS5jb25maWcpOyB9KSksIGl0KGUpLCBLZVtlXSB9IHJldHVybiBkZWxldGUgS2VbZV0sIG51bGwgfSBmdW5jdGlvbiBhdChlKSB7IHZhciB0OyBpZiAoZSAmJiBlLl9sb2NhbGUgJiYgZS5fbG9jYWxlLl9hYmJyICYmIChlID0gZS5fbG9jYWxlLl9hYmJyKSwgIWUpIHJldHVybiBRZTsgaWYgKCFzKGUpKSB7IGlmICh0ID0gc3QoZSkpIHJldHVybiB0OyBlID0gW2VdOyB9IHJldHVybiBmdW5jdGlvbiAoZSkgeyBmb3IgKHZhciB0LCBuLCBzLCBpLCByID0gMDsgciA8IGUubGVuZ3RoOykgeyBmb3IgKHQgPSAoaSA9IG50KGVbcl0pLnNwbGl0KCItIikpLmxlbmd0aCwgbiA9IChuID0gbnQoZVtyICsgMV0pKSA/IG4uc3BsaXQoIi0iKSA6IG51bGw7IHQgPiAwOykgeyBpZiAocyA9IHN0KGkuc2xpY2UoMCwgdCkuam9pbigiLSIpKSkgcmV0dXJuIHM7IGlmIChuICYmIG4ubGVuZ3RoID49IHQgJiYgdHQoaSwgbikgPj0gdCAtIDEpIGJyZWFrOyB0LS07IH0gcisrOyB9IHJldHVybiBRZSB9KGUpIH0gZnVuY3Rpb24gb3QoZSkgeyB2YXIgdCwgbiA9IGUuX2E7IHJldHVybiBuICYmIC0yID09PSBmKGUpLm92ZXJmbG93ICYmICh0ID0gblsxXSA8IDAgfHwgblsxXSA+IDExID8gMSA6IG5bMl0gPCAxIHx8IG5bMl0gPiB2ZShuWzBdLCBuWzFdKSA/IDIgOiBuWzNdIDwgMCB8fCBuWzNdID4gMjQgfHwgMjQgPT09IG5bM10gJiYgKDAgIT09IG5bNF0gfHwgMCAhPT0gbls1XSB8fCAwICE9PSBuWzZdKSA/IDMgOiBuWzRdIDwgMCB8fCBuWzRdID4gNTkgPyA0IDogbls1XSA8IDAgfHwgbls1XSA+IDU5ID8gNSA6IG5bNl0gPCAwIHx8IG5bNl0gPiA5OTkgPyA2IDogLTEsIGYoZSkuX292ZXJmbG93RGF5T2ZZZWFyICYmICh0IDwgMCB8fCB0ID4gMikgJiYgKHQgPSAyKSwgZihlKS5fb3ZlcmZsb3dXZWVrcyAmJiAtMSA9PT0gdCAmJiAodCA9IDcpLCBmKGUpLl9vdmVyZmxvd1dlZWtkYXkgJiYgLTEgPT09IHQgJiYgKHQgPSA4KSwgZihlKS5vdmVyZmxvdyA9IHQpLCBlIH0gdmFyIHV0ID0gL15ccyooKD86WystXVxkezZ9fFxkezR9KS0oPzpcZFxkLVxkXGR8V1xkXGQtXGR8V1xkXGR8XGRcZFxkfFxkXGQpKSg/OihUfCApKFxkXGQoPzo6XGRcZCg/OjpcZFxkKD86Wy4sXVxkKyk/KT8pPykoWystXVxkXGQoPzo6P1xkXGQpP3xccypaKT8pPyQvLCBsdCA9IC9eXHMqKCg/OlsrLV1cZHs2fXxcZHs0fSkoPzpcZFxkXGRcZHxXXGRcZFxkfFdcZFxkfFxkXGRcZHxcZFxkfCkpKD86KFR8ICkoXGRcZCg/OlxkXGQoPzpcZFxkKD86Wy4sXVxkKyk/KT8pPykoWystXVxkXGQoPzo6P1xkXGQpP3xccypaKT8pPyQvLCBodCA9IC9afFsrLV1cZFxkKD86Oj9cZFxkKT8vLCBkdCA9IFtbIllZWVlZWS1NTS1ERCIsIC9bKy1dXGR7Nn0tXGRcZC1cZFxkL10sIFsiWVlZWS1NTS1ERCIsIC9cZHs0fS1cZFxkLVxkXGQvXSwgWyJHR0dHLVtXXVdXLUUiLCAvXGR7NH0tV1xkXGQtXGQvXSwgWyJHR0dHLVtXXVdXIiwgL1xkezR9LVdcZFxkLywgITFdLCBbIllZWVktREREIiwgL1xkezR9LVxkezN9L10sIFsiWVlZWS1NTSIsIC9cZHs0fS1cZFxkLywgITFdLCBbIllZWVlZWU1NREQiLCAvWystXVxkezEwfS9dLCBbIllZWVlNTUREIiwgL1xkezh9L10sIFsiR0dHR1tXXVdXRSIsIC9cZHs0fVdcZHszfS9dLCBbIkdHR0dbV11XVyIsIC9cZHs0fVdcZHsyfS8sICExXSwgWyJZWVlZREREIiwgL1xkezd9L10sIFsiWVlZWU1NIiwgL1xkezZ9LywgITFdLCBbIllZWVkiLCAvXGR7NH0vLCAhMV1dLCBjdCA9IFtbIkhIOm1tOnNzLlNTU1MiLCAvXGRcZDpcZFxkOlxkXGRcLlxkKy9dLCBbIkhIOm1tOnNzLFNTU1MiLCAvXGRcZDpcZFxkOlxkXGQsXGQrL10sIFsiSEg6bW06c3MiLCAvXGRcZDpcZFxkOlxkXGQvXSwgWyJISDptbSIsIC9cZFxkOlxkXGQvXSwgWyJISG1tc3MuU1NTUyIsIC9cZFxkXGRcZFxkXGRcLlxkKy9dLCBbIkhIbW1zcyxTU1NTIiwgL1xkXGRcZFxkXGRcZCxcZCsvXSwgWyJISG1tc3MiLCAvXGRcZFxkXGRcZFxkL10sIFsiSEhtbSIsIC9cZFxkXGRcZC9dLCBbIkhIIiwgL1xkXGQvXV0sIGZ0ID0gL15cLz9EYXRlXCgoLT9cZCspL2ksIG10ID0gL14oPzooTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSw/XHMpPyhcZHsxLDJ9KVxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxzKFxkezIsNH0pXHMoXGRcZCk6KFxkXGQpKD86OihcZFxkKSk/XHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KFsrLV1cZHs0fSkpJC8sIF90ID0geyBVVDogMCwgR01UOiAwLCBFRFQ6IC0yNDAsIEVTVDogLTMwMCwgQ0RUOiAtMzAwLCBDU1Q6IC0zNjAsIE1EVDogLTM2MCwgTVNUOiAtNDIwLCBQRFQ6IC00MjAsIFBTVDogLTQ4MCB9OyBmdW5jdGlvbiB5dChlKSB7IHZhciB0LCBuLCBzLCBpLCByLCBhLCBvID0gZS5faSwgdSA9IHV0LmV4ZWMobykgfHwgbHQuZXhlYyhvKTsgaWYgKHUpIHsgZm9yIChmKGUpLmlzbyA9ICEwLCB0ID0gMCwgbiA9IGR0Lmxlbmd0aDsgdCA8IG47IHQrKylpZiAoZHRbdF1bMV0uZXhlYyh1WzFdKSkgeyBpID0gZHRbdF1bMF0sIHMgPSAhMSAhPT0gZHRbdF1bMl07IGJyZWFrIH0gaWYgKG51bGwgPT0gaSkgcmV0dXJuIHZvaWQgKGUuX2lzVmFsaWQgPSAhMSk7IGlmICh1WzNdKSB7IGZvciAodCA9IDAsIG4gPSBjdC5sZW5ndGg7IHQgPCBuOyB0KyspaWYgKGN0W3RdWzFdLmV4ZWModVszXSkpIHsgciA9ICh1WzJdIHx8ICIgIikgKyBjdFt0XVswXTsgYnJlYWsgfSBpZiAobnVsbCA9PSByKSByZXR1cm4gdm9pZCAoZS5faXNWYWxpZCA9ICExKSB9IGlmICghcyAmJiBudWxsICE9IHIpIHJldHVybiB2b2lkIChlLl9pc1ZhbGlkID0gITEpOyBpZiAodVs0XSkgeyBpZiAoIWh0LmV4ZWModVs0XSkpIHJldHVybiB2b2lkIChlLl9pc1ZhbGlkID0gITEpOyBhID0gIloiOyB9IGUuX2YgPSBpICsgKHIgfHwgIiIpICsgKGEgfHwgIiIpLCBrdChlKTsgfSBlbHNlIGUuX2lzVmFsaWQgPSAhMTsgfSBmdW5jdGlvbiBndChlKSB7IHZhciB0ID0gcGFyc2VJbnQoZSwgMTApOyByZXR1cm4gdCA8PSA0OSA/IDJlMyArIHQgOiB0IDw9IDk5OSA/IDE5MDAgKyB0IDogdCB9IGZ1bmN0aW9uIHd0KGUpIHsgdmFyIHQsIG4sIHMsIGksIHIsIGEsIG8sIHUsIGwgPSBtdC5leGVjKGUuX2kucmVwbGFjZSgvXChbXildKlwpfFtcblx0XS9nLCAiICIpLnJlcGxhY2UoLyhcc1xzKykvZywgIiAiKS5yZXBsYWNlKC9eXHNccyovLCAiIikucmVwbGFjZSgvXHNccyokLywgIiIpKTsgaWYgKGwpIHsgaWYgKG4gPSBsWzRdLCBzID0gbFszXSwgaSA9IGxbMl0sIHIgPSBsWzVdLCBhID0gbFs2XSwgbyA9IGxbN10sIHUgPSBbZ3QobiksIE1lLmluZGV4T2YocyksIHBhcnNlSW50KGksIDEwKSwgcGFyc2VJbnQociwgMTApLCBwYXJzZUludChhLCAxMCldLCBvICYmIHUucHVzaChwYXJzZUludChvLCAxMCkpLCB0ID0gdSwgIWZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiAhZSB8fCBHZS5pbmRleE9mKGUpID09PSBuZXcgRGF0ZSh0WzBdLCB0WzFdLCB0WzJdKS5nZXREYXkoKSB8fCAoZihuKS53ZWVrZGF5TWlzbWF0Y2ggPSAhMCwgbi5faXNWYWxpZCA9ICExLCAhMSkgfShsWzFdLCB0LCBlKSkgcmV0dXJuOyBlLl9hID0gdCwgZS5fdHptID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgaWYgKGUpIHJldHVybiBfdFtlXTsgaWYgKHQpIHJldHVybiAwOyB2YXIgcyA9IHBhcnNlSW50KG4sIDEwKSwgaSA9IHMgJSAxMDA7IHJldHVybiAocyAtIGkpIC8gMTAwICogNjAgKyBpIH0obFs4XSwgbFs5XSwgbFsxMF0pLCBlLl9kID0gV2UuYXBwbHkobnVsbCwgZS5fYSksIGUuX2Quc2V0VVRDTWludXRlcyhlLl9kLmdldFVUQ01pbnV0ZXMoKSAtIGUuX3R6bSksIGYoZSkucmZjMjgyMiA9ICEwOyB9IGVsc2UgZS5faXNWYWxpZCA9ICExOyB9IGZ1bmN0aW9uIHB0KGUsIHQsIG4pIHsgcmV0dXJuIG51bGwgIT0gZSA/IGUgOiBudWxsICE9IHQgPyB0IDogbiB9IGZ1bmN0aW9uIHZ0KGUpIHsgdmFyIHQsIHMsIGksIHIsIGEsIG8gPSBbXTsgaWYgKCFlLl9kKSB7IGZvciAoaSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gbmV3IERhdGUobi5ub3coKSk7IHJldHVybiBlLl91c2VVVEMgPyBbdC5nZXRVVENGdWxsWWVhcigpLCB0LmdldFVUQ01vbnRoKCksIHQuZ2V0VVRDRGF0ZSgpXSA6IFt0LmdldEZ1bGxZZWFyKCksIHQuZ2V0TW9udGgoKSwgdC5nZXREYXRlKCldIH0oZSksIGUuX3cgJiYgbnVsbCA9PSBlLl9hWzJdICYmIG51bGwgPT0gZS5fYVsxXSAmJiBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgcywgaSwgciwgYSwgbywgdSwgbDsgbnVsbCAhPSAodCA9IGUuX3cpLkdHIHx8IG51bGwgIT0gdC5XIHx8IG51bGwgIT0gdC5FID8gKHIgPSAxLCBhID0gNCwgbiA9IHB0KHQuR0csIGUuX2FbMF0sIFVlKFN0KCksIDEsIDQpLnllYXIpLCBzID0gcHQodC5XLCAxKSwgKChpID0gcHQodC5FLCAxKSkgPCAxIHx8IGkgPiA3KSAmJiAodSA9ICEwKSkgOiAociA9IGUuX2xvY2FsZS5fd2Vlay5kb3csIGEgPSBlLl9sb2NhbGUuX3dlZWsuZG95LCBsID0gVWUoU3QoKSwgciwgYSksIG4gPSBwdCh0LmdnLCBlLl9hWzBdLCBsLnllYXIpLCBzID0gcHQodC53LCBsLndlZWspLCBudWxsICE9IHQuZCA/ICgoaSA9IHQuZCkgPCAwIHx8IGkgPiA2KSAmJiAodSA9ICEwKSA6IG51bGwgIT0gdC5lID8gKGkgPSB0LmUgKyByLCAodC5lIDwgMCB8fCB0LmUgPiA2KSAmJiAodSA9ICEwKSkgOiBpID0gcik7IHMgPCAxIHx8IHMgPiBGZShuLCByLCBhKSA/IGYoZSkuX292ZXJmbG93V2Vla3MgPSAhMCA6IG51bGwgIT0gdSA/IGYoZSkuX292ZXJmbG93V2Vla2RheSA9ICEwIDogKG8gPSBIZShuLCBzLCBpLCByLCBhKSwgZS5fYVswXSA9IG8ueWVhciwgZS5fZGF5T2ZZZWFyID0gby5kYXlPZlllYXIpOyB9KGUpLCBudWxsICE9IGUuX2RheU9mWWVhciAmJiAoYSA9IHB0KGUuX2FbMF0sIGlbMF0pLCAoZS5fZGF5T2ZZZWFyID4gTmUoYSkgfHwgMCA9PT0gZS5fZGF5T2ZZZWFyKSAmJiAoZihlKS5fb3ZlcmZsb3dEYXlPZlllYXIgPSAhMCksIHMgPSBXZShhLCAwLCBlLl9kYXlPZlllYXIpLCBlLl9hWzFdID0gcy5nZXRVVENNb250aCgpLCBlLl9hWzJdID0gcy5nZXRVVENEYXRlKCkpLCB0ID0gMDsgdCA8IDMgJiYgbnVsbCA9PSBlLl9hW3RdOyArK3QpZS5fYVt0XSA9IG9bdF0gPSBpW3RdOyBmb3IgKDsgdCA8IDc7IHQrKyllLl9hW3RdID0gb1t0XSA9IG51bGwgPT0gZS5fYVt0XSA/IDIgPT09IHQgPyAxIDogMCA6IGUuX2FbdF07IDI0ID09PSBlLl9hWzNdICYmIDAgPT09IGUuX2FbNF0gJiYgMCA9PT0gZS5fYVs1XSAmJiAwID09PSBlLl9hWzZdICYmIChlLl9uZXh0RGF5ID0gITAsIGUuX2FbM10gPSAwKSwgZS5fZCA9IChlLl91c2VVVEMgPyBXZSA6IFJlKS5hcHBseShudWxsLCBvKSwgciA9IGUuX3VzZVVUQyA/IGUuX2QuZ2V0VVRDRGF5KCkgOiBlLl9kLmdldERheSgpLCBudWxsICE9IGUuX3R6bSAmJiBlLl9kLnNldFVUQ01pbnV0ZXMoZS5fZC5nZXRVVENNaW51dGVzKCkgLSBlLl90em0pLCBlLl9uZXh0RGF5ICYmIChlLl9hWzNdID0gMjQpLCBlLl93ICYmIHZvaWQgMCAhPT0gZS5fdy5kICYmIGUuX3cuZCAhPT0gciAmJiAoZihlKS53ZWVrZGF5TWlzbWF0Y2ggPSAhMCk7IH0gfSBmdW5jdGlvbiBrdChlKSB7IGlmIChlLl9mICE9PSBuLklTT184NjAxKSBpZiAoZS5fZiAhPT0gbi5SRkNfMjgyMikgeyBlLl9hID0gW10sIGYoZSkuZW1wdHkgPSAhMDsgdmFyIHQsIHMsIGksIHIsIGEsIG8sIHUgPSAiIiArIGUuX2ksIGwgPSB1Lmxlbmd0aCwgaCA9IDA7IGZvciAoaSA9IFUoZS5fZiwgZS5fbG9jYWxlKS5tYXRjaChOKSB8fCBbXSwgdCA9IDA7IHQgPCBpLmxlbmd0aDsgdCsrKXIgPSBpW3RdLCAocyA9ICh1Lm1hdGNoKGZlKHIsIGUpKSB8fCBbXSlbMF0pICYmICgoYSA9IHUuc3Vic3RyKDAsIHUuaW5kZXhPZihzKSkpLmxlbmd0aCA+IDAgJiYgZihlKS51bnVzZWRJbnB1dC5wdXNoKGEpLCB1ID0gdS5zbGljZSh1LmluZGV4T2YocykgKyBzLmxlbmd0aCksIGggKz0gcy5sZW5ndGgpLCBXW3JdID8gKHMgPyBmKGUpLmVtcHR5ID0gITEgOiBmKGUpLnVudXNlZFRva2Vucy5wdXNoKHIpLCB3ZShyLCBzLCBlKSkgOiBlLl9zdHJpY3QgJiYgIXMgJiYgZihlKS51bnVzZWRUb2tlbnMucHVzaChyKTsgZihlKS5jaGFyc0xlZnRPdmVyID0gbCAtIGgsIHUubGVuZ3RoID4gMCAmJiBmKGUpLnVudXNlZElucHV0LnB1c2godSksIGUuX2FbM10gPD0gMTIgJiYgITAgPT09IGYoZSkuYmlnSG91ciAmJiBlLl9hWzNdID4gMCAmJiAoZihlKS5iaWdIb3VyID0gdm9pZCAwKSwgZihlKS5wYXJzZWREYXRlUGFydHMgPSBlLl9hLnNsaWNlKDApLCBmKGUpLm1lcmlkaWVtID0gZS5fbWVyaWRpZW0sIGUuX2FbM10gPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgczsgaWYgKG51bGwgPT0gbikgcmV0dXJuIHQ7IHJldHVybiBudWxsICE9IGUubWVyaWRpZW1Ib3VyID8gZS5tZXJpZGllbUhvdXIodCwgbikgOiBudWxsICE9IGUuaXNQTSA/ICgocyA9IGUuaXNQTShuKSkgJiYgdCA8IDEyICYmICh0ICs9IDEyKSwgcyB8fCAxMiAhPT0gdCB8fCAodCA9IDApLCB0KSA6IHQgfShlLl9sb2NhbGUsIGUuX2FbM10sIGUuX21lcmlkaWVtKSwgbnVsbCAhPT0gKG8gPSBmKGUpLmVyYSkgJiYgKGUuX2FbMF0gPSBlLl9sb2NhbGUuZXJhc0NvbnZlcnRZZWFyKG8sIGUuX2FbMF0pKSwgdnQoZSksIG90KGUpOyB9IGVsc2Ugd3QoZSk7IGVsc2UgeXQoZSk7IH0gZnVuY3Rpb24gTXQoZSkgeyB2YXIgdCA9IGUuX2ksIHIgPSBlLl9mOyByZXR1cm4gZS5fbG9jYWxlID0gZS5fbG9jYWxlIHx8IGF0KGUuX2wpLCBudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gciAmJiAiIiA9PT0gdCA/IF8oeyBudWxsSW5wdXQ6ICEwIH0pIDogKCJzdHJpbmciID09IHR5cGVvZiB0ICYmIChlLl9pID0gdCA9IGUuX2xvY2FsZS5wcmVwYXJzZSh0KSksIHYodCkgPyBuZXcgcChvdCh0KSkgOiAobCh0KSA/IGUuX2QgPSB0IDogcyhyKSA/IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCBzLCBpLCByLCBhLCBvID0gITE7IGlmICgwID09PSBlLl9mLmxlbmd0aCkgcmV0dXJuIGYoZSkuaW52YWxpZEZvcm1hdCA9ICEwLCB2b2lkIChlLl9kID0gbmV3IERhdGUoTmFOKSk7IGZvciAoaSA9IDA7IGkgPCBlLl9mLmxlbmd0aDsgaSsrKXIgPSAwLCBhID0gITEsIHQgPSB3KHt9LCBlKSwgbnVsbCAhPSBlLl91c2VVVEMgJiYgKHQuX3VzZVVUQyA9IGUuX3VzZVVUQyksIHQuX2YgPSBlLl9mW2ldLCBrdCh0KSwgbSh0KSAmJiAoYSA9ICEwKSwgciArPSBmKHQpLmNoYXJzTGVmdE92ZXIsIHIgKz0gMTAgKiBmKHQpLnVudXNlZFRva2Vucy5sZW5ndGgsIGYodCkuc2NvcmUgPSByLCBvID8gciA8IHMgJiYgKHMgPSByLCBuID0gdCkgOiAobnVsbCA9PSBzIHx8IHIgPCBzIHx8IGEpICYmIChzID0gciwgbiA9IHQsIGEgJiYgKG8gPSAhMCkpOyBkKGUsIG4gfHwgdCk7IH0oZSkgOiByID8ga3QoZSkgOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUuX2k7IG8odCkgPyBlLl9kID0gbmV3IERhdGUobi5ub3coKSkgOiBsKHQpID8gZS5fZCA9IG5ldyBEYXRlKHQudmFsdWVPZigpKSA6ICJzdHJpbmciID09IHR5cGVvZiB0ID8gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBmdC5leGVjKGUuX2kpOyBudWxsID09PSB0ID8gKHl0KGUpLCAhMSA9PT0gZS5faXNWYWxpZCAmJiAoZGVsZXRlIGUuX2lzVmFsaWQsIHd0KGUpLCAhMSA9PT0gZS5faXNWYWxpZCAmJiAoZGVsZXRlIGUuX2lzVmFsaWQsIGUuX3N0cmljdCA/IGUuX2lzVmFsaWQgPSAhMSA6IG4uY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soZSkpKSkgOiBlLl9kID0gbmV3IERhdGUoK3RbMV0pOyB9KGUpIDogcyh0KSA/IChlLl9hID0gaCh0LnNsaWNlKDApLCAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHBhcnNlSW50KGUsIDEwKSB9KSksIHZ0KGUpKSA6IGkodCkgPyBmdW5jdGlvbiAoZSkgeyBpZiAoIWUuX2QpIHsgdmFyIHQgPSBHKGUuX2kpLCBuID0gdm9pZCAwID09PSB0LmRheSA/IHQuZGF0ZSA6IHQuZGF5OyBlLl9hID0gaChbdC55ZWFyLCB0Lm1vbnRoLCBuLCB0LmhvdXIsIHQubWludXRlLCB0LnNlY29uZCwgdC5taWxsaXNlY29uZF0sIChmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSAmJiBwYXJzZUludChlLCAxMCkgfSkpLCB2dChlKTsgfSB9KGUpIDogdSh0KSA/IGUuX2QgPSBuZXcgRGF0ZSh0KSA6IG4uY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soZSk7IH0oZSksIG0oZSkgfHwgKGUuX2QgPSBudWxsKSwgZSkpIH0gZnVuY3Rpb24gRHQoZSwgdCwgbiwgciwgbykgeyB2YXIgdSwgbCA9IHt9OyByZXR1cm4gITAgIT09IHQgJiYgITEgIT09IHQgfHwgKHIgPSB0LCB0ID0gdm9pZCAwKSwgITAgIT09IG4gJiYgITEgIT09IG4gfHwgKHIgPSBuLCBuID0gdm9pZCAwKSwgKGkoZSkgJiYgYShlKSB8fCBzKGUpICYmIDAgPT09IGUubGVuZ3RoKSAmJiAoZSA9IHZvaWQgMCksIGwuX2lzQU1vbWVudE9iamVjdCA9ICEwLCBsLl91c2VVVEMgPSBsLl9pc1VUQyA9IG8sIGwuX2wgPSBuLCBsLl9pID0gZSwgbC5fZiA9IHQsIGwuX3N0cmljdCA9IHIsICh1ID0gbmV3IHAob3QoTXQobCkpKSkuX25leHREYXkgJiYgKHUuYWRkKDEsICJkIiksIHUuX25leHREYXkgPSB2b2lkIDApLCB1IH0gZnVuY3Rpb24gU3QoZSwgdCwgbiwgcykgeyByZXR1cm4gRHQoZSwgdCwgbiwgcywgITEpIH0gbi5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayA9IE0oInZhbHVlIHByb3ZpZGVkIGlzIG5vdCBpbiBhIHJlY29nbml6ZWQgUkZDMjgyMiBvciBJU08gZm9ybWF0LiBtb21lbnQgY29uc3RydWN0aW9uIGZhbGxzIGJhY2sgdG8ganMgRGF0ZSgpLCB3aGljaCBpcyBub3QgcmVsaWFibGUgYWNyb3NzIGFsbCBicm93c2VycyBhbmQgdmVyc2lvbnMuIE5vbiBSRkMyODIyL0lTTyBkYXRlIGZvcm1hdHMgYXJlIGRpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYW4gdXBjb21pbmcgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHJlZmVyIHRvIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvanMtZGF0ZS8gZm9yIG1vcmUgaW5mby4iLCAoZnVuY3Rpb24gKGUpIHsgZS5fZCA9IG5ldyBEYXRlKGUuX2kgKyAoZS5fdXNlVVRDID8gIiBVVEMiIDogIiIpKTsgfSkpLCBuLklTT184NjAxID0gZnVuY3Rpb24gKCkgeyB9LCBuLlJGQ18yODIyID0gZnVuY3Rpb24gKCkgeyB9OyB2YXIgWXQgPSBNKCJtb21lbnQoKS5taW4gaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5tYXggaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9taW4tbWF4LyIsIChmdW5jdGlvbiAoKSB7IHZhciBlID0gU3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgcmV0dXJuIHRoaXMuaXNWYWxpZCgpICYmIGUuaXNWYWxpZCgpID8gZSA8IHRoaXMgPyB0aGlzIDogZSA6IF8oKSB9KSksIE90ID0gTSgibW9tZW50KCkubWF4IGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC8iLCAoZnVuY3Rpb24gKCkgeyB2YXIgZSA9IFN0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IHJldHVybiB0aGlzLmlzVmFsaWQoKSAmJiBlLmlzVmFsaWQoKSA/IGUgPiB0aGlzID8gdGhpcyA6IGUgOiBfKCkgfSkpOyBmdW5jdGlvbiBidChlLCB0KSB7IHZhciBuLCBpOyBpZiAoMSA9PT0gdC5sZW5ndGggJiYgcyh0WzBdKSAmJiAodCA9IHRbMF0pLCAhdC5sZW5ndGgpIHJldHVybiBTdCgpOyBmb3IgKG4gPSB0WzBdLCBpID0gMTsgaSA8IHQubGVuZ3RoOyArK2kpdFtpXS5pc1ZhbGlkKCkgJiYgIXRbaV1bZV0obikgfHwgKG4gPSB0W2ldKTsgcmV0dXJuIG4gfSB2YXIgeHQgPSBbInllYXIiLCAicXVhcnRlciIsICJtb250aCIsICJ3ZWVrIiwgImRheSIsICJob3VyIiwgIm1pbnV0ZSIsICJzZWNvbmQiLCAibWlsbGlzZWNvbmQiXTsgZnVuY3Rpb24gVHQoZSkgeyB2YXIgdCA9IEcoZSksIG4gPSB0LnllYXIgfHwgMCwgcyA9IHQucXVhcnRlciB8fCAwLCBpID0gdC5tb250aCB8fCAwLCBhID0gdC53ZWVrIHx8IHQuaXNvV2VlayB8fCAwLCBvID0gdC5kYXkgfHwgMCwgdSA9IHQuaG91ciB8fCAwLCBsID0gdC5taW51dGUgfHwgMCwgaCA9IHQuc2Vjb25kIHx8IDAsIGQgPSB0Lm1pbGxpc2Vjb25kIHx8IDA7IHRoaXMuX2lzVmFsaWQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgcyA9ICExOyBmb3IgKHQgaW4gZSkgaWYgKHIoZSwgdCkgJiYgKC0xID09PSBwZS5jYWxsKHh0LCB0KSB8fCBudWxsICE9IGVbdF0gJiYgaXNOYU4oZVt0XSkpKSByZXR1cm4gITE7IGZvciAobiA9IDA7IG4gPCB4dC5sZW5ndGg7ICsrbilpZiAoZVt4dFtuXV0pIHsgaWYgKHMpIHJldHVybiAhMTsgcGFyc2VGbG9hdChlW3h0W25dXSkgIT09IFooZVt4dFtuXV0pICYmIChzID0gITApOyB9IHJldHVybiAhMCB9KHQpLCB0aGlzLl9taWxsaXNlY29uZHMgPSArZCArIDFlMyAqIGggKyA2ZTQgKiBsICsgMWUzICogdSAqIDYwICogNjAsIHRoaXMuX2RheXMgPSArbyArIDcgKiBhLCB0aGlzLl9tb250aHMgPSAraSArIDMgKiBzICsgMTIgKiBuLCB0aGlzLl9kYXRhID0ge30sIHRoaXMuX2xvY2FsZSA9IGF0KCksIHRoaXMuX2J1YmJsZSgpOyB9IGZ1bmN0aW9uIE50KGUpIHsgcmV0dXJuIGUgaW5zdGFuY2VvZiBUdCB9IGZ1bmN0aW9uIFB0KGUpIHsgcmV0dXJuIGUgPCAwID8gLTEgKiBNYXRoLnJvdW5kKC0xICogZSkgOiBNYXRoLnJvdW5kKGUpIH0gZnVuY3Rpb24gUnQoZSwgdCkgeyBDKGUsIDAsIDAsIChmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy51dGNPZmZzZXQoKSwgbiA9ICIrIjsgcmV0dXJuIGUgPCAwICYmIChlID0gLWUsIG4gPSAiLSIpLCBuICsgVCh+fihlIC8gNjApLCAyKSArIHQgKyBUKH5+ZSAlIDYwLCAyKSB9KSk7IH0gUnQoIloiLCAiOiIpLCBSdCgiWloiLCAiIiksIGNlKCJaIiwgaGUpLCBjZSgiWloiLCBoZSksIHllKFsiWiIsICJaWiJdLCAoZnVuY3Rpb24gKGUsIHQsIG4pIHsgbi5fdXNlVVRDID0gITAsIG4uX3R6bSA9IEN0KGhlLCBlKTsgfSkpOyB2YXIgV3QgPSAvKFtcK1wtXXxcZFxkKS9naTsgZnVuY3Rpb24gQ3QoZSwgdCkgeyB2YXIgbiwgcywgaSA9ICh0IHx8ICIiKS5tYXRjaChlKTsgcmV0dXJuIG51bGwgPT09IGkgPyBudWxsIDogMCA9PT0gKHMgPSA2MCAqIChuID0gKChpW2kubGVuZ3RoIC0gMV0gfHwgW10pICsgIiIpLm1hdGNoKFd0KSB8fCBbIi0iLCAwLCAwXSlbMV0gKyBaKG5bMl0pKSA/IDAgOiAiKyIgPT09IG5bMF0gPyBzIDogLXMgfSBmdW5jdGlvbiBIdChlLCB0KSB7IHZhciBzLCBpOyByZXR1cm4gdC5faXNVVEMgPyAocyA9IHQuY2xvbmUoKSwgaSA9ICh2KGUpIHx8IGwoZSkgPyBlLnZhbHVlT2YoKSA6IFN0KGUpLnZhbHVlT2YoKSkgLSBzLnZhbHVlT2YoKSwgcy5fZC5zZXRUaW1lKHMuX2QudmFsdWVPZigpICsgaSksIG4udXBkYXRlT2Zmc2V0KHMsICExKSwgcykgOiBTdChlKS5sb2NhbCgpIH0gZnVuY3Rpb24gVXQoZSkgeyByZXR1cm4gLU1hdGgucm91bmQoZS5fZC5nZXRUaW1lem9uZU9mZnNldCgpKSB9IGZ1bmN0aW9uIEZ0KCkgeyByZXR1cm4gISF0aGlzLmlzVmFsaWQoKSAmJiAodGhpcy5faXNVVEMgJiYgMCA9PT0gdGhpcy5fb2Zmc2V0KSB9IG4udXBkYXRlT2Zmc2V0ID0gZnVuY3Rpb24gKCkgeyB9OyB2YXIgTHQgPSAvXigtfFwrKT8oPzooXGQqKVsuIF0pPyhcZCspOihcZCspKD86OihcZCspKFwuXGQqKT8pPyQvLCBWdCA9IC9eKC18XCspP1AoPzooWy0rXT9bMC05LC5dKilZKT8oPzooWy0rXT9bMC05LC5dKilNKT8oPzooWy0rXT9bMC05LC5dKilXKT8oPzooWy0rXT9bMC05LC5dKilEKT8oPzpUKD86KFstK10/WzAtOSwuXSopSCk/KD86KFstK10/WzAtOSwuXSopTSk/KD86KFstK10/WzAtOSwuXSopUyk/KT8kLzsgZnVuY3Rpb24gR3QoZSwgdCkgeyB2YXIgbiwgcywgaSwgYSA9IGUsIG8gPSBudWxsOyByZXR1cm4gTnQoZSkgPyBhID0geyBtczogZS5fbWlsbGlzZWNvbmRzLCBkOiBlLl9kYXlzLCBNOiBlLl9tb250aHMgfSA6IHUoZSkgfHwgIWlzTmFOKCtlKSA/IChhID0ge30sIHQgPyBhW3RdID0gK2UgOiBhLm1pbGxpc2Vjb25kcyA9ICtlKSA6IChvID0gTHQuZXhlYyhlKSkgPyAobiA9ICItIiA9PT0gb1sxXSA/IC0xIDogMSwgYSA9IHsgeTogMCwgZDogWihvWzJdKSAqIG4sIGg6IFoob1szXSkgKiBuLCBtOiBaKG9bNF0pICogbiwgczogWihvWzVdKSAqIG4sIG1zOiBaKFB0KDFlMyAqIG9bNl0pKSAqIG4gfSkgOiAobyA9IFZ0LmV4ZWMoZSkpID8gKG4gPSAiLSIgPT09IG9bMV0gPyAtMSA6IDEsIGEgPSB7IHk6IEV0KG9bMl0sIG4pLCBNOiBFdChvWzNdLCBuKSwgdzogRXQob1s0XSwgbiksIGQ6IEV0KG9bNV0sIG4pLCBoOiBFdChvWzZdLCBuKSwgbTogRXQob1s3XSwgbiksIHM6IEV0KG9bOF0sIG4pIH0pIDogbnVsbCA9PSBhID8gYSA9IHt9IDogIm9iamVjdCIgPT0gdHlwZW9mIGEgJiYgKCJmcm9tIiBpbiBhIHx8ICJ0byIgaW4gYSkgJiYgKGkgPSBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbjsgaWYgKCFlLmlzVmFsaWQoKSB8fCAhdC5pc1ZhbGlkKCkpIHJldHVybiB7IG1pbGxpc2Vjb25kczogMCwgbW9udGhzOiAwIH07IHQgPSBIdCh0LCBlKSwgZS5pc0JlZm9yZSh0KSA/IG4gPSBBdChlLCB0KSA6ICgobiA9IEF0KHQsIGUpKS5taWxsaXNlY29uZHMgPSAtbi5taWxsaXNlY29uZHMsIG4ubW9udGhzID0gLW4ubW9udGhzKTsgcmV0dXJuIG4gfShTdChhLmZyb20pLCBTdChhLnRvKSksIChhID0ge30pLm1zID0gaS5taWxsaXNlY29uZHMsIGEuTSA9IGkubW9udGhzKSwgcyA9IG5ldyBUdChhKSwgTnQoZSkgJiYgcihlLCAiX2xvY2FsZSIpICYmIChzLl9sb2NhbGUgPSBlLl9sb2NhbGUpLCBOdChlKSAmJiByKGUsICJfaXNWYWxpZCIpICYmIChzLl9pc1ZhbGlkID0gZS5faXNWYWxpZCksIHMgfSBmdW5jdGlvbiBFdChlLCB0KSB7IHZhciBuID0gZSAmJiBwYXJzZUZsb2F0KGUucmVwbGFjZSgiLCIsICIuIikpOyByZXR1cm4gKGlzTmFOKG4pID8gMCA6IG4pICogdCB9IGZ1bmN0aW9uIEF0KGUsIHQpIHsgdmFyIG4gPSB7fTsgcmV0dXJuIG4ubW9udGhzID0gdC5tb250aCgpIC0gZS5tb250aCgpICsgMTIgKiAodC55ZWFyKCkgLSBlLnllYXIoKSksIGUuY2xvbmUoKS5hZGQobi5tb250aHMsICJNIikuaXNBZnRlcih0KSAmJiAtLW4ubW9udGhzLCBuLm1pbGxpc2Vjb25kcyA9ICt0IC0gK2UuY2xvbmUoKS5hZGQobi5tb250aHMsICJNIiksIG4gfSBmdW5jdGlvbiBqdChlLCB0KSB7IHJldHVybiBmdW5jdGlvbiAobiwgcykgeyB2YXIgaTsgcmV0dXJuIG51bGwgPT09IHMgfHwgaXNOYU4oK3MpIHx8IChZKHQsICJtb21lbnQoKS4iICsgdCArICIocGVyaW9kLCBudW1iZXIpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgbW9tZW50KCkuIiArIHQgKyAiKG51bWJlciwgcGVyaW9kKS4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvYWRkLWludmVydGVkLXBhcmFtLyBmb3IgbW9yZSBpbmZvLiIpLCBpID0gbiwgbiA9IHMsIHMgPSBpKSwgSXQodGhpcywgR3QobiwgcyksIGUpLCB0aGlzIH0gfSBmdW5jdGlvbiBJdChlLCB0LCBzLCBpKSB7IHZhciByID0gdC5fbWlsbGlzZWNvbmRzLCBhID0gUHQodC5fZGF5cyksIG8gPSBQdCh0Ll9tb250aHMpOyBlLmlzVmFsaWQoKSAmJiAoaSA9IG51bGwgPT0gaSB8fCBpLCBvICYmIGJlKGUsICQoZSwgIk1vbnRoIikgKyBvICogcyksIGEgJiYgcShlLCAiRGF0ZSIsICQoZSwgIkRhdGUiKSArIGEgKiBzKSwgciAmJiBlLl9kLnNldFRpbWUoZS5fZC52YWx1ZU9mKCkgKyByICogcyksIGkgJiYgbi51cGRhdGVPZmZzZXQoZSwgYSB8fCBvKSk7IH0gR3QuZm4gPSBUdC5wcm90b3R5cGUsIEd0LmludmFsaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBHdChOYU4pIH07IHZhciBadCA9IGp0KDEsICJhZGQiKSwgenQgPSBqdCgtMSwgInN1YnRyYWN0Iik7IGZ1bmN0aW9uICR0KGUpIHsgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlIHx8IGUgaW5zdGFuY2VvZiBTdHJpbmcgfSBmdW5jdGlvbiBxdChlKSB7IHJldHVybiB2KGUpIHx8IGwoZSkgfHwgJHQoZSkgfHwgdShlKSB8fCBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IHMoZSksIG4gPSAhMTsgdCAmJiAobiA9IDAgPT09IGUuZmlsdGVyKChmdW5jdGlvbiAodCkgeyByZXR1cm4gIXUodCkgJiYgJHQoZSkgfSkpLmxlbmd0aCk7IHJldHVybiB0ICYmIG4gfShlKSB8fCBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgcyA9IGkoZSkgJiYgIWEoZSksIG8gPSAhMSwgdSA9IFsieWVhcnMiLCAieWVhciIsICJ5IiwgIm1vbnRocyIsICJtb250aCIsICJNIiwgImRheXMiLCAiZGF5IiwgImQiLCAiZGF0ZXMiLCAiZGF0ZSIsICJEIiwgImhvdXJzIiwgImhvdXIiLCAiaCIsICJtaW51dGVzIiwgIm1pbnV0ZSIsICJtIiwgInNlY29uZHMiLCAic2Vjb25kIiwgInMiLCAibWlsbGlzZWNvbmRzIiwgIm1pbGxpc2Vjb25kIiwgIm1zIl07IGZvciAodCA9IDA7IHQgPCB1Lmxlbmd0aDsgdCArPSAxKW4gPSB1W3RdLCBvID0gbyB8fCByKGUsIG4pOyByZXR1cm4gcyAmJiBvIH0oZSkgfHwgbnVsbCA9PSBlIH0gZnVuY3Rpb24gQnQoZSkgeyB2YXIgdCwgbiA9IGkoZSkgJiYgIWEoZSksIHMgPSAhMSwgbyA9IFsic2FtZURheSIsICJuZXh0RGF5IiwgImxhc3REYXkiLCAibmV4dFdlZWsiLCAibGFzdFdlZWsiLCAic2FtZUVsc2UiXTsgZm9yICh0ID0gMDsgdCA8IG8ubGVuZ3RoOyB0ICs9IDEpcyA9IHMgfHwgcihlLCBvW3RdKTsgcmV0dXJuIG4gJiYgcyB9IGZ1bmN0aW9uIEp0KGUsIHQpIHsgaWYgKGUuZGF0ZSgpIDwgdC5kYXRlKCkpIHJldHVybiAtSnQodCwgZSk7IHZhciBuID0gMTIgKiAodC55ZWFyKCkgLSBlLnllYXIoKSkgKyAodC5tb250aCgpIC0gZS5tb250aCgpKSwgcyA9IGUuY2xvbmUoKS5hZGQobiwgIm1vbnRocyIpOyByZXR1cm4gLShuICsgKHQgLSBzIDwgMCA/ICh0IC0gcykgLyAocyAtIGUuY2xvbmUoKS5hZGQobiAtIDEsICJtb250aHMiKSkgOiAodCAtIHMpIC8gKGUuY2xvbmUoKS5hZGQobiArIDEsICJtb250aHMiKSAtIHMpKSkgfHwgMCB9IGZ1bmN0aW9uIFF0KGUpIHsgdmFyIHQ7IHJldHVybiB2b2lkIDAgPT09IGUgPyB0aGlzLl9sb2NhbGUuX2FiYnIgOiAobnVsbCAhPSAodCA9IGF0KGUpKSAmJiAodGhpcy5fbG9jYWxlID0gdCksIHRoaXMpIH0gbi5kZWZhdWx0Rm9ybWF0ID0gIllZWVktTU0tRERUSEg6bW06c3NaIiwgbi5kZWZhdWx0Rm9ybWF0VXRjID0gIllZWVktTU0tRERUSEg6bW06c3NbWl0iOyB2YXIgWHQgPSBNKCJtb21lbnQoKS5sYW5nKCkgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCwgdXNlIG1vbWVudCgpLmxvY2FsZURhdGEoKSB0byBnZXQgdGhlIGxhbmd1YWdlIGNvbmZpZ3VyYXRpb24uIFVzZSBtb21lbnQoKS5sb2NhbGUoKSB0byBjaGFuZ2UgbGFuZ3VhZ2VzLiIsIChmdW5jdGlvbiAoZSkgeyByZXR1cm4gdm9pZCAwID09PSBlID8gdGhpcy5sb2NhbGVEYXRhKCkgOiB0aGlzLmxvY2FsZShlKSB9KSk7IGZ1bmN0aW9uIEt0KCkgeyByZXR1cm4gdGhpcy5fbG9jYWxlIH0gZnVuY3Rpb24gZW4oZSwgdCkgeyByZXR1cm4gKGUgJSB0ICsgdCkgJSB0IH0gZnVuY3Rpb24gdG4oZSwgdCwgbikgeyByZXR1cm4gZSA8IDEwMCAmJiBlID49IDAgPyBuZXcgRGF0ZShlICsgNDAwLCB0LCBuKSAtIDEyNjIyNzgwOGU1IDogbmV3IERhdGUoZSwgdCwgbikudmFsdWVPZigpIH0gZnVuY3Rpb24gbm4oZSwgdCwgbikgeyByZXR1cm4gZSA8IDEwMCAmJiBlID49IDAgPyBEYXRlLlVUQyhlICsgNDAwLCB0LCBuKSAtIDEyNjIyNzgwOGU1IDogRGF0ZS5VVEMoZSwgdCwgbikgfSBmdW5jdGlvbiBzbihlLCB0KSB7IHJldHVybiB0LmVyYXNBYmJyUmVnZXgoZSkgfSBmdW5jdGlvbiBybigpIHsgdmFyIGUsIHQsIG4gPSBbXSwgcyA9IFtdLCBpID0gW10sIHIgPSBbXSwgYSA9IHRoaXMuZXJhcygpOyBmb3IgKGUgPSAwLCB0ID0gYS5sZW5ndGg7IGUgPCB0OyArK2Upcy5wdXNoKG1lKGFbZV0ubmFtZSkpLCBuLnB1c2gobWUoYVtlXS5hYmJyKSksIGkucHVzaChtZShhW2VdLm5hcnJvdykpLCByLnB1c2gobWUoYVtlXS5uYW1lKSksIHIucHVzaChtZShhW2VdLmFiYnIpKSwgci5wdXNoKG1lKGFbZV0ubmFycm93KSk7IHRoaXMuX2VyYXNSZWdleCA9IG5ldyBSZWdFeHAoIl4oIiArIHIuam9pbigifCIpICsgIikiLCAiaSIpLCB0aGlzLl9lcmFzTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cCgiXigiICsgcy5qb2luKCJ8IikgKyAiKSIsICJpIiksIHRoaXMuX2VyYXNBYmJyUmVnZXggPSBuZXcgUmVnRXhwKCJeKCIgKyBuLmpvaW4oInwiKSArICIpIiwgImkiKSwgdGhpcy5fZXJhc05hcnJvd1JlZ2V4ID0gbmV3IFJlZ0V4cCgiXigiICsgaS5qb2luKCJ8IikgKyAiKSIsICJpIik7IH0gZnVuY3Rpb24gYW4oZSwgdCkgeyBDKDAsIFtlLCBlLmxlbmd0aF0sIDAsIHQpOyB9IGZ1bmN0aW9uIG9uKGUsIHQsIG4sIHMsIGkpIHsgdmFyIHI7IHJldHVybiBudWxsID09IGUgPyBVZSh0aGlzLCBzLCBpKS55ZWFyIDogKHQgPiAociA9IEZlKGUsIHMsIGkpKSAmJiAodCA9IHIpLCB1bi5jYWxsKHRoaXMsIGUsIHQsIG4sIHMsIGkpKSB9IGZ1bmN0aW9uIHVuKGUsIHQsIG4sIHMsIGkpIHsgdmFyIHIgPSBIZShlLCB0LCBuLCBzLCBpKSwgYSA9IFdlKHIueWVhciwgMCwgci5kYXlPZlllYXIpOyByZXR1cm4gdGhpcy55ZWFyKGEuZ2V0VVRDRnVsbFllYXIoKSksIHRoaXMubW9udGgoYS5nZXRVVENNb250aCgpKSwgdGhpcy5kYXRlKGEuZ2V0VVRDRGF0ZSgpKSwgdGhpcyB9IEMoIk4iLCAwLCAwLCAiZXJhQWJiciIpLCBDKCJOTiIsIDAsIDAsICJlcmFBYmJyIiksIEMoIk5OTiIsIDAsIDAsICJlcmFBYmJyIiksIEMoIk5OTk4iLCAwLCAwLCAiZXJhTmFtZSIpLCBDKCJOTk5OTiIsIDAsIDAsICJlcmFOYXJyb3ciKSwgQygieSIsIFsieSIsIDFdLCAieW8iLCAiZXJhWWVhciIpLCBDKCJ5IiwgWyJ5eSIsIDJdLCAwLCAiZXJhWWVhciIpLCBDKCJ5IiwgWyJ5eXkiLCAzXSwgMCwgImVyYVllYXIiKSwgQygieSIsIFsieXl5eSIsIDRdLCAwLCAiZXJhWWVhciIpLCBjZSgiTiIsIHNuKSwgY2UoIk5OIiwgc24pLCBjZSgiTk5OIiwgc24pLCBjZSgiTk5OTiIsIChmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdC5lcmFzTmFtZVJlZ2V4KGUpIH0pKSwgY2UoIk5OTk5OIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0LmVyYXNOYXJyb3dSZWdleChlKSB9KSksIHllKFsiTiIsICJOTiIsICJOTk4iLCAiTk5OTiIsICJOTk5OTiJdLCAoZnVuY3Rpb24gKGUsIHQsIG4sIHMpIHsgdmFyIGkgPSBuLl9sb2NhbGUuZXJhc1BhcnNlKGUsIHMsIG4uX3N0cmljdCk7IGkgPyBmKG4pLmVyYSA9IGkgOiBmKG4pLmludmFsaWRFcmEgPSBlOyB9KSksIGNlKCJ5Iiwgb2UpLCBjZSgieXkiLCBvZSksIGNlKCJ5eXkiLCBvZSksIGNlKCJ5eXl5Iiwgb2UpLCBjZSgieW8iLCAoZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHQuX2VyYVllYXJPcmRpbmFsUmVnZXggfHwgb2UgfSkpLCB5ZShbInkiLCAieXkiLCAieXl5IiwgInl5eXkiXSwgMCksIHllKFsieW8iXSwgKGZ1bmN0aW9uIChlLCB0LCBuLCBzKSB7IHZhciBpOyBuLl9sb2NhbGUuX2VyYVllYXJPcmRpbmFsUmVnZXggJiYgKGkgPSBlLm1hdGNoKG4uX2xvY2FsZS5fZXJhWWVhck9yZGluYWxSZWdleCkpLCBuLl9sb2NhbGUuZXJhWWVhck9yZGluYWxQYXJzZSA/IHRbMF0gPSBuLl9sb2NhbGUuZXJhWWVhck9yZGluYWxQYXJzZShlLCBpKSA6IHRbMF0gPSBwYXJzZUludChlLCAxMCk7IH0pKSwgQygwLCBbImdnIiwgMl0sIDAsIChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLndlZWtZZWFyKCkgJSAxMDAgfSkpLCBDKDAsIFsiR0ciLCAyXSwgMCwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXNvV2Vla1llYXIoKSAlIDEwMCB9KSksIGFuKCJnZ2dnIiwgIndlZWtZZWFyIiksIGFuKCJnZ2dnZyIsICJ3ZWVrWWVhciIpLCBhbigiR0dHRyIsICJpc29XZWVrWWVhciIpLCBhbigiR0dHR0ciLCAiaXNvV2Vla1llYXIiKSwgTCgid2Vla1llYXIiLCAiZ2ciKSwgTCgiaXNvV2Vla1llYXIiLCAiR0ciKSwgQSgid2Vla1llYXIiLCAxKSwgQSgiaXNvV2Vla1llYXIiLCAxKSwgY2UoIkciLCB1ZSksIGNlKCJnIiwgdWUpLCBjZSgiR0ciLCB0ZSwgUSksIGNlKCJnZyIsIHRlLCBRKSwgY2UoIkdHR0ciLCByZSwgSyksIGNlKCJnZ2dnIiwgcmUsIEspLCBjZSgiR0dHR0ciLCBhZSwgZWUpLCBjZSgiZ2dnZ2ciLCBhZSwgZWUpLCBnZShbImdnZ2ciLCAiZ2dnZ2ciLCAiR0dHRyIsICJHR0dHRyJdLCAoZnVuY3Rpb24gKGUsIHQsIG4sIHMpIHsgdFtzLnN1YnN0cigwLCAyKV0gPSBaKGUpOyB9KSksIGdlKFsiZ2ciLCAiR0ciXSwgKGZ1bmN0aW9uIChlLCB0LCBzLCBpKSB7IHRbaV0gPSBuLnBhcnNlVHdvRGlnaXRZZWFyKGUpOyB9KSksIEMoIlEiLCAwLCAiUW8iLCAicXVhcnRlciIpLCBMKCJxdWFydGVyIiwgIlEiKSwgQSgicXVhcnRlciIsIDcpLCBjZSgiUSIsIEopLCB5ZSgiUSIsIChmdW5jdGlvbiAoZSwgdCkgeyB0WzFdID0gMyAqIChaKGUpIC0gMSk7IH0pKSwgQygiRCIsIFsiREQiLCAyXSwgIkRvIiwgImRhdGUiKSwgTCgiZGF0ZSIsICJEIiksIEEoImRhdGUiLCA5KSwgY2UoIkQiLCB0ZSksIGNlKCJERCIsIHRlLCBRKSwgY2UoIkRvIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBlID8gdC5fZGF5T2ZNb250aE9yZGluYWxQYXJzZSB8fCB0Ll9vcmRpbmFsUGFyc2UgOiB0Ll9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlTGVuaWVudCB9KSksIHllKFsiRCIsICJERCJdLCAyKSwgeWUoIkRvIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHRbMl0gPSBaKGUubWF0Y2godGUpWzBdKTsgfSkpOyB2YXIgbG4gPSB6KCJEYXRlIiwgITApOyBDKCJEREQiLCBbIkREREQiLCAzXSwgIkRERG8iLCAiZGF5T2ZZZWFyIiksIEwoImRheU9mWWVhciIsICJEREQiKSwgQSgiZGF5T2ZZZWFyIiwgNCksIGNlKCJEREQiLCBpZSksIGNlKCJEREREIiwgWCksIHllKFsiREREIiwgIkREREQiXSwgKGZ1bmN0aW9uIChlLCB0LCBuKSB7IG4uX2RheU9mWWVhciA9IFooZSk7IH0pKSwgQygibSIsIFsibW0iLCAyXSwgMCwgIm1pbnV0ZSIpLCBMKCJtaW51dGUiLCAibSIpLCBBKCJtaW51dGUiLCAxNCksIGNlKCJtIiwgdGUpLCBjZSgibW0iLCB0ZSwgUSksIHllKFsibSIsICJtbSJdLCA0KTsgdmFyIGhuID0geigiTWludXRlcyIsICExKTsgQygicyIsIFsic3MiLCAyXSwgMCwgInNlY29uZCIpLCBMKCJzZWNvbmQiLCAicyIpLCBBKCJzZWNvbmQiLCAxNSksIGNlKCJzIiwgdGUpLCBjZSgic3MiLCB0ZSwgUSksIHllKFsicyIsICJzcyJdLCA1KTsgdmFyIGRuLCBjbiwgZm4gPSB6KCJTZWNvbmRzIiwgITEpOyBmb3IgKEMoIlMiLCAwLCAwLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gfn4odGhpcy5taWxsaXNlY29uZCgpIC8gMTAwKSB9KSksIEMoMCwgWyJTUyIsIDJdLCAwLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gfn4odGhpcy5taWxsaXNlY29uZCgpIC8gMTApIH0pKSwgQygwLCBbIlNTUyIsIDNdLCAwLCAibWlsbGlzZWNvbmQiKSwgQygwLCBbIlNTU1MiLCA0XSwgMCwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIDEwICogdGhpcy5taWxsaXNlY29uZCgpIH0pKSwgQygwLCBbIlNTU1NTIiwgNV0sIDAsIChmdW5jdGlvbiAoKSB7IHJldHVybiAxMDAgKiB0aGlzLm1pbGxpc2Vjb25kKCkgfSkpLCBDKDAsIFsiU1NTU1NTIiwgNl0sIDAsIChmdW5jdGlvbiAoKSB7IHJldHVybiAxZTMgKiB0aGlzLm1pbGxpc2Vjb25kKCkgfSkpLCBDKDAsIFsiU1NTU1NTUyIsIDddLCAwLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gMWU0ICogdGhpcy5taWxsaXNlY29uZCgpIH0pKSwgQygwLCBbIlNTU1NTU1NTIiwgOF0sIDAsIChmdW5jdGlvbiAoKSB7IHJldHVybiAxZTUgKiB0aGlzLm1pbGxpc2Vjb25kKCkgfSkpLCBDKDAsIFsiU1NTU1NTU1NTIiwgOV0sIDAsIChmdW5jdGlvbiAoKSB7IHJldHVybiAxZTYgKiB0aGlzLm1pbGxpc2Vjb25kKCkgfSkpLCBMKCJtaWxsaXNlY29uZCIsICJtcyIpLCBBKCJtaWxsaXNlY29uZCIsIDE2KSwgY2UoIlMiLCBpZSwgSiksIGNlKCJTUyIsIGllLCBRKSwgY2UoIlNTUyIsIGllLCBYKSwgZG4gPSAiU1NTUyI7IGRuLmxlbmd0aCA8PSA5OyBkbiArPSAiUyIpY2UoZG4sIG9lKTsgZnVuY3Rpb24gbW4oZSwgdCkgeyB0WzZdID0gWigxZTMgKiAoIjAuIiArIGUpKTsgfSBmb3IgKGRuID0gIlMiOyBkbi5sZW5ndGggPD0gOTsgZG4gKz0gIlMiKXllKGRuLCBtbik7IGNuID0geigiTWlsbGlzZWNvbmRzIiwgITEpLCBDKCJ6IiwgMCwgMCwgInpvbmVBYmJyIiksIEMoInp6IiwgMCwgMCwgInpvbmVOYW1lIik7IHZhciBfbiA9IHAucHJvdG90eXBlOyBmdW5jdGlvbiB5bihlKSB7IHJldHVybiBlIH0gX24uYWRkID0gWnQsIF9uLmNhbGVuZGFyID0gZnVuY3Rpb24gKGUsIHQpIHsgMSA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAocXQoYXJndW1lbnRzWzBdKSA/IChlID0gYXJndW1lbnRzWzBdLCB0ID0gdm9pZCAwKSA6IEJ0KGFyZ3VtZW50c1swXSkgJiYgKHQgPSBhcmd1bWVudHNbMF0sIGUgPSB2b2lkIDApKTsgdmFyIHMgPSBlIHx8IFN0KCksIGkgPSBIdChzLCB0aGlzKS5zdGFydE9mKCJkYXkiKSwgciA9IG4uY2FsZW5kYXJGb3JtYXQodGhpcywgaSkgfHwgInNhbWVFbHNlIiwgYSA9IHQgJiYgKE8odFtyXSkgPyB0W3JdLmNhbGwodGhpcywgcykgOiB0W3JdKTsgcmV0dXJuIHRoaXMuZm9ybWF0KGEgfHwgdGhpcy5sb2NhbGVEYXRhKCkuY2FsZW5kYXIociwgdGhpcywgU3QocykpKSB9LCBfbi5jbG9uZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBwKHRoaXMpIH0sIF9uLmRpZmYgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcywgaSwgcjsgaWYgKCF0aGlzLmlzVmFsaWQoKSkgcmV0dXJuIE5hTjsgaWYgKCEocyA9IEh0KGUsIHRoaXMpKS5pc1ZhbGlkKCkpIHJldHVybiBOYU47IHN3aXRjaCAoaSA9IDZlNCAqIChzLnV0Y09mZnNldCgpIC0gdGhpcy51dGNPZmZzZXQoKSksIHQgPSBWKHQpKSB7IGNhc2UgInllYXIiOiByID0gSnQodGhpcywgcykgLyAxMjsgYnJlYWs7IGNhc2UgIm1vbnRoIjogciA9IEp0KHRoaXMsIHMpOyBicmVhazsgY2FzZSAicXVhcnRlciI6IHIgPSBKdCh0aGlzLCBzKSAvIDM7IGJyZWFrOyBjYXNlICJzZWNvbmQiOiByID0gKHRoaXMgLSBzKSAvIDFlMzsgYnJlYWs7IGNhc2UgIm1pbnV0ZSI6IHIgPSAodGhpcyAtIHMpIC8gNmU0OyBicmVhazsgY2FzZSAiaG91ciI6IHIgPSAodGhpcyAtIHMpIC8gMzZlNTsgYnJlYWs7IGNhc2UgImRheSI6IHIgPSAodGhpcyAtIHMgLSBpKSAvIDg2NGU1OyBicmVhazsgY2FzZSAid2VlayI6IHIgPSAodGhpcyAtIHMgLSBpKSAvIDYwNDhlNTsgYnJlYWs7IGRlZmF1bHQ6IHIgPSB0aGlzIC0gczsgfXJldHVybiBuID8gciA6IEkocikgfSwgX24uZW5kT2YgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgczsgaWYgKHZvaWQgMCA9PT0gKGUgPSBWKGUpKSB8fCAibWlsbGlzZWNvbmQiID09PSBlIHx8ICF0aGlzLmlzVmFsaWQoKSkgcmV0dXJuIHRoaXM7IHN3aXRjaCAocyA9IHRoaXMuX2lzVVRDID8gbm4gOiB0biwgZSkgeyBjYXNlICJ5ZWFyIjogdCA9IHModGhpcy55ZWFyKCkgKyAxLCAwLCAxKSAtIDE7IGJyZWFrOyBjYXNlICJxdWFydGVyIjogdCA9IHModGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSAtIHRoaXMubW9udGgoKSAlIDMgKyAzLCAxKSAtIDE7IGJyZWFrOyBjYXNlICJtb250aCI6IHQgPSBzKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCkgKyAxLCAxKSAtIDE7IGJyZWFrOyBjYXNlICJ3ZWVrIjogdCA9IHModGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSwgdGhpcy5kYXRlKCkgLSB0aGlzLndlZWtkYXkoKSArIDcpIC0gMTsgYnJlYWs7IGNhc2UgImlzb1dlZWsiOiB0ID0gcyh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCB0aGlzLmRhdGUoKSAtICh0aGlzLmlzb1dlZWtkYXkoKSAtIDEpICsgNykgLSAxOyBicmVhazsgY2FzZSAiZGF5IjogY2FzZSAiZGF0ZSI6IHQgPSBzKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCksIHRoaXMuZGF0ZSgpICsgMSkgLSAxOyBicmVhazsgY2FzZSAiaG91ciI6IHQgPSB0aGlzLl9kLnZhbHVlT2YoKSwgdCArPSAzNmU1IC0gZW4odCArICh0aGlzLl9pc1VUQyA/IDAgOiA2ZTQgKiB0aGlzLnV0Y09mZnNldCgpKSwgMzZlNSkgLSAxOyBicmVhazsgY2FzZSAibWludXRlIjogdCA9IHRoaXMuX2QudmFsdWVPZigpLCB0ICs9IDZlNCAtIGVuKHQsIDZlNCkgLSAxOyBicmVhazsgY2FzZSAic2Vjb25kIjogdCA9IHRoaXMuX2QudmFsdWVPZigpLCB0ICs9IDFlMyAtIGVuKHQsIDFlMykgLSAxOyB9cmV0dXJuIHRoaXMuX2Quc2V0VGltZSh0KSwgbi51cGRhdGVPZmZzZXQodGhpcywgITApLCB0aGlzIH0sIF9uLmZvcm1hdCA9IGZ1bmN0aW9uIChlKSB7IGUgfHwgKGUgPSB0aGlzLmlzVXRjKCkgPyBuLmRlZmF1bHRGb3JtYXRVdGMgOiBuLmRlZmF1bHRGb3JtYXQpOyB2YXIgdCA9IEgodGhpcywgZSk7IHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KHQpIH0sIF9uLmZyb20gPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgJiYgKHYoZSkgJiYgZS5pc1ZhbGlkKCkgfHwgU3QoZSkuaXNWYWxpZCgpKSA/IEd0KHsgdG86IHRoaXMsIGZyb206IGUgfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF0KSA6IHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCkgfSwgX24uZnJvbU5vdyA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmZyb20oU3QoKSwgZSkgfSwgX24udG8gPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgJiYgKHYoZSkgJiYgZS5pc1ZhbGlkKCkgfHwgU3QoZSkuaXNWYWxpZCgpKSA/IEd0KHsgZnJvbTogdGhpcywgdG86IGUgfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF0KSA6IHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCkgfSwgX24udG9Ob3cgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy50byhTdCgpLCBlKSB9LCBfbi5nZXQgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gTyh0aGlzW2UgPSBWKGUpXSkgPyB0aGlzW2VdKCkgOiB0aGlzIH0sIF9uLmludmFsaWRBdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYodGhpcykub3ZlcmZsb3cgfSwgX24uaXNBZnRlciA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gdihlKSA/IGUgOiBTdChlKTsgcmV0dXJuICEoIXRoaXMuaXNWYWxpZCgpIHx8ICFuLmlzVmFsaWQoKSkgJiYgKCJtaWxsaXNlY29uZCIgPT09ICh0ID0gVih0KSB8fCAibWlsbGlzZWNvbmQiKSA/IHRoaXMudmFsdWVPZigpID4gbi52YWx1ZU9mKCkgOiBuLnZhbHVlT2YoKSA8IHRoaXMuY2xvbmUoKS5zdGFydE9mKHQpLnZhbHVlT2YoKSkgfSwgX24uaXNCZWZvcmUgPSBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IHYoZSkgPyBlIDogU3QoZSk7IHJldHVybiAhKCF0aGlzLmlzVmFsaWQoKSB8fCAhbi5pc1ZhbGlkKCkpICYmICgibWlsbGlzZWNvbmQiID09PSAodCA9IFYodCkgfHwgIm1pbGxpc2Vjb25kIikgPyB0aGlzLnZhbHVlT2YoKSA8IG4udmFsdWVPZigpIDogdGhpcy5jbG9uZSgpLmVuZE9mKHQpLnZhbHVlT2YoKSA8IG4udmFsdWVPZigpKSB9LCBfbi5pc0JldHdlZW4gPSBmdW5jdGlvbiAoZSwgdCwgbiwgcykgeyB2YXIgaSA9IHYoZSkgPyBlIDogU3QoZSksIHIgPSB2KHQpID8gdCA6IFN0KHQpOyByZXR1cm4gISEodGhpcy5pc1ZhbGlkKCkgJiYgaS5pc1ZhbGlkKCkgJiYgci5pc1ZhbGlkKCkpICYmICgoIigiID09PSAocyA9IHMgfHwgIigpIilbMF0gPyB0aGlzLmlzQWZ0ZXIoaSwgbikgOiAhdGhpcy5pc0JlZm9yZShpLCBuKSkgJiYgKCIpIiA9PT0gc1sxXSA/IHRoaXMuaXNCZWZvcmUociwgbikgOiAhdGhpcy5pc0FmdGVyKHIsIG4pKSkgfSwgX24uaXNTYW1lID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4sIHMgPSB2KGUpID8gZSA6IFN0KGUpOyByZXR1cm4gISghdGhpcy5pc1ZhbGlkKCkgfHwgIXMuaXNWYWxpZCgpKSAmJiAoIm1pbGxpc2Vjb25kIiA9PT0gKHQgPSBWKHQpIHx8ICJtaWxsaXNlY29uZCIpID8gdGhpcy52YWx1ZU9mKCkgPT09IHMudmFsdWVPZigpIDogKG4gPSBzLnZhbHVlT2YoKSwgdGhpcy5jbG9uZSgpLnN0YXJ0T2YodCkudmFsdWVPZigpIDw9IG4gJiYgbiA8PSB0aGlzLmNsb25lKCkuZW5kT2YodCkudmFsdWVPZigpKSkgfSwgX24uaXNTYW1lT3JBZnRlciA9IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0aGlzLmlzU2FtZShlLCB0KSB8fCB0aGlzLmlzQWZ0ZXIoZSwgdCkgfSwgX24uaXNTYW1lT3JCZWZvcmUgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdGhpcy5pc1NhbWUoZSwgdCkgfHwgdGhpcy5pc0JlZm9yZShlLCB0KSB9LCBfbi5pc1ZhbGlkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbSh0aGlzKSB9LCBfbi5sYW5nID0gWHQsIF9uLmxvY2FsZSA9IFF0LCBfbi5sb2NhbGVEYXRhID0gS3QsIF9uLm1heCA9IE90LCBfbi5taW4gPSBZdCwgX24ucGFyc2luZ0ZsYWdzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZCh7fSwgZih0aGlzKSkgfSwgX24uc2V0ID0gZnVuY3Rpb24gKGUsIHQpIHsgaWYgKCJvYmplY3QiID09IHR5cGVvZiBlKSB7IHZhciBuLCBzID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG4gPSBbXTsgZm9yICh0IGluIGUpIHIoZSwgdCkgJiYgbi5wdXNoKHsgdW5pdDogdCwgcHJpb3JpdHk6IEVbdF0gfSk7IHJldHVybiBuLnNvcnQoKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBlLnByaW9yaXR5IC0gdC5wcmlvcml0eSB9KSksIG4gfShlID0gRyhlKSk7IGZvciAobiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKXRoaXNbc1tuXS51bml0XShlW3Nbbl0udW5pdF0pOyB9IGVsc2UgaWYgKE8odGhpc1tlID0gVihlKV0pKSByZXR1cm4gdGhpc1tlXSh0KTsgcmV0dXJuIHRoaXMgfSwgX24uc3RhcnRPZiA9IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBzOyBpZiAodm9pZCAwID09PSAoZSA9IFYoZSkpIHx8ICJtaWxsaXNlY29uZCIgPT09IGUgfHwgIXRoaXMuaXNWYWxpZCgpKSByZXR1cm4gdGhpczsgc3dpdGNoIChzID0gdGhpcy5faXNVVEMgPyBubiA6IHRuLCBlKSB7IGNhc2UgInllYXIiOiB0ID0gcyh0aGlzLnllYXIoKSwgMCwgMSk7IGJyZWFrOyBjYXNlICJxdWFydGVyIjogdCA9IHModGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSAtIHRoaXMubW9udGgoKSAlIDMsIDEpOyBicmVhazsgY2FzZSAibW9udGgiOiB0ID0gcyh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCAxKTsgYnJlYWs7IGNhc2UgIndlZWsiOiB0ID0gcyh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCB0aGlzLmRhdGUoKSAtIHRoaXMud2Vla2RheSgpKTsgYnJlYWs7IGNhc2UgImlzb1dlZWsiOiB0ID0gcyh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCB0aGlzLmRhdGUoKSAtICh0aGlzLmlzb1dlZWtkYXkoKSAtIDEpKTsgYnJlYWs7IGNhc2UgImRheSI6IGNhc2UgImRhdGUiOiB0ID0gcyh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCB0aGlzLmRhdGUoKSk7IGJyZWFrOyBjYXNlICJob3VyIjogdCA9IHRoaXMuX2QudmFsdWVPZigpLCB0IC09IGVuKHQgKyAodGhpcy5faXNVVEMgPyAwIDogNmU0ICogdGhpcy51dGNPZmZzZXQoKSksIDM2ZTUpOyBicmVhazsgY2FzZSAibWludXRlIjogdCA9IHRoaXMuX2QudmFsdWVPZigpLCB0IC09IGVuKHQsIDZlNCk7IGJyZWFrOyBjYXNlICJzZWNvbmQiOiB0ID0gdGhpcy5fZC52YWx1ZU9mKCksIHQgLT0gZW4odCwgMWUzKTsgfXJldHVybiB0aGlzLl9kLnNldFRpbWUodCksIG4udXBkYXRlT2Zmc2V0KHRoaXMsICEwKSwgdGhpcyB9LCBfbi5zdWJ0cmFjdCA9IHp0LCBfbi50b0FycmF5ID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXM7IHJldHVybiBbZS55ZWFyKCksIGUubW9udGgoKSwgZS5kYXRlKCksIGUuaG91cigpLCBlLm1pbnV0ZSgpLCBlLnNlY29uZCgpLCBlLm1pbGxpc2Vjb25kKCldIH0sIF9uLnRvT2JqZWN0ID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXM7IHJldHVybiB7IHllYXJzOiBlLnllYXIoKSwgbW9udGhzOiBlLm1vbnRoKCksIGRhdGU6IGUuZGF0ZSgpLCBob3VyczogZS5ob3VycygpLCBtaW51dGVzOiBlLm1pbnV0ZXMoKSwgc2Vjb25kczogZS5zZWNvbmRzKCksIG1pbGxpc2Vjb25kczogZS5taWxsaXNlY29uZHMoKSB9IH0sIF9uLnRvRGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKSB9LCBfbi50b0lTT1N0cmluZyA9IGZ1bmN0aW9uIChlKSB7IGlmICghdGhpcy5pc1ZhbGlkKCkpIHJldHVybiBudWxsOyB2YXIgdCA9ICEwICE9PSBlLCBuID0gdCA/IHRoaXMuY2xvbmUoKS51dGMoKSA6IHRoaXM7IHJldHVybiBuLnllYXIoKSA8IDAgfHwgbi55ZWFyKCkgPiA5OTk5ID8gSChuLCB0ID8gIllZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXSIgOiAiWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTWiIpIDogTyhEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZykgPyB0ID8gdGhpcy50b0RhdGUoKS50b0lTT1N0cmluZygpIDogbmV3IERhdGUodGhpcy52YWx1ZU9mKCkgKyA2MCAqIHRoaXMudXRjT2Zmc2V0KCkgKiAxZTMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgiWiIsIEgobiwgIloiKSkgOiBIKG4sIHQgPyAiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXSIgOiAiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1oiKSB9LCBfbi5pbnNwZWN0ID0gZnVuY3Rpb24gKCkgeyBpZiAoIXRoaXMuaXNWYWxpZCgpKSByZXR1cm4gIm1vbWVudC5pbnZhbGlkKC8qICIgKyB0aGlzLl9pICsgIiAqLykiOyB2YXIgZSwgdCwgbiwgcyA9ICJtb21lbnQiLCBpID0gIiI7IHJldHVybiB0aGlzLmlzTG9jYWwoKSB8fCAocyA9IDAgPT09IHRoaXMudXRjT2Zmc2V0KCkgPyAibW9tZW50LnV0YyIgOiAibW9tZW50LnBhcnNlWm9uZSIsIGkgPSAiWiIpLCBlID0gIlsiICsgcyArICcoIl0nLCB0ID0gMCA8PSB0aGlzLnllYXIoKSAmJiB0aGlzLnllYXIoKSA8PSA5OTk5ID8gIllZWVkiIDogIllZWVlZWSIsIG4gPSBpICsgJ1siKV0nLCB0aGlzLmZvcm1hdChlICsgdCArICItTU0tRERbVF1ISDptbTpzcy5TU1MiICsgbikgfSwgInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBudWxsICE9IFN5bWJvbC5mb3IgJiYgKF9uW1N5bWJvbC5mb3IoIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tIildID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gIk1vbWVudDwiICsgdGhpcy5mb3JtYXQoKSArICI+IiB9KSwgX24udG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLnRvSVNPU3RyaW5nKCkgOiBudWxsIH0sIF9uLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLmxvY2FsZSgiZW4iKS5mb3JtYXQoImRkZCBNTU0gREQgWVlZWSBISDptbTpzcyBbR01UXVpaIikgfSwgX24udW5peCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1hdGguZmxvb3IodGhpcy52YWx1ZU9mKCkgLyAxZTMpIH0sIF9uLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9kLnZhbHVlT2YoKSAtIDZlNCAqICh0aGlzLl9vZmZzZXQgfHwgMCkgfSwgX24uY3JlYXRpb25EYXRhID0gZnVuY3Rpb24gKCkgeyByZXR1cm4geyBpbnB1dDogdGhpcy5faSwgZm9ybWF0OiB0aGlzLl9mLCBsb2NhbGU6IHRoaXMuX2xvY2FsZSwgaXNVVEM6IHRoaXMuX2lzVVRDLCBzdHJpY3Q6IHRoaXMuX3N0cmljdCB9IH0sIF9uLmVyYU5hbWUgPSBmdW5jdGlvbiAoKSB7IHZhciBlLCB0LCBuLCBzID0gdGhpcy5sb2NhbGVEYXRhKCkuZXJhcygpOyBmb3IgKGUgPSAwLCB0ID0gcy5sZW5ndGg7IGUgPCB0OyArK2UpIHsgaWYgKG4gPSB0aGlzLnN0YXJ0T2YoImRheSIpLnZhbHVlT2YoKSwgc1tlXS5zaW5jZSA8PSBuICYmIG4gPD0gc1tlXS51bnRpbCkgcmV0dXJuIHNbZV0ubmFtZTsgaWYgKHNbZV0udW50aWwgPD0gbiAmJiBuIDw9IHNbZV0uc2luY2UpIHJldHVybiBzW2VdLm5hbWUgfSByZXR1cm4gIiIgfSwgX24uZXJhTmFycm93ID0gZnVuY3Rpb24gKCkgeyB2YXIgZSwgdCwgbiwgcyA9IHRoaXMubG9jYWxlRGF0YSgpLmVyYXMoKTsgZm9yIChlID0gMCwgdCA9IHMubGVuZ3RoOyBlIDwgdDsgKytlKSB7IGlmIChuID0gdGhpcy5zdGFydE9mKCJkYXkiKS52YWx1ZU9mKCksIHNbZV0uc2luY2UgPD0gbiAmJiBuIDw9IHNbZV0udW50aWwpIHJldHVybiBzW2VdLm5hcnJvdzsgaWYgKHNbZV0udW50aWwgPD0gbiAmJiBuIDw9IHNbZV0uc2luY2UpIHJldHVybiBzW2VdLm5hcnJvdyB9IHJldHVybiAiIiB9LCBfbi5lcmFBYmJyID0gZnVuY3Rpb24gKCkgeyB2YXIgZSwgdCwgbiwgcyA9IHRoaXMubG9jYWxlRGF0YSgpLmVyYXMoKTsgZm9yIChlID0gMCwgdCA9IHMubGVuZ3RoOyBlIDwgdDsgKytlKSB7IGlmIChuID0gdGhpcy5zdGFydE9mKCJkYXkiKS52YWx1ZU9mKCksIHNbZV0uc2luY2UgPD0gbiAmJiBuIDw9IHNbZV0udW50aWwpIHJldHVybiBzW2VdLmFiYnI7IGlmIChzW2VdLnVudGlsIDw9IG4gJiYgbiA8PSBzW2VdLnNpbmNlKSByZXR1cm4gc1tlXS5hYmJyIH0gcmV0dXJuICIiIH0sIF9uLmVyYVllYXIgPSBmdW5jdGlvbiAoKSB7IHZhciBlLCB0LCBzLCBpLCByID0gdGhpcy5sb2NhbGVEYXRhKCkuZXJhcygpOyBmb3IgKGUgPSAwLCB0ID0gci5sZW5ndGg7IGUgPCB0OyArK2UpaWYgKHMgPSByW2VdLnNpbmNlIDw9IHJbZV0udW50aWwgPyAxIDogLTEsIGkgPSB0aGlzLnN0YXJ0T2YoImRheSIpLnZhbHVlT2YoKSwgcltlXS5zaW5jZSA8PSBpICYmIGkgPD0gcltlXS51bnRpbCB8fCByW2VdLnVudGlsIDw9IGkgJiYgaSA8PSByW2VdLnNpbmNlKSByZXR1cm4gKHRoaXMueWVhcigpIC0gbihyW2VdLnNpbmNlKS55ZWFyKCkpICogcyArIHJbZV0ub2Zmc2V0OyByZXR1cm4gdGhpcy55ZWFyKCkgfSwgX24ueWVhciA9IFBlLCBfbi5pc0xlYXBZZWFyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gaih0aGlzLnllYXIoKSkgfSwgX24ud2Vla1llYXIgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gb24uY2FsbCh0aGlzLCBlLCB0aGlzLndlZWsoKSwgdGhpcy53ZWVrZGF5KCksIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdywgdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG95KSB9LCBfbi5pc29XZWVrWWVhciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBvbi5jYWxsKHRoaXMsIGUsIHRoaXMuaXNvV2VlaygpLCB0aGlzLmlzb1dlZWtkYXkoKSwgMSwgNCkgfSwgX24ucXVhcnRlciA9IF9uLnF1YXJ0ZXJzID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgPT0gZSA/IE1hdGguY2VpbCgodGhpcy5tb250aCgpICsgMSkgLyAzKSA6IHRoaXMubW9udGgoMyAqIChlIC0gMSkgKyB0aGlzLm1vbnRoKCkgJSAzKSB9LCBfbi5tb250aCA9IHhlLCBfbi5kYXlzSW5Nb250aCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCkpIH0sIF9uLndlZWsgPSBfbi53ZWVrcyA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gdGhpcy5sb2NhbGVEYXRhKCkud2Vlayh0aGlzKTsgcmV0dXJuIG51bGwgPT0gZSA/IHQgOiB0aGlzLmFkZCg3ICogKGUgLSB0KSwgImQiKSB9LCBfbi5pc29XZWVrID0gX24uaXNvV2Vla3MgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IFVlKHRoaXMsIDEsIDQpLndlZWs7IHJldHVybiBudWxsID09IGUgPyB0IDogdGhpcy5hZGQoNyAqIChlIC0gdCksICJkIikgfSwgX24ud2Vla3NJblllYXIgPSBmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7IHJldHVybiBGZSh0aGlzLnllYXIoKSwgZS5kb3csIGUuZG95KSB9LCBfbi53ZWVrc0luV2Vla1llYXIgPSBmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7IHJldHVybiBGZSh0aGlzLndlZWtZZWFyKCksIGUuZG93LCBlLmRveSkgfSwgX24uaXNvV2Vla3NJblllYXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBGZSh0aGlzLnllYXIoKSwgMSwgNCkgfSwgX24uaXNvV2Vla3NJbklTT1dlZWtZZWFyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gRmUodGhpcy5pc29XZWVrWWVhcigpLCAxLCA0KSB9LCBfbi5kYXRlID0gbG4sIF9uLmRheSA9IF9uLmRheXMgPSBmdW5jdGlvbiAoZSkgeyBpZiAoIXRoaXMuaXNWYWxpZCgpKSByZXR1cm4gbnVsbCAhPSBlID8gdGhpcyA6IE5hTjsgdmFyIHQgPSB0aGlzLl9pc1VUQyA/IHRoaXMuX2QuZ2V0VVRDRGF5KCkgOiB0aGlzLl9kLmdldERheSgpOyByZXR1cm4gbnVsbCAhPSBlID8gKGUgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gInN0cmluZyIgIT0gdHlwZW9mIGUgPyBlIDogaXNOYU4oZSkgPyAibnVtYmVyIiA9PSB0eXBlb2YgKGUgPSB0LndlZWtkYXlzUGFyc2UoZSkpID8gZSA6IG51bGwgOiBwYXJzZUludChlLCAxMCkgfShlLCB0aGlzLmxvY2FsZURhdGEoKSksIHRoaXMuYWRkKGUgLSB0LCAiZCIpKSA6IHQgfSwgX24ud2Vla2RheSA9IGZ1bmN0aW9uIChlKSB7IGlmICghdGhpcy5pc1ZhbGlkKCkpIHJldHVybiBudWxsICE9IGUgPyB0aGlzIDogTmFOOyB2YXIgdCA9ICh0aGlzLmRheSgpICsgNyAtIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdykgJSA3OyByZXR1cm4gbnVsbCA9PSBlID8gdCA6IHRoaXMuYWRkKGUgLSB0LCAiZCIpIH0sIF9uLmlzb1dlZWtkYXkgPSBmdW5jdGlvbiAoZSkgeyBpZiAoIXRoaXMuaXNWYWxpZCgpKSByZXR1cm4gbnVsbCAhPSBlID8gdGhpcyA6IE5hTjsgaWYgKG51bGwgIT0gZSkgeyB2YXIgdCA9IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IHQud2Vla2RheXNQYXJzZShlKSAlIDcgfHwgNyA6IGlzTmFOKGUpID8gbnVsbCA6IGUgfShlLCB0aGlzLmxvY2FsZURhdGEoKSk7IHJldHVybiB0aGlzLmRheSh0aGlzLmRheSgpICUgNyA/IHQgOiB0IC0gNykgfSByZXR1cm4gdGhpcy5kYXkoKSB8fCA3IH0sIF9uLmRheU9mWWVhciA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gTWF0aC5yb3VuZCgodGhpcy5jbG9uZSgpLnN0YXJ0T2YoImRheSIpIC0gdGhpcy5jbG9uZSgpLnN0YXJ0T2YoInllYXIiKSkgLyA4NjRlNSkgKyAxOyByZXR1cm4gbnVsbCA9PSBlID8gdCA6IHRoaXMuYWRkKGUgLSB0LCAiZCIpIH0sIF9uLmhvdXIgPSBfbi5ob3VycyA9IEplLCBfbi5taW51dGUgPSBfbi5taW51dGVzID0gaG4sIF9uLnNlY29uZCA9IF9uLnNlY29uZHMgPSBmbiwgX24ubWlsbGlzZWNvbmQgPSBfbi5taWxsaXNlY29uZHMgPSBjbiwgX24udXRjT2Zmc2V0ID0gZnVuY3Rpb24gKGUsIHQsIHMpIHsgdmFyIGksIHIgPSB0aGlzLl9vZmZzZXQgfHwgMDsgaWYgKCF0aGlzLmlzVmFsaWQoKSkgcmV0dXJuIG51bGwgIT0gZSA/IHRoaXMgOiBOYU47IGlmIChudWxsICE9IGUpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSB7IGlmIChudWxsID09PSAoZSA9IEN0KGhlLCBlKSkpIHJldHVybiB0aGlzIH0gZWxzZSBNYXRoLmFicyhlKSA8IDE2ICYmICFzICYmIChlICo9IDYwKTsgcmV0dXJuICF0aGlzLl9pc1VUQyAmJiB0ICYmIChpID0gVXQodGhpcykpLCB0aGlzLl9vZmZzZXQgPSBlLCB0aGlzLl9pc1VUQyA9ICEwLCBudWxsICE9IGkgJiYgdGhpcy5hZGQoaSwgIm0iKSwgciAhPT0gZSAmJiAoIXQgfHwgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcyA/IEl0KHRoaXMsIEd0KGUgLSByLCAibSIpLCAxLCAhMSkgOiB0aGlzLl9jaGFuZ2VJblByb2dyZXNzIHx8ICh0aGlzLl9jaGFuZ2VJblByb2dyZXNzID0gITAsIG4udXBkYXRlT2Zmc2V0KHRoaXMsICEwKSwgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcyA9IG51bGwpKSwgdGhpcyB9IHJldHVybiB0aGlzLl9pc1VUQyA/IHIgOiBVdCh0aGlzKSB9LCBfbi51dGMgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy51dGNPZmZzZXQoMCwgZSkgfSwgX24ubG9jYWwgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5faXNVVEMgJiYgKHRoaXMudXRjT2Zmc2V0KDAsIGUpLCB0aGlzLl9pc1VUQyA9ICExLCBlICYmIHRoaXMuc3VidHJhY3QoVXQodGhpcyksICJtIikpLCB0aGlzIH0sIF9uLnBhcnNlWm9uZSA9IGZ1bmN0aW9uICgpIHsgaWYgKG51bGwgIT0gdGhpcy5fdHptKSB0aGlzLnV0Y09mZnNldCh0aGlzLl90em0sICExLCAhMCk7IGVsc2UgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0aGlzLl9pKSB7IHZhciBlID0gQ3QobGUsIHRoaXMuX2kpOyBudWxsICE9IGUgPyB0aGlzLnV0Y09mZnNldChlKSA6IHRoaXMudXRjT2Zmc2V0KDAsICEwKTsgfSByZXR1cm4gdGhpcyB9LCBfbi5oYXNBbGlnbmVkSG91ck9mZnNldCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAhIXRoaXMuaXNWYWxpZCgpICYmIChlID0gZSA/IFN0KGUpLnV0Y09mZnNldCgpIDogMCwgKHRoaXMudXRjT2Zmc2V0KCkgLSBlKSAlIDYwID09IDApIH0sIF9uLmlzRFNUID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy51dGNPZmZzZXQoKSA+IHRoaXMuY2xvbmUoKS5tb250aCgwKS51dGNPZmZzZXQoKSB8fCB0aGlzLnV0Y09mZnNldCgpID4gdGhpcy5jbG9uZSgpLm1vbnRoKDUpLnV0Y09mZnNldCgpIH0sIF9uLmlzTG9jYWwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAhIXRoaXMuaXNWYWxpZCgpICYmICF0aGlzLl9pc1VUQyB9LCBfbi5pc1V0Y09mZnNldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhdGhpcy5pc1ZhbGlkKCkgJiYgdGhpcy5faXNVVEMgfSwgX24uaXNVdGMgPSBGdCwgX24uaXNVVEMgPSBGdCwgX24uem9uZUFiYnIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9pc1VUQyA/ICJVVEMiIDogIiIgfSwgX24uem9uZU5hbWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9pc1VUQyA/ICJDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZSIgOiAiIiB9LCBfbi5kYXRlcyA9IE0oImRhdGVzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBkYXRlIGluc3RlYWQuIiwgbG4pLCBfbi5tb250aHMgPSBNKCJtb250aHMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbnRoIGluc3RlYWQiLCB4ZSksIF9uLnllYXJzID0gTSgieWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZCIsIFBlKSwgX24uem9uZSA9IE0oIm1vbWVudCgpLnpvbmUgaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudCgpLnV0Y09mZnNldCBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL3pvbmUvIiwgKGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBudWxsICE9IGUgPyAoInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgKGUgPSAtZSksIHRoaXMudXRjT2Zmc2V0KGUsIHQpLCB0aGlzKSA6IC10aGlzLnV0Y09mZnNldCgpIH0pKSwgX24uaXNEU1RTaGlmdGVkID0gTSgiaXNEU1RTaGlmdGVkIGlzIGRlcHJlY2F0ZWQuIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RzdC1zaGlmdGVkLyBmb3IgbW9yZSBpbmZvcm1hdGlvbiIsIChmdW5jdGlvbiAoKSB7IGlmICghbyh0aGlzLl9pc0RTVFNoaWZ0ZWQpKSByZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkOyB2YXIgZSwgdCA9IHt9OyByZXR1cm4gdyh0LCB0aGlzKSwgKHQgPSBNdCh0KSkuX2EgPyAoZSA9IHQuX2lzVVRDID8gYyh0Ll9hKSA6IFN0KHQuX2EpLCB0aGlzLl9pc0RTVFNoaWZ0ZWQgPSB0aGlzLmlzVmFsaWQoKSAmJiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcywgaSA9IE1hdGgubWluKGUubGVuZ3RoLCB0Lmxlbmd0aCksIHIgPSBNYXRoLmFicyhlLmxlbmd0aCAtIHQubGVuZ3RoKSwgYSA9IDA7IGZvciAocyA9IDA7IHMgPCBpOyBzKyspKG4gJiYgZVtzXSAhPT0gdFtzXSB8fCAhbiAmJiBaKGVbc10pICE9PSBaKHRbc10pKSAmJiBhKys7IHJldHVybiBhICsgciB9KHQuX2EsIGUudG9BcnJheSgpKSA+IDApIDogdGhpcy5faXNEU1RTaGlmdGVkID0gITEsIHRoaXMuX2lzRFNUU2hpZnRlZCB9KSk7IHZhciBnbiA9IHgucHJvdG90eXBlOyBmdW5jdGlvbiB3bihlLCB0LCBuLCBzKSB7IHZhciBpID0gYXQoKSwgciA9IGMoKS5zZXQocywgdCk7IHJldHVybiBpW25dKHIsIGUpIH0gZnVuY3Rpb24gcG4oZSwgdCwgbikgeyBpZiAodShlKSAmJiAodCA9IGUsIGUgPSB2b2lkIDApLCBlID0gZSB8fCAiIiwgbnVsbCAhPSB0KSByZXR1cm4gd24oZSwgdCwgbiwgIm1vbnRoIik7IHZhciBzLCBpID0gW107IGZvciAocyA9IDA7IHMgPCAxMjsgcysrKWlbc10gPSB3bihlLCBzLCBuLCAibW9udGgiKTsgcmV0dXJuIGkgfSBmdW5jdGlvbiB2bihlLCB0LCBuLCBzKSB7ICJib29sZWFuIiA9PSB0eXBlb2YgZSA/ICh1KHQpICYmIChuID0gdCwgdCA9IHZvaWQgMCksIHQgPSB0IHx8ICIiKSA6IChuID0gdCA9IGUsIGUgPSAhMSwgdSh0KSAmJiAobiA9IHQsIHQgPSB2b2lkIDApLCB0ID0gdCB8fCAiIik7IHZhciBpLCByID0gYXQoKSwgYSA9IGUgPyByLl93ZWVrLmRvdyA6IDAsIG8gPSBbXTsgaWYgKG51bGwgIT0gbikgcmV0dXJuIHduKHQsIChuICsgYSkgJSA3LCBzLCAiZGF5Iik7IGZvciAoaSA9IDA7IGkgPCA3OyBpKyspb1tpXSA9IHduKHQsIChpICsgYSkgJSA3LCBzLCAiZGF5Iik7IHJldHVybiBvIH0gZ24uY2FsZW5kYXIgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcyA9IHRoaXMuX2NhbGVuZGFyW2VdIHx8IHRoaXMuX2NhbGVuZGFyLnNhbWVFbHNlOyByZXR1cm4gTyhzKSA/IHMuY2FsbCh0LCBuKSA6IHMgfSwgZ24ubG9uZ0RhdGVGb3JtYXQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IHRoaXMuX2xvbmdEYXRlRm9ybWF0W2VdLCBuID0gdGhpcy5fbG9uZ0RhdGVGb3JtYXRbZS50b1VwcGVyQ2FzZSgpXTsgcmV0dXJuIHQgfHwgIW4gPyB0IDogKHRoaXMuX2xvbmdEYXRlRm9ybWF0W2VdID0gbi5tYXRjaChOKS5tYXAoKGZ1bmN0aW9uIChlKSB7IHJldHVybiAiTU1NTSIgPT09IGUgfHwgIk1NIiA9PT0gZSB8fCAiREQiID09PSBlIHx8ICJkZGRkIiA9PT0gZSA/IGUuc2xpY2UoMSkgOiBlIH0pKS5qb2luKCIiKSwgdGhpcy5fbG9uZ0RhdGVGb3JtYXRbZV0pIH0sIGduLmludmFsaWREYXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5faW52YWxpZERhdGUgfSwgZ24ub3JkaW5hbCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLl9vcmRpbmFsLnJlcGxhY2UoIiVkIiwgZSkgfSwgZ24ucHJlcGFyc2UgPSB5biwgZ24ucG9zdGZvcm1hdCA9IHluLCBnbi5yZWxhdGl2ZVRpbWUgPSBmdW5jdGlvbiAoZSwgdCwgbiwgcykgeyB2YXIgaSA9IHRoaXMuX3JlbGF0aXZlVGltZVtuXTsgcmV0dXJuIE8oaSkgPyBpKGUsIHQsIG4sIHMpIDogaS5yZXBsYWNlKC8lZC9pLCBlKSB9LCBnbi5wYXN0RnV0dXJlID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSB0aGlzLl9yZWxhdGl2ZVRpbWVbZSA+IDAgPyAiZnV0dXJlIiA6ICJwYXN0Il07IHJldHVybiBPKG4pID8gbih0KSA6IG4ucmVwbGFjZSgvJXMvaSwgdCkgfSwgZ24uc2V0ID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG47IGZvciAobiBpbiBlKSByKGUsIG4pICYmIChPKHQgPSBlW25dKSA/IHRoaXNbbl0gPSB0IDogdGhpc1siXyIgKyBuXSA9IHQpOyB0aGlzLl9jb25maWcgPSBlLCB0aGlzLl9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlTGVuaWVudCA9IG5ldyBSZWdFeHAoKHRoaXMuX2RheU9mTW9udGhPcmRpbmFsUGFyc2Uuc291cmNlIHx8IHRoaXMuX29yZGluYWxQYXJzZS5zb3VyY2UpICsgInwiICsgL1xkezEsMn0vLnNvdXJjZSk7IH0sIGduLmVyYXMgPSBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgcywgaSwgciwgYSA9IHRoaXMuX2VyYXMgfHwgYXQoImVuIikuX2VyYXM7IGZvciAocyA9IDAsIGkgPSBhLmxlbmd0aDsgcyA8IGk7ICsrcykgeyBzd2l0Y2ggKHR5cGVvZiBhW3NdLnNpbmNlKSB7IGNhc2UgInN0cmluZyI6IHIgPSBuKGFbc10uc2luY2UpLnN0YXJ0T2YoImRheSIpLCBhW3NdLnNpbmNlID0gci52YWx1ZU9mKCk7IH1zd2l0Y2ggKHR5cGVvZiBhW3NdLnVudGlsKSB7IGNhc2UgInVuZGVmaW5lZCI6IGFbc10udW50aWwgPSAxIC8gMDsgYnJlYWs7IGNhc2UgInN0cmluZyI6IHIgPSBuKGFbc10udW50aWwpLnN0YXJ0T2YoImRheSIpLnZhbHVlT2YoKSwgYVtzXS51bnRpbCA9IHIudmFsdWVPZigpOyB9IH0gcmV0dXJuIGEgfSwgZ24uZXJhc1BhcnNlID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHMsIGksIHIsIGEsIG8sIHUgPSB0aGlzLmVyYXMoKTsgZm9yIChlID0gZS50b1VwcGVyQ2FzZSgpLCBzID0gMCwgaSA9IHUubGVuZ3RoOyBzIDwgaTsgKytzKWlmIChyID0gdVtzXS5uYW1lLnRvVXBwZXJDYXNlKCksIGEgPSB1W3NdLmFiYnIudG9VcHBlckNhc2UoKSwgbyA9IHVbc10ubmFycm93LnRvVXBwZXJDYXNlKCksIG4pIHN3aXRjaCAodCkgeyBjYXNlICJOIjogY2FzZSAiTk4iOiBjYXNlICJOTk4iOiBpZiAoYSA9PT0gZSkgcmV0dXJuIHVbc107IGJyZWFrOyBjYXNlICJOTk5OIjogaWYgKHIgPT09IGUpIHJldHVybiB1W3NdOyBicmVhazsgY2FzZSAiTk5OTk4iOiBpZiAobyA9PT0gZSkgcmV0dXJuIHVbc10gfSBlbHNlIGlmIChbciwgYSwgb10uaW5kZXhPZihlKSA+PSAwKSByZXR1cm4gdVtzXSB9LCBnbi5lcmFzQ29udmVydFllYXIgPSBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgcyA9IGUuc2luY2UgPD0gZS51bnRpbCA/IDEgOiAtMTsgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IG4oZS5zaW5jZSkueWVhcigpIDogbihlLnNpbmNlKS55ZWFyKCkgKyAodCAtIGUub2Zmc2V0KSAqIHMgfSwgZ24uZXJhc0FiYnJSZWdleCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiByKHRoaXMsICJfZXJhc0FiYnJSZWdleCIpIHx8IHJuLmNhbGwodGhpcyksIGUgPyB0aGlzLl9lcmFzQWJiclJlZ2V4IDogdGhpcy5fZXJhc1JlZ2V4IH0sIGduLmVyYXNOYW1lUmVnZXggPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gcih0aGlzLCAiX2VyYXNOYW1lUmVnZXgiKSB8fCBybi5jYWxsKHRoaXMpLCBlID8gdGhpcy5fZXJhc05hbWVSZWdleCA6IHRoaXMuX2VyYXNSZWdleCB9LCBnbi5lcmFzTmFycm93UmVnZXggPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gcih0aGlzLCAiX2VyYXNOYXJyb3dSZWdleCIpIHx8IHJuLmNhbGwodGhpcyksIGUgPyB0aGlzLl9lcmFzTmFycm93UmVnZXggOiB0aGlzLl9lcmFzUmVnZXggfSwgZ24ubW9udGhzID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGUgPyBzKHRoaXMuX21vbnRocykgPyB0aGlzLl9tb250aHNbZS5tb250aCgpXSA6IHRoaXMuX21vbnRoc1sodGhpcy5fbW9udGhzLmlzRm9ybWF0IHx8IERlKS50ZXN0KHQpID8gImZvcm1hdCIgOiAic3RhbmRhbG9uZSJdW2UubW9udGgoKV0gOiBzKHRoaXMuX21vbnRocykgPyB0aGlzLl9tb250aHMgOiB0aGlzLl9tb250aHMuc3RhbmRhbG9uZSB9LCBnbi5tb250aHNTaG9ydCA9IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBlID8gcyh0aGlzLl9tb250aHNTaG9ydCkgPyB0aGlzLl9tb250aHNTaG9ydFtlLm1vbnRoKCldIDogdGhpcy5fbW9udGhzU2hvcnRbRGUudGVzdCh0KSA/ICJmb3JtYXQiIDogInN0YW5kYWxvbmUiXVtlLm1vbnRoKCldIDogcyh0aGlzLl9tb250aHNTaG9ydCkgPyB0aGlzLl9tb250aHNTaG9ydCA6IHRoaXMuX21vbnRoc1Nob3J0LnN0YW5kYWxvbmUgfSwgZ24ubW9udGhzUGFyc2UgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcywgaSwgcjsgaWYgKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpIHJldHVybiBPZS5jYWxsKHRoaXMsIGUsIHQsIG4pOyBmb3IgKHRoaXMuX21vbnRoc1BhcnNlIHx8ICh0aGlzLl9tb250aHNQYXJzZSA9IFtdLCB0aGlzLl9sb25nTW9udGhzUGFyc2UgPSBbXSwgdGhpcy5fc2hvcnRNb250aHNQYXJzZSA9IFtdKSwgcyA9IDA7IHMgPCAxMjsgcysrKSB7IGlmIChpID0gYyhbMmUzLCBzXSksIG4gJiYgIXRoaXMuX2xvbmdNb250aHNQYXJzZVtzXSAmJiAodGhpcy5fbG9uZ01vbnRoc1BhcnNlW3NdID0gbmV3IFJlZ0V4cCgiXiIgKyB0aGlzLm1vbnRocyhpLCAiIikucmVwbGFjZSgiLiIsICIiKSArICIkIiwgImkiKSwgdGhpcy5fc2hvcnRNb250aHNQYXJzZVtzXSA9IG5ldyBSZWdFeHAoIl4iICsgdGhpcy5tb250aHNTaG9ydChpLCAiIikucmVwbGFjZSgiLiIsICIiKSArICIkIiwgImkiKSksIG4gfHwgdGhpcy5fbW9udGhzUGFyc2Vbc10gfHwgKHIgPSAiXiIgKyB0aGlzLm1vbnRocyhpLCAiIikgKyAifF4iICsgdGhpcy5tb250aHNTaG9ydChpLCAiIiksIHRoaXMuX21vbnRoc1BhcnNlW3NdID0gbmV3IFJlZ0V4cChyLnJlcGxhY2UoIi4iLCAiIiksICJpIikpLCBuICYmICJNTU1NIiA9PT0gdCAmJiB0aGlzLl9sb25nTW9udGhzUGFyc2Vbc10udGVzdChlKSkgcmV0dXJuIHM7IGlmIChuICYmICJNTU0iID09PSB0ICYmIHRoaXMuX3Nob3J0TW9udGhzUGFyc2Vbc10udGVzdChlKSkgcmV0dXJuIHM7IGlmICghbiAmJiB0aGlzLl9tb250aHNQYXJzZVtzXS50ZXN0KGUpKSByZXR1cm4gcyB9IH0sIGduLm1vbnRoc1JlZ2V4ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMuX21vbnRoc1BhcnNlRXhhY3QgPyAocih0aGlzLCAiX21vbnRoc1JlZ2V4IikgfHwgVGUuY2FsbCh0aGlzKSwgZSA/IHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4IDogdGhpcy5fbW9udGhzUmVnZXgpIDogKHIodGhpcywgIl9tb250aHNSZWdleCIpIHx8ICh0aGlzLl9tb250aHNSZWdleCA9IFllKSwgdGhpcy5fbW9udGhzU3RyaWN0UmVnZXggJiYgZSA/IHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4IDogdGhpcy5fbW9udGhzUmVnZXgpIH0sIGduLm1vbnRoc1Nob3J0UmVnZXggPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5fbW9udGhzUGFyc2VFeGFjdCA/IChyKHRoaXMsICJfbW9udGhzUmVnZXgiKSB8fCBUZS5jYWxsKHRoaXMpLCBlID8gdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCA6IHRoaXMuX21vbnRoc1Nob3J0UmVnZXgpIDogKHIodGhpcywgIl9tb250aHNTaG9ydFJlZ2V4IikgfHwgKHRoaXMuX21vbnRoc1Nob3J0UmVnZXggPSBTZSksIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXggJiYgZSA/IHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXggOiB0aGlzLl9tb250aHNTaG9ydFJlZ2V4KSB9LCBnbi53ZWVrID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIFVlKGUsIHRoaXMuX3dlZWsuZG93LCB0aGlzLl93ZWVrLmRveSkud2VlayB9LCBnbi5maXJzdERheU9mWWVhciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX3dlZWsuZG95IH0sIGduLmZpcnN0RGF5T2ZXZWVrID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fd2Vlay5kb3cgfSwgZ24ud2Vla2RheXMgPSBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IHModGhpcy5fd2Vla2RheXMpID8gdGhpcy5fd2Vla2RheXMgOiB0aGlzLl93ZWVrZGF5c1tlICYmICEwICE9PSBlICYmIHRoaXMuX3dlZWtkYXlzLmlzRm9ybWF0LnRlc3QodCkgPyAiZm9ybWF0IiA6ICJzdGFuZGFsb25lIl07IHJldHVybiAhMCA9PT0gZSA/IExlKG4sIHRoaXMuX3dlZWsuZG93KSA6IGUgPyBuW2UuZGF5KCldIDogbiB9LCBnbi53ZWVrZGF5c01pbiA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAhMCA9PT0gZSA/IExlKHRoaXMuX3dlZWtkYXlzTWluLCB0aGlzLl93ZWVrLmRvdykgOiBlID8gdGhpcy5fd2Vla2RheXNNaW5bZS5kYXkoKV0gOiB0aGlzLl93ZWVrZGF5c01pbiB9LCBnbi53ZWVrZGF5c1Nob3J0ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuICEwID09PSBlID8gTGUodGhpcy5fd2Vla2RheXNTaG9ydCwgdGhpcy5fd2Vlay5kb3cpIDogZSA/IHRoaXMuX3dlZWtkYXlzU2hvcnRbZS5kYXkoKV0gOiB0aGlzLl93ZWVrZGF5c1Nob3J0IH0sIGduLndlZWtkYXlzUGFyc2UgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcywgaSwgcjsgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkgcmV0dXJuIFplLmNhbGwodGhpcywgZSwgdCwgbik7IGZvciAodGhpcy5fd2Vla2RheXNQYXJzZSB8fCAodGhpcy5fd2Vla2RheXNQYXJzZSA9IFtdLCB0aGlzLl9taW5XZWVrZGF5c1BhcnNlID0gW10sIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSA9IFtdLCB0aGlzLl9mdWxsV2Vla2RheXNQYXJzZSA9IFtdKSwgcyA9IDA7IHMgPCA3OyBzKyspIHsgaWYgKGkgPSBjKFsyZTMsIDFdKS5kYXkocyksIG4gJiYgIXRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW3NdICYmICh0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtzXSA9IG5ldyBSZWdFeHAoIl4iICsgdGhpcy53ZWVrZGF5cyhpLCAiIikucmVwbGFjZSgiLiIsICJcXC4/IikgKyAiJCIsICJpIiksIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtzXSA9IG5ldyBSZWdFeHAoIl4iICsgdGhpcy53ZWVrZGF5c1Nob3J0KGksICIiKS5yZXBsYWNlKCIuIiwgIlxcLj8iKSArICIkIiwgImkiKSwgdGhpcy5fbWluV2Vla2RheXNQYXJzZVtzXSA9IG5ldyBSZWdFeHAoIl4iICsgdGhpcy53ZWVrZGF5c01pbihpLCAiIikucmVwbGFjZSgiLiIsICJcXC4/IikgKyAiJCIsICJpIikpLCB0aGlzLl93ZWVrZGF5c1BhcnNlW3NdIHx8IChyID0gIl4iICsgdGhpcy53ZWVrZGF5cyhpLCAiIikgKyAifF4iICsgdGhpcy53ZWVrZGF5c1Nob3J0KGksICIiKSArICJ8XiIgKyB0aGlzLndlZWtkYXlzTWluKGksICIiKSwgdGhpcy5fd2Vla2RheXNQYXJzZVtzXSA9IG5ldyBSZWdFeHAoci5yZXBsYWNlKCIuIiwgIiIpLCAiaSIpKSwgbiAmJiAiZGRkZCIgPT09IHQgJiYgdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2Vbc10udGVzdChlKSkgcmV0dXJuIHM7IGlmIChuICYmICJkZGQiID09PSB0ICYmIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtzXS50ZXN0KGUpKSByZXR1cm4gczsgaWYgKG4gJiYgImRkIiA9PT0gdCAmJiB0aGlzLl9taW5XZWVrZGF5c1BhcnNlW3NdLnRlc3QoZSkpIHJldHVybiBzOyBpZiAoIW4gJiYgdGhpcy5fd2Vla2RheXNQYXJzZVtzXS50ZXN0KGUpKSByZXR1cm4gcyB9IH0sIGduLndlZWtkYXlzUmVnZXggPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0ID8gKHIodGhpcywgIl93ZWVrZGF5c1JlZ2V4IikgfHwgemUuY2FsbCh0aGlzKSwgZSA/IHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c1JlZ2V4KSA6IChyKHRoaXMsICJfd2Vla2RheXNSZWdleCIpIHx8ICh0aGlzLl93ZWVrZGF5c1JlZ2V4ID0gQWUpLCB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4ICYmIGUgPyB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4IDogdGhpcy5fd2Vla2RheXNSZWdleCkgfSwgZ24ud2Vla2RheXNTaG9ydFJlZ2V4ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCA/IChyKHRoaXMsICJfd2Vla2RheXNSZWdleCIpIHx8IHplLmNhbGwodGhpcyksIGUgPyB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXgpIDogKHIodGhpcywgIl93ZWVrZGF5c1Nob3J0UmVnZXgiKSB8fCAodGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4ID0gamUpLCB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXggJiYgZSA/IHRoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleCA6IHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCkgfSwgZ24ud2Vla2RheXNNaW5SZWdleCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QgPyAocih0aGlzLCAiX3dlZWtkYXlzUmVnZXgiKSB8fCB6ZS5jYWxsKHRoaXMpLCBlID8gdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleCA6IHRoaXMuX3dlZWtkYXlzTWluUmVnZXgpIDogKHIodGhpcywgIl93ZWVrZGF5c01pblJlZ2V4IikgfHwgKHRoaXMuX3dlZWtkYXlzTWluUmVnZXggPSBJZSksIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXggJiYgZSA/IHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c01pblJlZ2V4KSB9LCBnbi5pc1BNID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuICJwIiA9PT0gKGUgKyAiIikudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCkgfSwgZ24ubWVyaWRpZW0gPSBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gZSA+IDExID8gbiA/ICJwbSIgOiAiUE0iIDogbiA/ICJhbSIgOiAiQU0iIH0sIGl0KCJlbiIsIHsgZXJhczogW3sgc2luY2U6ICIwMDAxLTAxLTAxIiwgdW50aWw6IDEgLyAwLCBvZmZzZXQ6IDEsIG5hbWU6ICJBbm5vIERvbWluaSIsIG5hcnJvdzogIkFEIiwgYWJicjogIkFEIiB9LCB7IHNpbmNlOiAiMDAwMC0xMi0zMSIsIHVudGlsOiAtMSAvIDAsIG9mZnNldDogMSwgbmFtZTogIkJlZm9yZSBDaHJpc3QiLCBuYXJyb3c6ICJCQyIsIGFiYnI6ICJCQyIgfV0sIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cZHsxLDJ9KHRofHN0fG5kfHJkKS8sIG9yZGluYWw6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZSAlIDEwOyByZXR1cm4gZSArICgxID09PSBaKGUgJSAxMDAgLyAxMCkgPyAidGgiIDogMSA9PT0gdCA/ICJzdCIgOiAyID09PSB0ID8gIm5kIiA6IDMgPT09IHQgPyAicmQiIDogInRoIikgfSB9KSwgbi5sYW5nID0gTSgibW9tZW50LmxhbmcgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGUgaW5zdGVhZC4iLCBpdCksIG4ubGFuZ0RhdGEgPSBNKCJtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuIiwgYXQpOyB2YXIga24gPSBNYXRoLmFiczsgZnVuY3Rpb24gTW4oZSwgdCwgbiwgcykgeyB2YXIgaSA9IEd0KHQsIG4pOyByZXR1cm4gZS5fbWlsbGlzZWNvbmRzICs9IHMgKiBpLl9taWxsaXNlY29uZHMsIGUuX2RheXMgKz0gcyAqIGkuX2RheXMsIGUuX21vbnRocyArPSBzICogaS5fbW9udGhzLCBlLl9idWJibGUoKSB9IGZ1bmN0aW9uIERuKGUpIHsgcmV0dXJuIGUgPCAwID8gTWF0aC5mbG9vcihlKSA6IE1hdGguY2VpbChlKSB9IGZ1bmN0aW9uIFNuKGUpIHsgcmV0dXJuIDQ4MDAgKiBlIC8gMTQ2MDk3IH0gZnVuY3Rpb24gWW4oZSkgeyByZXR1cm4gMTQ2MDk3ICogZSAvIDQ4MDAgfSBmdW5jdGlvbiBPbihlKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmFzKGUpIH0gfSB2YXIgYm4gPSBPbigibXMiKSwgeG4gPSBPbigicyIpLCBUbiA9IE9uKCJtIiksIE5uID0gT24oImgiKSwgUG4gPSBPbigiZCIpLCBSbiA9IE9uKCJ3IiksIFduID0gT24oIk0iKSwgQ24gPSBPbigiUSIpLCBIbiA9IE9uKCJ5Iik7IGZ1bmN0aW9uIFVuKGUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5fZGF0YVtlXSA6IE5hTiB9IH0gdmFyIEZuID0gVW4oIm1pbGxpc2Vjb25kcyIpLCBMbiA9IFVuKCJzZWNvbmRzIiksIFZuID0gVW4oIm1pbnV0ZXMiKSwgR24gPSBVbigiaG91cnMiKSwgRW4gPSBVbigiZGF5cyIpLCBBbiA9IFVuKCJtb250aHMiKSwgam4gPSBVbigieWVhcnMiKTsgdmFyIEluID0gTWF0aC5yb3VuZCwgWm4gPSB7IHNzOiA0NCwgczogNDUsIG06IDQ1LCBoOiAyMiwgZDogMjYsIHc6IG51bGwsIE06IDExIH07IGZ1bmN0aW9uIHpuKGUsIHQsIG4sIHMsIGkpIHsgcmV0dXJuIGkucmVsYXRpdmVUaW1lKHQgfHwgMSwgISFuLCBlLCBzKSB9IHZhciAkbiA9IE1hdGguYWJzOyBmdW5jdGlvbiBxbihlKSB7IHJldHVybiAoZSA+IDApIC0gKGUgPCAwKSB8fCArZSB9IGZ1bmN0aW9uIEJuKCkgeyBpZiAoIXRoaXMuaXNWYWxpZCgpKSByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTsgdmFyIGUsIHQsIG4sIHMsIGksIHIsIGEsIG8sIHUgPSAkbih0aGlzLl9taWxsaXNlY29uZHMpIC8gMWUzLCBsID0gJG4odGhpcy5fZGF5cyksIGggPSAkbih0aGlzLl9tb250aHMpLCBkID0gdGhpcy5hc1NlY29uZHMoKTsgcmV0dXJuIGQgPyAoZSA9IEkodSAvIDYwKSwgdCA9IEkoZSAvIDYwKSwgdSAlPSA2MCwgZSAlPSA2MCwgbiA9IEkoaCAvIDEyKSwgaCAlPSAxMiwgcyA9IHUgPyB1LnRvRml4ZWQoMykucmVwbGFjZSgvXC4/MCskLywgIiIpIDogIiIsIGkgPSBkIDwgMCA/ICItIiA6ICIiLCByID0gcW4odGhpcy5fbW9udGhzKSAhPT0gcW4oZCkgPyAiLSIgOiAiIiwgYSA9IHFuKHRoaXMuX2RheXMpICE9PSBxbihkKSA/ICItIiA6ICIiLCBvID0gcW4odGhpcy5fbWlsbGlzZWNvbmRzKSAhPT0gcW4oZCkgPyAiLSIgOiAiIiwgaSArICJQIiArIChuID8gciArIG4gKyAiWSIgOiAiIikgKyAoaCA/IHIgKyBoICsgIk0iIDogIiIpICsgKGwgPyBhICsgbCArICJEIiA6ICIiKSArICh0IHx8IGUgfHwgdSA/ICJUIiA6ICIiKSArICh0ID8gbyArIHQgKyAiSCIgOiAiIikgKyAoZSA/IG8gKyBlICsgIk0iIDogIiIpICsgKHUgPyBvICsgcyArICJTIiA6ICIiKSkgOiAiUDBEIiB9IHZhciBKbiA9IFR0LnByb3RvdHlwZTsgSm4uaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2lzVmFsaWQgfSwgSm4uYWJzID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXMuX2RhdGE7IHJldHVybiB0aGlzLl9taWxsaXNlY29uZHMgPSBrbih0aGlzLl9taWxsaXNlY29uZHMpLCB0aGlzLl9kYXlzID0ga24odGhpcy5fZGF5cyksIHRoaXMuX21vbnRocyA9IGtuKHRoaXMuX21vbnRocyksIGUubWlsbGlzZWNvbmRzID0ga24oZS5taWxsaXNlY29uZHMpLCBlLnNlY29uZHMgPSBrbihlLnNlY29uZHMpLCBlLm1pbnV0ZXMgPSBrbihlLm1pbnV0ZXMpLCBlLmhvdXJzID0ga24oZS5ob3VycyksIGUubW9udGhzID0ga24oZS5tb250aHMpLCBlLnllYXJzID0ga24oZS55ZWFycyksIHRoaXMgfSwgSm4uYWRkID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIE1uKHRoaXMsIGUsIHQsIDEpIH0sIEpuLnN1YnRyYWN0ID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIE1uKHRoaXMsIGUsIHQsIC0xKSB9LCBKbi5hcyA9IGZ1bmN0aW9uIChlKSB7IGlmICghdGhpcy5pc1ZhbGlkKCkpIHJldHVybiBOYU47IHZhciB0LCBuLCBzID0gdGhpcy5fbWlsbGlzZWNvbmRzOyBpZiAoIm1vbnRoIiA9PT0gKGUgPSBWKGUpKSB8fCAicXVhcnRlciIgPT09IGUgfHwgInllYXIiID09PSBlKSBzd2l0Y2ggKHQgPSB0aGlzLl9kYXlzICsgcyAvIDg2NGU1LCBuID0gdGhpcy5fbW9udGhzICsgU24odCksIGUpIHsgY2FzZSAibW9udGgiOiByZXR1cm4gbjsgY2FzZSAicXVhcnRlciI6IHJldHVybiBuIC8gMzsgY2FzZSAieWVhciI6IHJldHVybiBuIC8gMTIgfSBlbHNlIHN3aXRjaCAodCA9IHRoaXMuX2RheXMgKyBNYXRoLnJvdW5kKFluKHRoaXMuX21vbnRocykpLCBlKSB7IGNhc2UgIndlZWsiOiByZXR1cm4gdCAvIDcgKyBzIC8gNjA0OGU1OyBjYXNlICJkYXkiOiByZXR1cm4gdCArIHMgLyA4NjRlNTsgY2FzZSAiaG91ciI6IHJldHVybiAyNCAqIHQgKyBzIC8gMzZlNTsgY2FzZSAibWludXRlIjogcmV0dXJuIDE0NDAgKiB0ICsgcyAvIDZlNDsgY2FzZSAic2Vjb25kIjogcmV0dXJuIDg2NDAwICogdCArIHMgLyAxZTM7IGNhc2UgIm1pbGxpc2Vjb25kIjogcmV0dXJuIE1hdGguZmxvb3IoODY0ZTUgKiB0KSArIHM7IGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcigiVW5rbm93biB1bml0ICIgKyBlKSB9IH0sIEpuLmFzTWlsbGlzZWNvbmRzID0gYm4sIEpuLmFzU2Vjb25kcyA9IHhuLCBKbi5hc01pbnV0ZXMgPSBUbiwgSm4uYXNIb3VycyA9IE5uLCBKbi5hc0RheXMgPSBQbiwgSm4uYXNXZWVrcyA9IFJuLCBKbi5hc01vbnRocyA9IFduLCBKbi5hc1F1YXJ0ZXJzID0gQ24sIEpuLmFzWWVhcnMgPSBIbiwgSm4udmFsdWVPZiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5fbWlsbGlzZWNvbmRzICsgODY0ZTUgKiB0aGlzLl9kYXlzICsgdGhpcy5fbW9udGhzICUgMTIgKiAyNTkyZTYgKyAzMTUzNmU2ICogWih0aGlzLl9tb250aHMgLyAxMikgOiBOYU4gfSwgSm4uX2J1YmJsZSA9IGZ1bmN0aW9uICgpIHsgdmFyIGUsIHQsIG4sIHMsIGksIHIgPSB0aGlzLl9taWxsaXNlY29uZHMsIGEgPSB0aGlzLl9kYXlzLCBvID0gdGhpcy5fbW9udGhzLCB1ID0gdGhpcy5fZGF0YTsgcmV0dXJuIHIgPj0gMCAmJiBhID49IDAgJiYgbyA+PSAwIHx8IHIgPD0gMCAmJiBhIDw9IDAgJiYgbyA8PSAwIHx8IChyICs9IDg2NGU1ICogRG4oWW4obykgKyBhKSwgYSA9IDAsIG8gPSAwKSwgdS5taWxsaXNlY29uZHMgPSByICUgMWUzLCBlID0gSShyIC8gMWUzKSwgdS5zZWNvbmRzID0gZSAlIDYwLCB0ID0gSShlIC8gNjApLCB1Lm1pbnV0ZXMgPSB0ICUgNjAsIG4gPSBJKHQgLyA2MCksIHUuaG91cnMgPSBuICUgMjQsIGEgKz0gSShuIC8gMjQpLCBvICs9IGkgPSBJKFNuKGEpKSwgYSAtPSBEbihZbihpKSksIHMgPSBJKG8gLyAxMiksIG8gJT0gMTIsIHUuZGF5cyA9IGEsIHUubW9udGhzID0gbywgdS55ZWFycyA9IHMsIHRoaXMgfSwgSm4uY2xvbmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBHdCh0aGlzKSB9LCBKbi5nZXQgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA9IFYoZSksIHRoaXMuaXNWYWxpZCgpID8gdGhpc1tlICsgInMiXSgpIDogTmFOIH0sIEpuLm1pbGxpc2Vjb25kcyA9IEZuLCBKbi5zZWNvbmRzID0gTG4sIEpuLm1pbnV0ZXMgPSBWbiwgSm4uaG91cnMgPSBHbiwgSm4uZGF5cyA9IEVuLCBKbi53ZWVrcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEkodGhpcy5kYXlzKCkgLyA3KSB9LCBKbi5tb250aHMgPSBBbiwgSm4ueWVhcnMgPSBqbiwgSm4uaHVtYW5pemUgPSBmdW5jdGlvbiAoZSwgdCkgeyBpZiAoIXRoaXMuaXNWYWxpZCgpKSByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTsgdmFyIG4sIHMsIGkgPSAhMSwgciA9IFpuOyByZXR1cm4gIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgKHQgPSBlLCBlID0gITEpLCAiYm9vbGVhbiIgPT0gdHlwZW9mIGUgJiYgKGkgPSBlKSwgIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgKHIgPSBPYmplY3QuYXNzaWduKHt9LCBabiwgdCksIG51bGwgIT0gdC5zICYmIG51bGwgPT0gdC5zcyAmJiAoci5zcyA9IHQucyAtIDEpKSwgcyA9IGZ1bmN0aW9uIChlLCB0LCBuLCBzKSB7IHZhciBpID0gR3QoZSkuYWJzKCksIHIgPSBJbihpLmFzKCJzIikpLCBhID0gSW4oaS5hcygibSIpKSwgbyA9IEluKGkuYXMoImgiKSksIHUgPSBJbihpLmFzKCJkIikpLCBsID0gSW4oaS5hcygiTSIpKSwgaCA9IEluKGkuYXMoInciKSksIGQgPSBJbihpLmFzKCJ5IikpLCBjID0gciA8PSBuLnNzICYmIFsicyIsIHJdIHx8IHIgPCBuLnMgJiYgWyJzcyIsIHJdIHx8IGEgPD0gMSAmJiBbIm0iXSB8fCBhIDwgbi5tICYmIFsibW0iLCBhXSB8fCBvIDw9IDEgJiYgWyJoIl0gfHwgbyA8IG4uaCAmJiBbImhoIiwgb10gfHwgdSA8PSAxICYmIFsiZCJdIHx8IHUgPCBuLmQgJiYgWyJkZCIsIHVdOyByZXR1cm4gbnVsbCAhPSBuLncgJiYgKGMgPSBjIHx8IGggPD0gMSAmJiBbInciXSB8fCBoIDwgbi53ICYmIFsid3ciLCBoXSksIChjID0gYyB8fCBsIDw9IDEgJiYgWyJNIl0gfHwgbCA8IG4uTSAmJiBbIk1NIiwgbF0gfHwgZCA8PSAxICYmIFsieSJdIHx8IFsieXkiLCBkXSlbMl0gPSB0LCBjWzNdID0gK2UgPiAwLCBjWzRdID0gcywgem4uYXBwbHkobnVsbCwgYykgfSh0aGlzLCAhaSwgciwgbiA9IHRoaXMubG9jYWxlRGF0YSgpKSwgaSAmJiAocyA9IG4ucGFzdEZ1dHVyZSgrdGhpcywgcykpLCBuLnBvc3Rmb3JtYXQocykgfSwgSm4udG9JU09TdHJpbmcgPSBCbiwgSm4udG9TdHJpbmcgPSBCbiwgSm4udG9KU09OID0gQm4sIEpuLmxvY2FsZSA9IFF0LCBKbi5sb2NhbGVEYXRhID0gS3QsIEpuLnRvSXNvU3RyaW5nID0gTSgidG9Jc29TdHJpbmcoKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHRvSVNPU3RyaW5nKCkgaW5zdGVhZCAobm90aWNlIHRoZSBjYXBpdGFscykiLCBCbiksIEpuLmxhbmcgPSBYdCwgQygiWCIsIDAsIDAsICJ1bml4IiksIEMoIngiLCAwLCAwLCAidmFsdWVPZiIpLCBjZSgieCIsIHVlKSwgY2UoIlgiLCAvWystXT9cZCsoXC5cZHsxLDN9KT8vKSwgeWUoIlgiLCAoZnVuY3Rpb24gKGUsIHQsIG4pIHsgbi5fZCA9IG5ldyBEYXRlKDFlMyAqIHBhcnNlRmxvYXQoZSkpOyB9KSksIHllKCJ4IiwgKGZ1bmN0aW9uIChlLCB0LCBuKSB7IG4uX2QgPSBuZXcgRGF0ZShaKGUpKTsgfSkpLA0KICAgIC8vISBtb21lbnQuanMNCiAgICBuLnZlcnNpb24gPSAiMi4yNy4wIiwgZSA9IFN0LCBuLmZuID0gX24sIG4ubWluID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTsgcmV0dXJuIGJ0KCJpc0JlZm9yZSIsIGUpIH0sIG4ubWF4ID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTsgcmV0dXJuIGJ0KCJpc0FmdGVyIiwgZSkgfSwgbi5ub3cgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBEYXRlLm5vdyA/IERhdGUubm93KCkgOiArbmV3IERhdGUgfSwgbi51dGMgPSBjLCBuLnVuaXggPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gU3QoMWUzICogZSkgfSwgbi5tb250aHMgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gcG4oZSwgdCwgIm1vbnRocyIpIH0sIG4uaXNEYXRlID0gbCwgbi5sb2NhbGUgPSBpdCwgbi5pbnZhbGlkID0gXywgbi5kdXJhdGlvbiA9IEd0LCBuLmlzTW9tZW50ID0gdiwgbi53ZWVrZGF5cyA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiB2bihlLCB0LCBuLCAid2Vla2RheXMiKSB9LCBuLnBhcnNlWm9uZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFN0LmFwcGx5KG51bGwsIGFyZ3VtZW50cykucGFyc2Vab25lKCkgfSwgbi5sb2NhbGVEYXRhID0gYXQsIG4uaXNEdXJhdGlvbiA9IE50LCBuLm1vbnRoc1Nob3J0ID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHBuKGUsIHQsICJtb250aHNTaG9ydCIpIH0sIG4ud2Vla2RheXNNaW4gPSBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gdm4oZSwgdCwgbiwgIndlZWtkYXlzTWluIikgfSwgbi5kZWZpbmVMb2NhbGUgPSBydCwgbi51cGRhdGVMb2NhbGUgPSBmdW5jdGlvbiAoZSwgdCkgeyBpZiAobnVsbCAhPSB0KSB7IHZhciBuLCBzLCBpID0gWGU7IG51bGwgIT0gS2VbZV0gJiYgbnVsbCAhPSBLZVtlXS5wYXJlbnRMb2NhbGUgPyBLZVtlXS5zZXQoYihLZVtlXS5fY29uZmlnLCB0KSkgOiAobnVsbCAhPSAocyA9IHN0KGUpKSAmJiAoaSA9IHMuX2NvbmZpZyksIHQgPSBiKGksIHQpLCBudWxsID09IHMgJiYgKHQuYWJiciA9IGUpLCAobiA9IG5ldyB4KHQpKS5wYXJlbnRMb2NhbGUgPSBLZVtlXSwgS2VbZV0gPSBuKSwgaXQoZSk7IH0gZWxzZSBudWxsICE9IEtlW2VdICYmIChudWxsICE9IEtlW2VdLnBhcmVudExvY2FsZSA/IChLZVtlXSA9IEtlW2VdLnBhcmVudExvY2FsZSwgZSA9PT0gaXQoKSAmJiBpdChlKSkgOiBudWxsICE9IEtlW2VdICYmIGRlbGV0ZSBLZVtlXSk7IHJldHVybiBLZVtlXSB9LCBuLmxvY2FsZXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBEKEtlKSB9LCBuLndlZWtkYXlzU2hvcnQgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gdm4oZSwgdCwgbiwgIndlZWtkYXlzU2hvcnQiKSB9LCBuLm5vcm1hbGl6ZVVuaXRzID0gViwgbi5yZWxhdGl2ZVRpbWVSb3VuZGluZyA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiB2b2lkIDAgPT09IGUgPyBJbiA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgKEluID0gZSwgITApIH0sIG4ucmVsYXRpdmVUaW1lVGhyZXNob2xkID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHZvaWQgMCAhPT0gWm5bZV0gJiYgKHZvaWQgMCA9PT0gdCA/IFpuW2VdIDogKFpuW2VdID0gdCwgInMiID09PSBlICYmIChabi5zcyA9IHQgLSAxKSwgITApKSB9LCBuLmNhbGVuZGFyRm9ybWF0ID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSBlLmRpZmYodCwgImRheXMiLCAhMCk7IHJldHVybiBuIDwgLTYgPyAic2FtZUVsc2UiIDogbiA8IC0xID8gImxhc3RXZWVrIiA6IG4gPCAwID8gImxhc3REYXkiIDogbiA8IDEgPyAic2FtZURheSIgOiBuIDwgMiA/ICJuZXh0RGF5IiA6IG4gPCA3ID8gIm5leHRXZWVrIiA6ICJzYW1lRWxzZSIgfSwgbi5wcm90b3R5cGUgPSBfbiwgbi5IVE1MNV9GTVQgPSB7IERBVEVUSU1FX0xPQ0FMOiAiWVlZWS1NTS1ERFRISDptbSIsIERBVEVUSU1FX0xPQ0FMX1NFQ09ORFM6ICJZWVlZLU1NLUREVEhIOm1tOnNzIiwgREFURVRJTUVfTE9DQUxfTVM6ICJZWVlZLU1NLUREVEhIOm1tOnNzLlNTUyIsIERBVEU6ICJZWVlZLU1NLUREIiwgVElNRTogIkhIOm1tIiwgVElNRV9TRUNPTkRTOiAiSEg6bW06c3MiLCBUSU1FX01TOiAiSEg6bW06c3MuU1NTIiwgV0VFSzogIkdHR0ctW1ddV1ciLCBNT05USDogIllZWVktTU0iIH07DQoNCmV4cG9ydCBkZWZhdWx0IG47DQoNCi8vIyBzb3VyY2VVUkw9L2VudHJpZXMvbW9tZW50LmpzDQo="
}